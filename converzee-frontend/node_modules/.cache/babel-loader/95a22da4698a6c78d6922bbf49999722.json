{"ast":null,"code":"import axios from\"axios\";import{Storage}from\"../../utils/Storage\";import{BASE_URL}from\"../../actions/URLs\";export class Request{}Request.loginAuth=function(params,callback){axios.post(BASE_URL+\"user/auth\",{userData:params}).then(res=>{if(res.data.success)Request.setAuth(res.data.token,res.data.id);callback(res,null);// const { token } = res.data;\n// localStorage.setItem(\"jwtToken\", token);\n}).catch(err=>callback(null,err));};Request.setAuth=function(){let token=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let id=arguments.length>1?arguments[1]:undefined;var now=new Date();now.setMinutes(now.getMinutes()+24*60);Storage.put(\"timeout\",now.getTime());Storage.put(\"id\",id);Storage.put(\"x-access-token\",token);};Request.getAuth=function(){const current=new Date().getTime();const timeout=Storage.get(\"timeout\");if(timeout>current){return true;}return false;};","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/auth/authHandler.js"],"names":["axios","Storage","BASE_URL","Request","loginAuth","params","callback","post","userData","then","res","data","success","setAuth","token","id","catch","err","now","Date","setMinutes","getMinutes","put","getTime","getAuth","current","timeout","get"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,qBAAxB,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,MAAO,MAAMC,CAAAA,OAAQ,EAARA,O,CACJC,S,CAAY,SAASC,MAAT,CAAiBC,QAAjB,CAA2B,CAC5CN,KAAK,CACFO,IADH,CACQL,QAAQ,CAAG,WADnB,CACgC,CAAEM,QAAQ,CAAEH,MAAZ,CADhC,EAEGI,IAFH,CAEQC,GAAG,EAAI,CACX,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,CAAsBT,OAAO,CAACU,OAAR,CAAgBH,GAAG,CAACC,IAAJ,CAASG,KAAzB,CAAgCJ,GAAG,CAACC,IAAJ,CAASI,EAAzC,EACtBT,QAAQ,CAACI,GAAD,CAAM,IAAN,CAAR,CACA;AACA;AACD,CAPH,EAQGM,KARH,CAQSC,GAAG,EAAIX,QAAQ,CAAC,IAAD,CAAOW,GAAP,CARxB,EASD,C,CAXUd,O,CAYJU,O,CAAU,UAA2B,IAAlBC,CAAAA,KAAkB,2DAAV,IAAU,IAAJC,CAAAA,EAAI,2CAC1C,GAAIG,CAAAA,GAAG,CAAG,GAAIC,CAAAA,IAAJ,EAAV,CACAD,GAAG,CAACE,UAAJ,CAAeF,GAAG,CAACG,UAAJ,GAAmB,GAAK,EAAvC,EACApB,OAAO,CAACqB,GAAR,CAAY,SAAZ,CAAuBJ,GAAG,CAACK,OAAJ,EAAvB,EACAtB,OAAO,CAACqB,GAAR,CAAY,IAAZ,CAAkBP,EAAlB,EACAd,OAAO,CAACqB,GAAR,CAAY,gBAAZ,CAA8BR,KAA9B,EACD,C,CAlBUX,O,CAmBJqB,O,CAAU,UAAW,CAC1B,KAAMC,CAAAA,OAAO,CAAG,GAAIN,CAAAA,IAAJ,GAAWI,OAAX,EAAhB,CACA,KAAMG,CAAAA,OAAO,CAAGzB,OAAO,CAAC0B,GAAR,CAAY,SAAZ,CAAhB,CACA,GAAID,OAAO,CAAGD,OAAd,CAAuB,CACrB,MAAO,KAAP,CACD,CACD,MAAO,MAAP,CACD,C","sourcesContent":["import axios from \"axios\";\r\nimport { Storage } from \"../../utils/Storage\";\r\nimport { BASE_URL } from \"../../actions/URLs\";\r\nexport class Request {\r\n  static loginAuth = function(params, callback) {\r\n    axios\r\n      .post(BASE_URL + \"user/auth\", { userData: params })\r\n      .then(res => {\r\n        if (res.data.success) Request.setAuth(res.data.token, res.data.id);\r\n        callback(res, null);\r\n        // const { token } = res.data;\r\n        // localStorage.setItem(\"jwtToken\", token);\r\n      })\r\n      .catch(err => callback(null, err));\r\n  };\r\n  static setAuth = function(token = null, id) {\r\n    var now = new Date();\r\n    now.setMinutes(now.getMinutes() + 24 * 60);\r\n    Storage.put(\"timeout\", now.getTime());\r\n    Storage.put(\"id\", id);\r\n    Storage.put(\"x-access-token\", token);\r\n  };\r\n  static getAuth = function() {\r\n    const current = new Date().getTime();\r\n    const timeout = Storage.get(\"timeout\");\r\n    if (timeout > current) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}