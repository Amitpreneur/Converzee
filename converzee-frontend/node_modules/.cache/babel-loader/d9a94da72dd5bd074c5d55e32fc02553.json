{"ast":null,"code":"import React,{Component}from\"react\";import SideBar from\"./SideBar\";import ToolUtil,{generateIframeContant,getDefaultItems}from\"../../utils/ToolUtil\";import Util,{generateFile,parseImgUrl}from\"../Util\";import Text from\"./Text\";import CTA from\"./CTA\";import{ToolLayout,ButtonsGroup}from\"../layout/ToolLayout\";import{getPath,GET_PIXEL,SAVE_TOOL,GET_ONE_TOOL}from\"../../actions/URLs\";import{OTO2}from\"../../utils/Routes\";import RequestHandler from\"../../actions/RequestHandler\";import{Modal}from\"antd\";import{LayoutSelector}from\"../layout/LayoutSelector\";import{OptinFormModalResponse,OptinFormModal}from\"../utils/Modal\";import{Preview}from\"./Preview\";import{ReponsiveImage}from\"../comman/PreviewAble\";import Code from\"./Code\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class SpecialBonusOptin extends Component{constructor(){super(...arguments);this.state={toolName:\"\",toolId:\"\",preview:false,_id:null,activeTab:2,toolData:{text:'<span style=\"font-size: 36px;\"><font color=\"#ff9c00\">Converzee</font></span>',cta:'<font color=\"#efefef\"><span style=\"font-size: 18px;\">Buy Now</span></font>',layout:0,template:0,style:[{name:\"Background\",id:\"backgound\",value:\"TRANSPARENT\"},{name:\"CTA Backgound\",id:\"ctabackgound\",value:\"#ff3a65\"}],timerType:\"DATE_AND_TIME_BASED\",endDateTime:\"\",timeZone:Util.getTimeZoneList()[0].value,postExpiryAction:\"hide\",redirectUrl:\"\",days:2,hours:2,minutes:2,seconds:2,bgImg:\"#fff\",isBGIMG:false,noThanks:\"No thanks\",subTitle:\"Subtitle here\",position:\"TOP\",isNameInput:false},CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:null}]}};this.loaded=false;this.layouts=[];this.templates=[];this.getLayoutName=i=>{if(i==0)return\"Hello Bar\";if(i==1)return\"Hello Bar + Timer\";if(i==2)return\"Exit Intent\";};this.onLayoutChange=index=>{const{toolData}=this.state;this.setState({toolData:{...toolData,layout:index}});};this.onTemplateChange=index=>{const{toolData}=this.state;this.setState({toolData:{...toolData,template:index}});};this.setTemplateslayout=layout=>{if(layout==0){this.templates=[\"asset/optin-layouts/hello/h1.PNG\",\"asset/optin-layouts/hello/h2.PNG\",\"asset/optin-layouts/hello/h3.PNG\",\"asset/optin-layouts/hello/h4.PNG\",\"asset/optin-layouts/hello/h5.PNG\"];}else{this.templates=[\"asset/optin-layouts/exit/1.png\",\"asset/optin-layouts/exit/2.png\",\"asset/optin-layouts/exit/3.png\",\"asset/optin-layouts/exit/4.png\",\"asset/optin-layouts/exit/5.png\"];}};this.onChangeActive=tabIndex=>{const{activeTab}=this.state;if(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.codeChange=data=>{this.setState({CODE:data});};this.onUpdate=data=>{const{toolData}=this.state;this.setState({toolData:{...toolData,...data}});};this.renderMain=()=>{const{activeTab,toolData,CODE}=this.state;let component=null;if(!this.loaded)return null;switch(activeTab){case 1:component=/*#__PURE__*/_jsx(LayoutSelector,{isExit:toolData.layout==2?true:false,onLayoutSelect:this.onTemplateChange,selected:toolData.template,items:this.templates});break;case 2:component=/*#__PURE__*/_jsx(Text,{text:toolData.text,isNameInput:toolData.isNameInput,noThanks:toolData.noThanks,subTitle:toolData.subTitle,layout:toolData.layout,onChange:this.onUpdate});break;case 3:component=/*#__PURE__*/_jsx(CTA,{cta:toolData.cta,position:toolData.position,layout:toolData.layout,onChange:this.onUpdate});break;case 5:component=/*#__PURE__*/_jsx(Code,{...CODE,onChange:this.codeChange});break;default:component=/*#__PURE__*/_jsx(Text,{onChange:this.onUpdate});break;}return component;};this.onClickSave=()=>{if(this.state.CODE.include[0].url!==\"\"){RequestHandler.PostRequest(SAVE_TOOL,{toolData:OptinFormModal(this.state)},(res,err)=>{if(res){const data1=res.data;if(data1.success){Modal.success({content:data1.message});setTimeout(()=>{this.props.history.push(\"/Campaigns\");},1000);}}});}else{Modal.warning({content:\"Should Contain atleast one trigger point\"});}};this.renderRight=()=>{const{toolData}=this.state;if(toolData.layout===2&&toolData.isBGIMG){return/*#__PURE__*/_jsx(ReponsiveImage,{isImg:true,url:toolData.bgImg});}if(toolData.layout===0){return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/hb3.png\"});}if(toolData.layout===1){return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/hbt3.png\"});}if(toolData.layout===2){return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/exit_pop_up.png\"});}};this.back=()=>{this.props.history.push(OTO2);};this.togglePreview=()=>{const{preview}=this.state;this.setState({preview:!preview});};}componentWillMount(){if(window.gs.ie){const ie=getDefaultItems(window.gs.ie);let{toolData}=this.state;this.state.toolData={...toolData,...ie};window.gs.ie=null;}}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{this.loaded=true;if(res){Util.isRedirected=true;const data=OptinFormModalResponse(res);this.setTemplateslayout(this.state.toolData.layout);if(data){this.setState(data,()=>{window.gs.navTitle(ToolUtil.getTool(data.toolId)+\"  \"+this.getLayoutName(this.state.toolData.layout)+\"  \"+\"(\"+data.name+\")\");});}}});}else{const toolId=23;this.loaded=true;const defLayout=window.gs.defaultLayout||0;this.setTemplateslayout(defLayout);this.onLayoutChange(defLayout);this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId)+\"  \"+this.getLayoutName(defLayout)+\"  \"+\"(\"+Util.CAMPAIGNS_NAME+\")\");delete window.gs.defaultLayout;}}render(){const{preview}=this.state;return/*#__PURE__*/_jsxs(ToolLayout,{children:[preview?/*#__PURE__*/_jsx(Preview,{...this.state,onClose:this.togglePreview}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-10 toolItem\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:this.renderMain()}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mt-2\",children:this.renderRight()}),/*#__PURE__*/_jsx(ButtonsGroup,{backUrl:this.back,preview:this.togglePreview,save:this.onClickSave})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 sideBarButtomPanel\",children:/*#__PURE__*/_jsx(SideBar,{layout:this.state.toolData.layout,activeTab:this.state.activeTab,onChangeActive:this.onChangeActive})})]})]});}}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/SpecialBonusOptin/index.js"],"names":["React","Component","SideBar","ToolUtil","generateIframeContant","getDefaultItems","Util","generateFile","parseImgUrl","Text","CTA","ToolLayout","ButtonsGroup","getPath","GET_PIXEL","SAVE_TOOL","GET_ONE_TOOL","OTO2","RequestHandler","Modal","LayoutSelector","OptinFormModalResponse","OptinFormModal","Preview","ReponsiveImage","Code","SpecialBonusOptin","state","toolName","toolId","preview","_id","activeTab","toolData","text","cta","layout","template","style","name","id","value","timerType","endDateTime","timeZone","getTimeZoneList","postExpiryAction","redirectUrl","days","hours","minutes","seconds","bgImg","isBGIMG","noThanks","subTitle","position","isNameInput","CODE","include","type","url","exclude","loaded","layouts","templates","getLayoutName","i","onLayoutChange","index","setState","onTemplateChange","setTemplateslayout","onChangeActive","tabIndex","codeChange","data","onUpdate","renderMain","component","onClickSave","PostRequest","res","err","data1","success","content","message","setTimeout","props","history","push","warning","renderRight","back","togglePreview","componentWillMount","window","gs","ie","componentDidMount","match","params","isRedirected","navTitle","getTool","defLayout","defaultLayout","CAMPAIGNS_NAME","RedirectWhenCampaignEmpty","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport SideBar from \"./SideBar\";\r\nimport ToolUtil, { generateIframeContant, getDefaultItems } from \"../../utils/ToolUtil\";\r\nimport Util, { generateFile, parseImgUrl } from \"../Util\";\r\nimport Text from \"./Text\";\r\nimport CTA from \"./CTA\";\r\nimport { ToolLayout, ButtonsGroup } from \"../layout/ToolLayout\";\r\nimport { getPath, GET_PIXEL, SAVE_TOOL, GET_ONE_TOOL } from \"../../actions/URLs\";\r\nimport { OTO2 } from \"../../utils/Routes\";\r\nimport RequestHandler from \"../../actions/RequestHandler\";\r\nimport { Modal } from \"antd\";\r\nimport { LayoutSelector } from \"../layout/LayoutSelector\";\r\nimport { OptinFormModalResponse, OptinFormModal } from \"../utils/Modal\";\r\nimport { Preview } from \"./Preview\";\r\nimport { ReponsiveImage } from \"../comman/PreviewAble\";\r\nimport Code from \"./Code\";\r\n\r\nexport default class SpecialBonusOptin extends Component {\r\n  state = {\r\n    toolName: \"\",\r\n    toolId: \"\",\r\n    preview: false,\r\n    _id: null,\r\n    activeTab: 2,\r\n    toolData: {\r\n      text: '<span style=\"font-size: 36px;\"><font color=\"#ff9c00\">Converzee</font></span>',\r\n      cta: '<font color=\"#efefef\"><span style=\"font-size: 18px;\">Buy Now</span></font>',\r\n      layout: 0,\r\n      template: 0,\r\n      style: [\r\n        { name: \"Background\", id: \"backgound\", value: \"TRANSPARENT\" },\r\n        { name: \"CTA Backgound\", id: \"ctabackgound\", value: \"#ff3a65\" },\r\n      ],\r\n      timerType: \"DATE_AND_TIME_BASED\",\r\n      endDateTime: \"\",\r\n      timeZone: Util.getTimeZoneList()[0].value,\r\n      postExpiryAction: \"hide\",\r\n      redirectUrl: \"\",\r\n      days: 2,\r\n      hours: 2,\r\n      minutes: 2,\r\n      seconds: 2,\r\n      bgImg: \"#fff\",\r\n      isBGIMG: false,\r\n      noThanks: \"No thanks\",\r\n      subTitle: \"Subtitle here\",\r\n      position: \"TOP\",\r\n      isNameInput: false,\r\n    },\r\n    CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: null }] },\r\n  };\r\n  loaded = false;\r\n  layouts = [];\r\n  templates = [];\r\n\r\n  componentWillMount() {\r\n    if (window.gs.ie) {\r\n      const ie = getDefaultItems(window.gs.ie);\r\n      let { toolData } = this.state;\r\n      this.state.toolData = { ...toolData, ...ie };\r\n      window.gs.ie = null;\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        this.loaded = true;\r\n        if (res) {\r\n          Util.isRedirected = true;\r\n          const data = OptinFormModalResponse(res);\r\n          this.setTemplateslayout(this.state.toolData.layout);\r\n          if (data) {\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"  \" + this.getLayoutName(this.state.toolData.layout) + \"  \" + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      const toolId = 23;\r\n      this.loaded = true;\r\n      const defLayout = window.gs.defaultLayout || 0;\r\n      this.setTemplateslayout(defLayout);\r\n      this.onLayoutChange(defLayout);\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"  \" + this.getLayoutName(defLayout) + \"  \" + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n      delete window.gs.defaultLayout;\r\n    }\r\n  }\r\n  getLayoutName = (i) => {\r\n    if (i == 0) return \"Hello Bar\";\r\n    if (i == 1) return \"Hello Bar + Timer\";\r\n    if (i == 2) return \"Exit Intent\";\r\n  };\r\n\r\n  onLayoutChange = (index) => {\r\n    const { toolData } = this.state;\r\n    this.setState({ toolData: { ...toolData, layout: index } });\r\n  };\r\n\r\n  onTemplateChange = (index) => {\r\n    const { toolData } = this.state;\r\n    this.setState({ toolData: { ...toolData, template: index } });\r\n  };\r\n\r\n  setTemplateslayout = (layout) => {\r\n    if (layout == 0) {\r\n      this.templates = [\r\n        \"asset/optin-layouts/hello/h1.PNG\",\r\n        \"asset/optin-layouts/hello/h2.PNG\",\r\n        \"asset/optin-layouts/hello/h3.PNG\",\r\n        \"asset/optin-layouts/hello/h4.PNG\",\r\n        \"asset/optin-layouts/hello/h5.PNG\",\r\n      ];\r\n    } else {\r\n      this.templates = [\"asset/optin-layouts/exit/1.png\", \"asset/optin-layouts/exit/2.png\", \"asset/optin-layouts/exit/3.png\", \"asset/optin-layouts/exit/4.png\", \"asset/optin-layouts/exit/5.png\"];\r\n    }\r\n  };\r\n\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n\r\n  codeChange = (data) => {\r\n    this.setState({ CODE: data });\r\n  };\r\n\r\n  onUpdate = (data) => {\r\n    const { toolData } = this.state;\r\n    this.setState({ toolData: { ...toolData, ...data } });\r\n  };\r\n\r\n  renderMain = () => {\r\n    const { activeTab, toolData, CODE } = this.state;\r\n    let component = null;\r\n    if (!this.loaded) return null;\r\n    switch (activeTab) {\r\n      case 1:\r\n        component = <LayoutSelector isExit={toolData.layout == 2 ? true : false} onLayoutSelect={this.onTemplateChange} selected={toolData.template} items={this.templates} />;\r\n        break;\r\n      case 2:\r\n        component = <Text text={toolData.text} isNameInput={toolData.isNameInput} noThanks={toolData.noThanks} subTitle={toolData.subTitle} layout={toolData.layout} onChange={this.onUpdate} />;\r\n        break;\r\n      case 3:\r\n        component = <CTA cta={toolData.cta} position={toolData.position} layout={toolData.layout} onChange={this.onUpdate} />;\r\n        break;\r\n      case 5:\r\n        component = <Code {...CODE} onChange={this.codeChange} />;\r\n        break;\r\n      default:\r\n        component = <Text onChange={this.onUpdate} />;\r\n        break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      RequestHandler.PostRequest(SAVE_TOOL, { toolData: OptinFormModal(this.state) }, (res, err) => {\r\n        if (res) {\r\n          const data1 = res.data;\r\n          if (data1.success) {\r\n            Modal.success({\r\n              content: data1.message,\r\n            });\r\n            setTimeout(() => {\r\n              this.props.history.push(\"/Campaigns\");\r\n            }, 1000);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  renderRight = () => {\r\n    const { toolData } = this.state;\r\n    if (toolData.layout === 2 && toolData.isBGIMG) {\r\n      return <ReponsiveImage isImg={true} url={toolData.bgImg} />;\r\n    }\r\n    if (toolData.layout === 0) {\r\n      return <ReponsiveImage isAs={true} url={\"asset/hb3.png\"} />;\r\n    }\r\n    if (toolData.layout === 1) {\r\n      return <ReponsiveImage isAs={true} url={\"asset/hbt3.png\"} />;\r\n    }\r\n    if (toolData.layout === 2) {\r\n      return <ReponsiveImage isAs={true} url={\"asset/exit_pop_up.png\"} />;\r\n    }\r\n  };\r\n\r\n  back = () => {\r\n    this.props.history.push(OTO2);\r\n  };\r\n\r\n  togglePreview = () => {\r\n    const { preview } = this.state;\r\n    this.setState({ preview: !preview });\r\n  };\r\n\r\n  render() {\r\n    const { preview } = this.state;\r\n    return (\r\n      <ToolLayout>\r\n        {preview ? <Preview {...this.state} onClose={this.togglePreview} /> : null}\r\n        <div className=\"row\">\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">{this.renderMain()}</div>\r\n              <div className=\"col-md-6 mt-2\">{this.renderRight()}</div>\r\n              <ButtonsGroup backUrl={this.back} preview={this.togglePreview} save={this.onClickSave} />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <SideBar layout={this.state.toolData.layout} activeTab={this.state.activeTab} onChangeActive={this.onChangeActive} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}