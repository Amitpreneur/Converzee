{"ast":null,"code":"var _jsxFileName = \"/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/Campaigns.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport \"./Campaigns.css\";\nimport RequestHandler from \"../../actions/RequestHandler\";\nimport { GET_CAMPAIGNS, CLONE_TOOL, ARCHIVE_TOOL, PURGE_TOOL, getPath, DOWNLOAD_DATA } from \"../../actions/URLs\";\nimport ToolUtil, { exportCSVFile } from \"../../utils/ToolUtil\";\nimport { EMAIL_SEND } from \"../../utils/Routes\";\nimport { Filter } from \"../comman/Filter\";\nimport { CampignItem } from \"../layout/ToolLayout\";\nimport { Link } from \"react-router-dom\";\nimport { createElement as _createElement } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Campaigns extends Component {\n  constructor() {\n    var _this;\n\n    super(...arguments);\n    _this = this;\n    this.toolId = 0;\n    this.url = null;\n    this.state = {\n      items: [],\n      emails: [],\n      isRedirect: false,\n      isopenFilter: false,\n      searchStr: \"\"\n    };\n\n    this.getCampaigns = function () {\n      let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      RequestHandler.PostRequest(GET_CAMPAIGNS, {\n        searchData: data\n      }, (res, err) => {\n        if (res) {\n          const items = res.data.campaigns;\n\n          _this.setState({\n            items\n          });\n        }\n      });\n    };\n\n    this.cloneRequest = id => {\n      RequestHandler.PostRequest(CLONE_TOOL + id, {}, (res, err) => {\n        if (res) {\n          window.gs.toast(\"Clone Success\", {\n            position: \"bottom-right\",\n            type: window.gs.toast.TYPE.SUCCESS\n          });\n          this.getCampaigns();\n        }\n      });\n    };\n\n    this.archiveRequest = id => {\n      RequestHandler.PostRequest(ARCHIVE_TOOL + id, {}, (res, err) => {\n        if (res) {\n          window.gs.toast(\"Successfully\", {\n            position: \"bottom-right\",\n            type: window.gs.toast.TYPE.SUCCESS\n          });\n          this.getCampaigns();\n        }\n      });\n    };\n\n    this.purgeTool = id => {\n      RequestHandler.PostRequest(PURGE_TOOL + id, {}, (res, err) => {\n        if (res) {\n          window.gs.toast(\"Archive Success\", {\n            position: \"bottom-right\",\n            type: window.gs.toast.TYPE.SUCCESS\n          });\n          this.getCampaigns();\n        }\n      });\n    };\n\n    this.downloadData = id => {\n      RequestHandler.PostRequest(DOWNLOAD_DATA + id, {}, (res, err) => {\n        if (res) {\n          const {\n            data\n          } = res.data;\n\n          if (data) {\n            exportCSVFile(data, \"converzee\");\n          }\n        }\n      });\n    };\n\n    this.onClickAction = (id, toolId, action) => {\n      if (action == \"CLONE\") {\n        if (!ToolUtil.isUpgrade1 && !window.isAdvancedOpt) {\n          window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\n          return;\n        }\n      }\n\n      this.getToolurl(toolId, id);\n\n      switch (action) {\n        case \"EDIT\":\n          this.setState({\n            isRedirect: true\n          });\n          break;\n\n        case \"CLONE\":\n          this.cloneRequest(id);\n          break;\n\n        case \"ARCHIVE\":\n          this.purgeTool(id);\n          break;\n\n        case \"STATUS\":\n          this.archiveRequest(id);\n          break;\n\n        case \"SEND\":\n          this.setState({\n            isRedirect: true\n          });\n          break;\n\n        default:\n          this.setState({\n            isRedirect: true\n          });\n          break;\n      }\n    };\n\n    this.renderListItems = (item, i) => {\n      const items = { ...item,\n        onClickAction: this.onClickAction,\n        archiveRequest: this.archiveRequest,\n        downloadData: this.downloadData,\n        isLock: ToolUtil.isUpgrade1 && window.isAdvancedOpt ? false : true\n      };\n      return /*#__PURE__*/_createElement(CampignItem, { ...items,\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 12\n        }\n      });\n    };\n\n    this.openFilterClick = () => {\n      if (!ToolUtil.isUpgrade1 || !window.isAdvancedOpt) {\n        window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\n        return;\n      }\n\n      this.setState({\n        isopenFilter: true\n      });\n    };\n\n    this.onFilterClose = () => {\n      this.setState({\n        isopenFilter: false\n      });\n    };\n\n    this.onFilterChange = filters => {\n      if (!ToolUtil.isUpgrade1 || !window.isAdvancedOpt) {\n        window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\n        return;\n      }\n\n      const {\n        searchStr\n      } = this.state;\n      if (searchStr !== \"\") filters[\"searchStr\"] = searchStr;\n      this.getCampaigns(filters);\n    };\n\n    this.onSearchClick = () => {\n      const {\n        searchStr\n      } = this.state;\n      this.getCampaigns({\n        searchStr\n      });\n    };\n\n    this.onSearchChange = e => {\n      this.setState({\n        searchStr: e.target.value\n      });\n    };\n\n    this.onSortingChange = istrue => {\n      this.setState({\n        sorting: istrue ? 1 : 0\n      });\n    };\n\n    this.PressEnter = e => {\n      if (e.keyCode === 13) this.onSearchClick();\n    };\n\n    this.resetSearch = () => {\n      this.setState({\n        searchStr: \"\"\n      }, () => this.onSearchClick());\n    };\n  }\n\n  componentDidMount() {\n    window.gs.navTitle(\"Campaigns\");\n    this.getCampaigns();\n  }\n\n  componentDidUpdate() {\n    let sidebar = document.querySelectorAll(\".sidebar_content\");\n    sidebar.forEach(sd => {\n      if (sd.getAttribute(\"title\") === \"Campaigns\") {\n        if (!sd.classList.contains(\"nav-active\")) {\n          sd.classList.add(\"nav-active\");\n        }\n      } else {\n        sd.classList.remove(\"nav-active\");\n      }\n    });\n  }\n\n  getToolurl(toolId, id) {\n    if (toolId) this.url = ToolUtil.getToolData(toolId).url + \"/\" + id || null;else this.url = EMAIL_SEND + \"/\" + id || null;\n  }\n\n  render() {\n    const {\n      items,\n      isRedirect,\n      isopenFilter,\n      searchStr\n    } = this.state;\n    const url = this.url;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      name: \"Campaigns\",\n      children: [/*#__PURE__*/_jsxDEV(Filter, {\n        visible: isopenFilter,\n        onChangeFilter: this.onFilterChange,\n        onClose: this.onFilterClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-3 col-sm-2 d-none d-sm-block\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-5 col-sm-8 camp_filterItem1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pull-right input-group mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control search-field\",\n              onKeyUp: this.PressEnter,\n              value: searchStr,\n              onChange: this.onSearchChange,\n              placeholder: \"Search By Campaign Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-append\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"input-group-text search-icon\",\n                onClick: this.onSearchClick,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-search\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4 col-sm-2 camp_filterItem2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pull-right\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-sm filter-btn\",\n              onClick: this.openFilterClick,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"d-block d-sm-none\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-filter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"d-none d-sm-block\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-filter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this), \"Filter\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), !items.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cz_empty_box\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"No campaigns available right now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You have not created any campaigns so far. Click on the button below to create a campaign.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          className: \"cz_btn cz_orange_btn\",\n          to: \"/Create\",\n          children: \"Create Campaign\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this) : null, isRedirect && url ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: url\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 30\n      }, this) : null, items.map(this.renderListItems)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/Campaigns.js"],"names":["React","Component","Redirect","RequestHandler","GET_CAMPAIGNS","CLONE_TOOL","ARCHIVE_TOOL","PURGE_TOOL","getPath","DOWNLOAD_DATA","ToolUtil","exportCSVFile","EMAIL_SEND","Filter","CampignItem","Link","Campaigns","toolId","url","state","items","emails","isRedirect","isopenFilter","searchStr","getCampaigns","data","PostRequest","searchData","res","err","campaigns","setState","cloneRequest","id","window","gs","toast","position","type","TYPE","SUCCESS","archiveRequest","purgeTool","downloadData","onClickAction","action","isUpgrade1","isAdvancedOpt","sayUpdate","linksList","oto2","getToolurl","renderListItems","item","i","isLock","openFilterClick","onFilterClose","onFilterChange","filters","onSearchClick","onSearchChange","e","target","value","onSortingChange","istrue","sorting","PressEnter","keyCode","resetSearch","componentDidMount","navTitle","componentDidUpdate","sidebar","document","querySelectorAll","forEach","sd","getAttribute","classList","contains","add","remove","getToolData","render","length","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport \"./Campaigns.css\";\r\nimport RequestHandler from \"../../actions/RequestHandler\";\r\nimport { GET_CAMPAIGNS, CLONE_TOOL, ARCHIVE_TOOL, PURGE_TOOL, getPath, DOWNLOAD_DATA } from \"../../actions/URLs\";\r\nimport ToolUtil, { exportCSVFile } from \"../../utils/ToolUtil\";\r\nimport { EMAIL_SEND } from \"../../utils/Routes\";\r\nimport { Filter } from \"../comman/Filter\";\r\nimport { CampignItem } from \"../layout/ToolLayout\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default class Campaigns extends Component {\r\n  toolId = 0;\r\n  url = null;\r\n  state = {\r\n    items: [],\r\n    emails: [],\r\n    isRedirect: false,\r\n    isopenFilter: false,\r\n    searchStr: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.gs.navTitle(\"Campaigns\");\r\n    this.getCampaigns(); \r\n  }\r\n  componentDidUpdate() {\r\n    let sidebar = document.querySelectorAll(\".sidebar_content\");\r\n    sidebar.forEach(sd => {\r\n      if(sd.getAttribute(\"title\") === \"Campaigns\") {\r\n        if(!sd.classList.contains(\"nav-active\")) {\r\n          sd.classList.add(\"nav-active\");\r\n        }\r\n      } else {\r\n        sd.classList.remove(\"nav-active\");\r\n      }\r\n    });\r\n  }\r\n  getCampaigns = (data = {}) => {\r\n    RequestHandler.PostRequest(GET_CAMPAIGNS, { searchData: data }, (res, err) => {\r\n      if (res) {\r\n        const items = res.data.campaigns;\r\n        this.setState({ items });\r\n      }\r\n    });\r\n  };\r\n\r\n  getToolurl(toolId, id) {\r\n    if (toolId) this.url = ToolUtil.getToolData(toolId).url + \"/\" + id || null;\r\n    else this.url = EMAIL_SEND + \"/\" + id || null;\r\n  }\r\n\r\n  cloneRequest = (id) => {\r\n    RequestHandler.PostRequest(CLONE_TOOL + id, {}, (res, err) => {\r\n      if (res) {\r\n        window.gs.toast(\"Clone Success\", { position: \"bottom-right\", type: window.gs.toast.TYPE.SUCCESS });\r\n        this.getCampaigns();\r\n      }\r\n    });\r\n  };\r\n\r\n  archiveRequest = (id) => {\r\n    RequestHandler.PostRequest(ARCHIVE_TOOL + id, {}, (res, err) => {\r\n      if (res) {\r\n        window.gs.toast(\"Successfully\", { position: \"bottom-right\", type: window.gs.toast.TYPE.SUCCESS });\r\n        this.getCampaigns();\r\n      }\r\n    });\r\n  };\r\n\r\n  purgeTool = (id) => {\r\n    RequestHandler.PostRequest(PURGE_TOOL + id, {}, (res, err) => {\r\n      if (res) {\r\n        window.gs.toast(\"Archive Success\", { position: \"bottom-right\", type: window.gs.toast.TYPE.SUCCESS });\r\n        this.getCampaigns();\r\n      }\r\n    });\r\n  };\r\n\r\n  downloadData = (id) => {\r\n    RequestHandler.PostRequest(DOWNLOAD_DATA + id, {}, (res, err) => {\r\n      if (res) {\r\n        const { data } = res.data;\r\n        if (data) {\r\n          exportCSVFile(data, \"converzee\");\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  onClickAction = (id, toolId, action) => {\r\n    if (action == \"CLONE\") {\r\n      if (!ToolUtil.isUpgrade1 && !window.isAdvancedOpt) {\r\n        window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\r\n        return;\r\n      }\r\n    }\r\n    this.getToolurl(toolId, id);\r\n    switch (action) {\r\n      case \"EDIT\":\r\n        this.setState({ isRedirect: true });\r\n        break;\r\n      case \"CLONE\":\r\n        this.cloneRequest(id);\r\n        break;\r\n      case \"ARCHIVE\":\r\n        this.purgeTool(id);\r\n        break;\r\n      case \"STATUS\":\r\n        this.archiveRequest(id);\r\n        break;\r\n      case \"SEND\":\r\n        this.setState({ isRedirect: true });\r\n        break;\r\n      default:\r\n        this.setState({ isRedirect: true });\r\n        break;\r\n    }\r\n  };\r\n\r\n  renderListItems = (item, i) => {\r\n    const items = {\r\n      ...item,\r\n      onClickAction: this.onClickAction,\r\n      archiveRequest: this.archiveRequest,\r\n      downloadData: this.downloadData,\r\n      isLock: (ToolUtil.isUpgrade1 && window.isAdvancedOpt) ? false : true,\r\n    };\r\n    return <CampignItem {...items} key={i} />;\r\n  };\r\n\r\n  openFilterClick = () => {\r\n    if (!ToolUtil.isUpgrade1 || !window.isAdvancedOpt) {\r\n      window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\r\n      return;\r\n    }\r\n    this.setState({ isopenFilter: true });\r\n  };\r\n\r\n  onFilterClose = () => {\r\n    this.setState({ isopenFilter: false });\r\n  };\r\n\r\n  onFilterChange = (filters) => {\r\n    if (!ToolUtil.isUpgrade1 || !window.isAdvancedOpt) {\r\n      window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\r\n      return;\r\n    }\r\n    const { searchStr } = this.state;\r\n    if (searchStr !== \"\") filters[\"searchStr\"] = searchStr;\r\n    this.getCampaigns(filters);\r\n  };\r\n\r\n  onSearchClick = () => {\r\n    const { searchStr } = this.state;\r\n    this.getCampaigns({ searchStr });\r\n  };\r\n\r\n  onSearchChange = (e) => {\r\n    this.setState({ searchStr: e.target.value });\r\n  };\r\n\r\n  onSortingChange = (istrue) => {\r\n    this.setState({ sorting: istrue ? 1 : 0 });\r\n  };\r\n\r\n  PressEnter = (e) => {\r\n    if (e.keyCode === 13) this.onSearchClick();\r\n  };\r\n\r\n  resetSearch = () => {\r\n    this.setState({ searchStr: \"\" }, () => this.onSearchClick());\r\n  };\r\n\r\n  render() {\r\n    const { items, isRedirect, isopenFilter, searchStr } = this.state;\r\n    const url = this.url;\r\n    return (\r\n      <div className=\"container\" name=\"Campaigns\">\r\n        <Filter visible={isopenFilter} onChangeFilter={this.onFilterChange} onClose={this.onFilterClose} />\r\n        \r\n        <div className=\"row\">\r\n          <div className=\"col-md-3 col-sm-2 d-none d-sm-block\"></div>\r\n          <div className=\"col-md-5 col-sm-8 camp_filterItem1\">\r\n            <div className=\"pull-right input-group mb-3\">\r\n              <input type=\"text\" className=\"form-control search-field\" onKeyUp={this.PressEnter} value={searchStr} onChange={this.onSearchChange} placeholder=\"Search By Campaign Name\" />\r\n              <div className=\"input-group-append\">\r\n                <span className=\"input-group-text search-icon\" onClick={this.onSearchClick}>\r\n                  <i className=\"fa fa-search\"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-4 col-sm-2 camp_filterItem2\">\r\n            <div className=\"pull-right\">\r\n              <button className=\"btn btn-sm filter-btn\" onClick={this.openFilterClick}>\r\n                <span className=\"d-block d-sm-none\">\r\n                  <i className=\"fa fa-filter\"></i>\r\n                </span>\r\n                <span className=\"d-none d-sm-block\">\r\n                  <i className=\"fa fa-filter\"></i>Filter\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>  \r\n        { !items.length ? \r\n        <div className=\"cz_empty_box\">\r\n          <h2>No campaigns available right now</h2>\r\n          <p>You have not created any campaigns so far. Click on the button below to create a campaign.</p>\r\n          <Link className=\"cz_btn cz_orange_btn\" to=\"/Create\">Create Campaign</Link>\r\n        </div> : null}\r\n        {isRedirect && url ? <Redirect to={url} /> : null}\r\n        {items.map(this.renderListItems)}\r\n      </div> \r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}