{"ast":null,"code":"import React,{Component}from\"react\";import\"./index.css\";import CreateSideBar from\"./CreateSideBar\";import CreateText from\"./CreateText\";import Code from\"./Code\";import Style from\"./Style\";import Layout from\"./Layout\";import Timer from\"./Timer\";import CTA from\"./CTA\";import RequestHandler from\"../../../../actions/RequestHandler\";import{SAVE_TOOL,GET_ONE_TOOL,getPath}from\"../../../../actions/URLs\";import ToolUtil from\"../../../../utils/ToolUtil\";import Util from\"../../../Util\";import Preview from\"./Preview\";import{HELLOBARModal,HELLOBARModalResponse}from\"../../../utils/Modal\";import{Modal}from\"antd\";import{ButtonsGroup,ToolLayout}from\"../../../layout/ToolLayout\";import{ReponsiveImage}from\"../../../comman/PreviewAble\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const helloBarr={toolName:\"\",activeTab:4,create:{campaignName:Util.CAMPAIGNS_NAME,helloBarPos:\"top\",textBody:\"<span style=\\\"font-size: 12pt;\\\">Copy coupon code to get <br>$5 instant discount</span>\",cpCode:\"CODE\",codeText:\"\"},cta:{ctaText:\"<span style=\\\"font-size: 12pt;\\\">GET ACCESS NOW!</span>\",ctaAction:\"redirect\",redirectUrl:\"\"},timer:{timerType:\"\",endDateTime:new Date(),timeZone:Util.getTimeZoneList()[0].value,whenTimeExp:\"\"},layout:0,STYLE:{elements:[{name:\"highlight\",text:\"Hello bar\",color:\"#420068\"},{name:\"highlightCTA\",text:\"CTA Background\",color:\"#ffcc00\"}],selected:0},CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:\"\"}]},file:{file:[]},toolId:0,status:true,openPopUp:false,popUpScript:\"\",preview:false,_id:null// templateType: null\n};export default class HelloBar extends Component{constructor(){super(...arguments);this.toolId=0;this.state=helloBarr;this.templates=[\"asset/hbt4.PNG\",\"asset/hbt2.PNG\",\"asset/hbt1.PNG\"];this.loaded=false;this.onChangeActive=tabIndex=>{const{activeTab,layout}=this.state;// if (tabIndex === 2 && layout === 1) return;\nif(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.onUpdate=(index,data)=>{switch(index){case 1:this.setState({create:data});break;case 2:this.setState({cta:data});break;case 3:this.setState({timer:data});break;case 4:this.changeHelloBarSetting(data);// this.setState({ layout: data });\nbreak;case 5:this.setState({STYLE:data});break;case 6:this.setState({CODE:data});break;case 7:this.setState({file:data});break;default:break;}};this.changeHelloBarSetting=data=>{if(this.state._id){if(data===this.editedData.layout){this.setState({...this.editedData,layout:data});}else{this.changeLayoutProperties(data);}}else{this.changeLayoutProperties(data);}};this.changeLayoutProperties=data=>{if(data===2){helloBarr.create.textBody=\"<span style=\\\"font-size: 12pt;\\\">This is a Demo Hellobar Text <br> Grab it Now!</span>\";helloBarr.cta.ctaText=\"<span style=\\\"font-size: 12pt;\\\">GET ACCESS NOW!</span>\";helloBarr.STYLE.elements[0].color=\"#6635dc\";helloBarr.STYLE.elements[1].color=\"#ffffff\";this.setState({...this.state,STYLE:helloBarr.STYLE,create:{...this.state.create,textBody:helloBarr.create.textBody},layout:data});}else if(data===1){helloBarr.create.textBody=\"<span style=\\\"font-size: 12pt;\\\">This is a Demo Hellobar Text</span>\";helloBarr.cta.ctaText=\"<span style=\\\"font-size: 12pt;\\\">BUY NOW!</span>\";helloBarr.STYLE.elements[0].color=\"#dc3545\";helloBarr.STYLE.elements[1].color=\"#012f0f\";this.setState({...this.state,STYLE:helloBarr.STYLE,create:{...this.state.create,textBody:helloBarr.create.textBody},layout:data});}else{helloBarr.create.textBody=\"<span style=\\\"font-size: 12pt;\\\">Copy coupon code to get <br>$5 instant discount</span>\";helloBarr.cta.ctaText=\"<span style=\\\"font-size: 12pt;\\\">GET ACCESS NOW!</span>\";helloBarr.STYLE.elements[0].color=\"#420068\";helloBarr.STYLE.elements[1].color=\"#ffcc00\";this.setState({...this.state,STYLE:helloBarr.STYLE,create:{...this.state.create,textBody:helloBarr.create.textBody},layout:data});}};this.renderMain=()=>{const{activeTab,create,cta,timer,layout,STYLE,CODE,file}=this.state;let component=null;if(!this.loaded)return null;switch(activeTab){case 1:component=/*#__PURE__*/_jsx(CreateText,{layout:layout,...create,cases:1,onChange:this.onUpdate});break;case 2:component=/*#__PURE__*/_jsx(CTA,{...cta,cases:2,onChange:this.onUpdate});break;case 3:component=/*#__PURE__*/_jsx(Timer,{...timer,cases:3,onChange:this.onUpdate});break;case 4:component=/*#__PURE__*/_jsx(Layout,{layout:layout,cases:4,onChange:this.onUpdate});break;case 5:component=/*#__PURE__*/_jsx(Style,{layout:layout,...STYLE,cases:5,onChange:this.onUpdate});break;case 6:component=/*#__PURE__*/_jsx(Code,{...CODE,cases:6,onChange:this.onUpdate});break;default:component=/*#__PURE__*/_jsx(CreateText,{...create,onChange:this.onUpdate});break;}return component;};this.onClickSave=()=>{const toolData=this.state;if(this.state.CODE.include[0].url!==\"\"){if(!Util.isArrayEqual(helloBarr,this.state,3)){RequestHandler.PostRequest(SAVE_TOOL,{toolData:HELLOBARModal(toolData)},(res,err)=>{if(res){if(res.data.success){Modal.success({content:\"Campaign Save SuccessFully\"});setTimeout(()=>{this.props.history.push(\"/Campaigns\");},1000);}else{window.gs.toast(res.data.message,{position:\"bottom-right\",type:window.gs.toast.TYPE.FAILED});}}else{console.log(err);}});}}else{Modal.warning({content:\"Should Contain atleast one trigger point\"});}};this.renderRight=()=>{const{layout}=this.state;if(layout===0)return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/hb1.png\"});if(layout===1)return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/hb2.png\"});return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/hb3.png\"});};this.back=()=>{this.props.history.push(\"/Create\");};}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{this.loaded=true;if(res){Util.isRedirected=true;const data=HELLOBARModalResponse(res);if(data){this.editedData=data;this.setState(data,()=>{window.gs.navTitle(ToolUtil.getTool(data.toolId)+\"(\"+data.name+\")\");});}}});}else{const toolId=3;this.loaded=true;this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId)+\"(\"+Util.CAMPAIGNS_NAME+\")\");}}render(){const itemId=this.props.location.state;const{preview}=this.state;return/*#__PURE__*/_jsx(ToolLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[preview?/*#__PURE__*/_jsx(Preview,{...this.state}):null,/*#__PURE__*/_jsx(\"div\",{className:\"col-10 toolItem\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:this.renderMain()}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mt-2\",children:this.renderRight()}),/*#__PURE__*/_jsx(ButtonsGroup,{preview:()=>{this.setState({preview:!preview});},backUrl:this.back,save:this.onClickSave})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 sideBarButtomPanel\",children:/*#__PURE__*/_jsx(CreateSideBar,{activeTab:this.state.activeTab,onChangeActive:this.onChangeActive,...itemId})})]})});}}HelloBar.CAMPAIGNS_NAME=\"\";","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/tools/HelloBar/index.js"],"names":["React","Component","CreateSideBar","CreateText","Code","Style","Layout","Timer","CTA","RequestHandler","SAVE_TOOL","GET_ONE_TOOL","getPath","ToolUtil","Util","Preview","HELLOBARModal","HELLOBARModalResponse","Modal","ButtonsGroup","ToolLayout","ReponsiveImage","helloBarr","toolName","activeTab","create","campaignName","CAMPAIGNS_NAME","helloBarPos","textBody","cpCode","codeText","cta","ctaText","ctaAction","redirectUrl","timer","timerType","endDateTime","Date","timeZone","getTimeZoneList","value","whenTimeExp","layout","STYLE","elements","name","text","color","selected","CODE","include","type","url","exclude","file","toolId","status","openPopUp","popUpScript","preview","_id","HelloBar","state","templates","loaded","onChangeActive","tabIndex","setState","onUpdate","index","data","changeHelloBarSetting","editedData","changeLayoutProperties","renderMain","component","onClickSave","toolData","isArrayEqual","PostRequest","res","err","success","content","setTimeout","props","history","push","window","gs","toast","message","position","TYPE","FAILED","console","log","warning","renderRight","back","componentDidMount","id","match","params","isRedirected","navTitle","getTool","RedirectWhenCampaignEmpty","render","itemId","location"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./index.css\";\r\nimport CreateSideBar from \"./CreateSideBar\";\r\nimport CreateText from \"./CreateText\";\r\nimport Code from \"./Code\";\r\nimport Style from \"./Style\";\r\nimport Layout from \"./Layout\";\r\nimport Timer from \"./Timer\";\r\nimport CTA from \"./CTA\";\r\nimport RequestHandler from \"../../../../actions/RequestHandler\";\r\nimport { SAVE_TOOL, GET_ONE_TOOL, getPath } from \"../../../../actions/URLs\";\r\nimport ToolUtil from \"../../../../utils/ToolUtil\";\r\nimport Util from \"../../../Util\";\r\nimport Preview from \"./Preview\";\r\nimport { HELLOBARModal, HELLOBARModalResponse } from \"../../../utils/Modal\";\r\nimport { Modal } from \"antd\";\r\nimport { ButtonsGroup, ToolLayout } from \"../../../layout/ToolLayout\";\r\nimport { ReponsiveImage } from \"../../../comman/PreviewAble\";\r\n\r\nconst helloBarr = {\r\n  toolName: \"\",\r\n  activeTab: 4,\r\n  create: { campaignName: Util.CAMPAIGNS_NAME, helloBarPos: \"top\", textBody: \"<span style=\\\"font-size: 12pt;\\\">Copy coupon code to get <br>$5 instant discount</span>\", cpCode: \"CODE\", codeText: \"\" },\r\n  cta: { ctaText: \"<span style=\\\"font-size: 12pt;\\\">GET ACCESS NOW!</span>\", ctaAction: \"redirect\", redirectUrl: \"\" },\r\n  timer: { timerType: \"\", endDateTime: new Date(), timeZone: Util.getTimeZoneList()[0].value, whenTimeExp: \"\" },\r\n  layout: 0,\r\n  STYLE: {\r\n    elements: [\r\n      { name: \"highlight\", text: \"Hello bar\", color: \"#420068\" },\r\n      { name: \"highlightCTA\", text: \"CTA Background\", color: \"#ffcc00\" },\r\n    ],\r\n    selected: 0,\r\n  },\r\n  CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: \"\" }] },\r\n  file: { file: [] },\r\n  toolId: 0,\r\n  status: true,\r\n  openPopUp: false,\r\n  popUpScript: \"\",\r\n  preview: false,\r\n  _id: null,\r\n  // templateType: null\r\n};\r\nexport default class HelloBar extends Component {\r\n  static CAMPAIGNS_NAME = \"\";\r\n  toolId = 0;\r\n  state = helloBarr;\r\n  templates = [\"asset/hbt4.PNG\", \"asset/hbt2.PNG\", \"asset/hbt1.PNG\"];\r\n  loaded = false;\r\n  editedData ;\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        this.loaded = true;\r\n        if (res) {\r\n          Util.isRedirected = true;\r\n          const data = HELLOBARModalResponse(res);\r\n          if (data) {\r\n            this.editedData = data;\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      const toolId = 3;\r\n      this.loaded = true;\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n    }\r\n  }\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab, layout } = this.state;\r\n    // if (tabIndex === 2 && layout === 1) return;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n  onUpdate = (index, data) => {\r\n    switch (index) {\r\n      case 1:\r\n        this.setState({ create: data });\r\n        break;\r\n      case 2:\r\n        this.setState({ cta: data });\r\n        break;\r\n      case 3:\r\n        this.setState({ timer: data });\r\n        break;\r\n      case 4:\r\n        this.changeHelloBarSetting(data);\r\n        // this.setState({ layout: data });\r\n        break;\r\n      case 5:\r\n        this.setState({ STYLE: data });\r\n        break;\r\n      case 6:\r\n        this.setState({ CODE: data });\r\n        break;\r\n      case 7:\r\n        this.setState({ file: data });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  changeHelloBarSetting = (data) => {\r\n    if(this.state._id) {\r\n      if(data === this.editedData.layout) {\r\n        this.setState({\r\n          ...this.editedData,\r\n          layout: data\r\n        });\r\n      } else {\r\n        this.changeLayoutProperties(data);\r\n      }\r\n    } else {\r\n      this.changeLayoutProperties(data);\r\n    }    \r\n  }\r\n  \r\n  changeLayoutProperties = (data) => {\r\n    if(data === 2 ) {\r\n      helloBarr.create.textBody = \"<span style=\\\"font-size: 12pt;\\\">This is a Demo Hellobar Text <br> Grab it Now!</span>\";\r\n      helloBarr.cta.ctaText = \"<span style=\\\"font-size: 12pt;\\\">GET ACCESS NOW!</span>\";\r\n      helloBarr.STYLE.elements[0].color = \"#6635dc\";\r\n      helloBarr.STYLE.elements[1].color = \"#ffffff\";\r\n      this.setState({\r\n        ...this.state,\r\n        STYLE : helloBarr.STYLE,\r\n        create : {\r\n          ...this.state.create,\r\n          textBody : helloBarr.create.textBody\r\n        },\r\n        layout: data\r\n      });\r\n    } else if(data === 1) {\r\n      helloBarr.create.textBody = \"<span style=\\\"font-size: 12pt;\\\">This is a Demo Hellobar Text</span>\";\r\n      helloBarr.cta.ctaText = \"<span style=\\\"font-size: 12pt;\\\">BUY NOW!</span>\";\r\n      helloBarr.STYLE.elements[0].color = \"#dc3545\";\r\n      helloBarr.STYLE.elements[1].color = \"#012f0f\";\r\n      this.setState({\r\n        ...this.state,\r\n        STYLE : helloBarr.STYLE,\r\n        create : {\r\n          ...this.state.create,\r\n          textBody : helloBarr.create.textBody\r\n        },\r\n        layout: data\r\n      });\r\n    } else {\r\n      helloBarr.create.textBody = \"<span style=\\\"font-size: 12pt;\\\">Copy coupon code to get <br>$5 instant discount</span>\";\r\n      helloBarr.cta.ctaText = \"<span style=\\\"font-size: 12pt;\\\">GET ACCESS NOW!</span>\";\r\n      helloBarr.STYLE.elements[0].color = \"#420068\";\r\n      helloBarr.STYLE.elements[1].color = \"#ffcc00\";\r\n      this.setState({\r\n        ...this.state,\r\n        STYLE : helloBarr.STYLE,\r\n        create : {\r\n          ...this.state.create,\r\n          textBody : helloBarr.create.textBody\r\n        },\r\n        layout: data\r\n      });\r\n    }\r\n  }\r\n\r\n  renderMain = () => {\r\n    const { activeTab, create, cta, timer, layout, STYLE, CODE, file } = this.state;\r\n    let component = null;\r\n    if (!this.loaded) return null;\r\n    switch (activeTab) {\r\n      case 1:\r\n        component = <CreateText layout={layout} {...create} cases={1} onChange={this.onUpdate} />;\r\n        break;\r\n      case 2:\r\n        component = <CTA {...cta} cases={2} onChange={this.onUpdate} />;\r\n        break;\r\n      case 3:\r\n        component = <Timer {...timer} cases={3} onChange={this.onUpdate} />;\r\n        break;\r\n      case 4:\r\n        component = <Layout layout={layout} cases={4} onChange={this.onUpdate} />;\r\n        break;\r\n      case 5:\r\n        component = <Style layout={layout} {...STYLE} cases={5} onChange={this.onUpdate} />;\r\n        break;\r\n      case 6:\r\n        component = <Code {...CODE} cases={6} onChange={this.onUpdate} />;\r\n        break;\r\n      default:\r\n        component = <CreateText {...create} onChange={this.onUpdate} />;\r\n        break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    const toolData = this.state;\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      if (!Util.isArrayEqual(helloBarr, this.state, 3)) {\r\n        RequestHandler.PostRequest(SAVE_TOOL, { toolData: HELLOBARModal(toolData) }, (res, err) => {\r\n          if (res) {\r\n            if (res.data.success) {\r\n              Modal.success({\r\n                content: \"Campaign Save SuccessFully\",\r\n              });\r\n              setTimeout(() => {\r\n                this.props.history.push(\"/Campaigns\");\r\n              }, 1000);\r\n            } else {\r\n              window.gs.toast(res.data.message, { position: \"bottom-right\", type: window.gs.toast.TYPE.FAILED });\r\n            }\r\n          } else {\r\n            console.log(err);\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  renderRight = () => {\r\n    const { layout } = this.state;\r\n    if (layout === 0) return <ReponsiveImage isAs={true} url={\"asset/hb1.png\"} />;\r\n    if (layout === 1) return <ReponsiveImage isAs={true} url={\"asset/hb2.png\"} />;\r\n    return <ReponsiveImage isAs={true} url={\"asset/hb3.png\"} />;\r\n  };\r\n\r\n  back = () => {\r\n    this.props.history.push(\"/Create\");\r\n  };\r\n\r\n  render() {\r\n    const itemId = this.props.location.state;\r\n    const { preview } = this.state;\r\n\r\n    return (\r\n      <ToolLayout>\r\n        <div className=\"row\">\r\n          {preview ? <Preview {...this.state} /> : null}\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">{this.renderMain()}</div>\r\n              <div className=\"col-md-6 mt-2\">{this.renderRight()}</div>\r\n              <ButtonsGroup\r\n                preview={() => {\r\n                  this.setState({ preview: !preview });\r\n                }}\r\n                backUrl={this.back}\r\n                save={this.onClickSave}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <CreateSideBar activeTab={this.state.activeTab} onChangeActive={this.onChangeActive} {...itemId} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}