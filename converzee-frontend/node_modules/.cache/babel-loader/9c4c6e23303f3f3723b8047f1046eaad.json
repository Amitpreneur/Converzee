{"ast":null,"code":"import React,{Component}from\"react\";import\"../../Create.css\";import Code from\"../../../subpages/create/Code\";import RequestHandler from\"../../../../actions/RequestHandler\";import{GET_ONE_TOOL,SAVE_TOOL,getPath}from\"../../../../actions/URLs\";import Text from\"./Text\";import SideBar from\"./SideBar\";import ToolUtil from\"../../../../utils/ToolUtil\";import Style from\"./Style\";import Media from\"./Media\";import CTA from\"./CTA\";import NoThanks from\"./NoThanks\";import Util from\"../../../Util\";import Preview from\"./Preview\";import{ExitIntentModal,ExitIntentModalResponse}from\"../../../utils/Modal\";import{ToolLayout,ButtonsGroup}from\"../../../layout/ToolLayout\";import{Modal}from\"antd\";import{ReponsiveImage}from\"../../../comman/PreviewAble\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const exitInt={activeTab:1,headline:\"Lorem ipsum sit amet!\",subheadline:\"Eiusmod tempor nibh veniam incididunt\",isInput:false,mediaType:\"IMAGE\",url:\"\",ctaText:\"GET STARTED NOW\",ctaAction:\"#\",redirectUrl:\"\",noThanksText:\"No Thanks\",STYLE:{elements:[{name:\"popupBackgoundColor\",text:\"Popup Background Color\",color:\"\"},{name:\"ctaBackgound\",text:\"CTA Background\",color:\"\"}],height:50,width:50,selected:0,isbackGroundImage:false,backgroundImage:\"\"},CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:\"\"}]}};export default class ExitIntent extends Component{constructor(){super(...arguments);this.state=exitInt;this.loaded=false;this.onChangeActive=tabIndex=>{const{activeTab}=this.state;if(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.onUpdate=(index,data)=>{switch(index){case 1:this.setState({TEXT:data});break;case 2:this.setState({template:data});break;case 3:this.setState({media:data});break;case 4:this.setState({cta:data});break;case 5:this.setState({noThanks:data});break;case 6:this.setState({STYLE:data});break;case 7:this.setState({CODE:data});break;default:break;}};this.updateChange=value=>{this.setState(value);};this.renderMain=()=>{const{activeTab,headline,subheadline,noThanksText,template,mediaType,url,ctaAction,ctaText,redirectUrl,noThanks,STYLE,CODE,isInput}=this.state;let component=null;if(!this.loaded)return null;switch(activeTab){case 1:component=/*#__PURE__*/_jsx(Text,{headline:headline,subheadline:subheadline,onChange:this.updateChange});break;// case 2:\n//   component = <Layout layout={template} case={2} onChange={this.onUpdate} />;\n//   break;\ncase 3:component=/*#__PURE__*/_jsx(Media,{isInput:isInput,mediaType:mediaType,url:url,onChange:this.updateChange});break;case 4:component=/*#__PURE__*/_jsx(CTA,{ctaAction:ctaAction,ctaText:ctaText,redirectUrl:redirectUrl,onChange:this.updateChange});break;case 5:component=/*#__PURE__*/_jsx(NoThanks,{noThanksText:noThanksText,onChange:this.updateChange});break;case 6:component=/*#__PURE__*/_jsx(Style,{...STYLE,case:6,onChange:this.onUpdate});break;case 7:component=/*#__PURE__*/_jsx(Code,{...CODE,case:7,onChange:this.onUpdate});break;default:component=/*#__PURE__*/_jsx(Text,{headline:headline,subheadline:subheadline,onChange:this.updateChange});break;}return component;};this.onClickSave=()=>{const toolData=this.state;if(this.state.CODE.include[0].url!==\"\"){if(!Util.isArrayEqual(exitInt,this.state,3)){if(!toolData.url){toolData.url=\"box.png\";}RequestHandler.PostRequest(SAVE_TOOL,{toolData:ExitIntentModal(toolData)},(res,err)=>{if(res){if(res.data.success){Modal.success({content:\"Campaign Save SuccessFully\"});setTimeout(()=>{this.props.history.push(\"/Campaigns\");},1000);}else{window.gs.toast(res.data.message,{position:\"bottom-right\",type:window.gs.toast.TYPE.FAILED});}}else{console.log(err);}});}}else{Modal.warning({content:\"Should Contain atleast one trigger point\"});}};this.renderRight=()=>{const{activeTab,url,mediaType,STYLE}=this.state;if(activeTab===3&&url){if(mediaType===\"IMAGE\")return/*#__PURE__*/_jsx(ReponsiveImage,{isImg:true,url:url});return/*#__PURE__*/_jsx(ReponsiveImage,{isVideo:true,url:url});}if(activeTab===6&&STYLE.isbackGroundImage){return/*#__PURE__*/_jsx(ReponsiveImage,{isImg:true,url:STYLE.backgroundImage});}return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/exit_pop_up.png\"});};this.back=()=>{this.props.history.push(\"/Create\");};this.closePopup=()=>{this.setState({preview:false});};}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{if(res){this.loaded=true;Util.isRedirected=true;const data=ExitIntentModalResponse(res);if(data){this.setState(data,()=>{window.gs.navTitle(ToolUtil.getTool(data.toolId)+\"(\"+data.name+\")\");});}}});}else{this.loaded=true;const toolId=9;this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId)+\"(\"+Util.CAMPAIGNS_NAME+\")\");}}render(){const{preview,url}=this.state;// const preview = true;\nreturn/*#__PURE__*/_jsx(ToolLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[preview?/*#__PURE__*/_jsx(Preview,{...this.state,closePopup:this.closePopup}):null,/*#__PURE__*/_jsx(\"div\",{className:\"col-10 toolItem\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:this.renderMain()}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mt-2\",children:this.renderRight()}),/*#__PURE__*/_jsx(ButtonsGroup,{preview:()=>{this.setState({preview:!preview});},backUrl:this.back,save:this.onClickSave})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 sideBarButtomPanel\",children:/*#__PURE__*/_jsx(SideBar,{activeTab:this.state.activeTab,onChangeActive:this.onChangeActive})})]})});}}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/tools/ExitIntent/index.js"],"names":["React","Component","Code","RequestHandler","GET_ONE_TOOL","SAVE_TOOL","getPath","Text","SideBar","ToolUtil","Style","Media","CTA","NoThanks","Util","Preview","ExitIntentModal","ExitIntentModalResponse","ToolLayout","ButtonsGroup","Modal","ReponsiveImage","exitInt","activeTab","headline","subheadline","isInput","mediaType","url","ctaText","ctaAction","redirectUrl","noThanksText","STYLE","elements","name","text","color","height","width","selected","isbackGroundImage","backgroundImage","CODE","include","type","exclude","ExitIntent","state","loaded","onChangeActive","tabIndex","setState","onUpdate","index","data","TEXT","template","media","cta","noThanks","updateChange","value","renderMain","component","onClickSave","toolData","isArrayEqual","PostRequest","res","err","success","content","setTimeout","props","history","push","window","gs","toast","message","position","TYPE","FAILED","console","log","warning","renderRight","back","closePopup","preview","componentDidMount","id","match","params","isRedirected","navTitle","getTool","toolId","toolName","CAMPAIGNS_NAME","RedirectWhenCampaignEmpty","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"../../Create.css\";\r\nimport Code from \"../../../subpages/create/Code\";\r\nimport RequestHandler from \"../../../../actions/RequestHandler\";\r\nimport { GET_ONE_TOOL, SAVE_TOOL, getPath } from \"../../../../actions/URLs\";\r\nimport Text from \"./Text\";\r\nimport SideBar from \"./SideBar\";\r\nimport ToolUtil from \"../../../../utils/ToolUtil\";\r\nimport Style from \"./Style\";\r\nimport Media from \"./Media\";\r\nimport CTA from \"./CTA\";\r\nimport NoThanks from \"./NoThanks\";\r\nimport Util from \"../../../Util\";\r\nimport Preview from \"./Preview\";\r\nimport { ExitIntentModal, ExitIntentModalResponse } from \"../../../utils/Modal\";\r\nimport { ToolLayout, ButtonsGroup } from \"../../../layout/ToolLayout\";\r\nimport { Modal } from \"antd\";\r\nimport { ReponsiveImage } from \"../../../comman/PreviewAble\";\r\nconst exitInt = {\r\n  activeTab: 1,\r\n  headline: \"Lorem ipsum sit amet!\",\r\n  subheadline: \"Eiusmod tempor nibh veniam incididunt\",\r\n  isInput: false,\r\n  mediaType: \"IMAGE\",\r\n  url: \"\",\r\n  ctaText: \"GET STARTED NOW\",\r\n  ctaAction: \"#\",\r\n  redirectUrl: \"\",\r\n  noThanksText: \"No Thanks\",\r\n  STYLE: {\r\n    elements: [\r\n      { name: \"popupBackgoundColor\", text: \"Popup Background Color\", color: \"\" },\r\n      { name: \"ctaBackgound\", text: \"CTA Background\", color: \"\" },\r\n    ],\r\n    height: 50,\r\n    width: 50,\r\n    selected: 0,\r\n    isbackGroundImage: false,\r\n    backgroundImage: \"\",\r\n  },\r\n  CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: \"\" }] },\r\n};\r\nexport default class ExitIntent extends Component {\r\n  state = exitInt;\r\n  loaded = false;\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        if (res) {\r\n          this.loaded = true;\r\n          Util.isRedirected = true;\r\n          const data = ExitIntentModalResponse(res);\r\n          if (data) {\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      this.loaded = true;\r\n      const toolId = 9;\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n    }\r\n  }\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n  onUpdate = (index, data) => {\r\n    switch (index) {\r\n      case 1:\r\n        this.setState({ TEXT: data });\r\n        break;\r\n      case 2:\r\n        this.setState({ template: data });\r\n        break;\r\n      case 3:\r\n        this.setState({ media: data });\r\n        break;\r\n      case 4:\r\n        this.setState({ cta: data });\r\n        break;\r\n      case 5:\r\n        this.setState({ noThanks: data });\r\n        break;\r\n      case 6:\r\n        this.setState({ STYLE: data });\r\n        break;\r\n      case 7:\r\n        this.setState({ CODE: data });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  updateChange = (value) => {\r\n    this.setState(value);\r\n  };\r\n  renderMain = () => {\r\n    const { activeTab, headline, subheadline, noThanksText, template, mediaType, url, ctaAction, ctaText, redirectUrl, noThanks, STYLE, CODE, isInput } = this.state;\r\n    let component = null;\r\n    if (!this.loaded) return null;\r\n    switch (activeTab) {\r\n      case 1:\r\n        component = <Text headline={headline} subheadline={subheadline} onChange={this.updateChange} />;\r\n        break;\r\n      // case 2:\r\n      //   component = <Layout layout={template} case={2} onChange={this.onUpdate} />;\r\n      //   break;\r\n      case 3:\r\n        component = <Media isInput={isInput} mediaType={mediaType} url={url} onChange={this.updateChange} />;\r\n        break;\r\n      case 4:\r\n        component = <CTA ctaAction={ctaAction} ctaText={ctaText} redirectUrl={redirectUrl} onChange={this.updateChange} />;\r\n        break;\r\n      case 5:\r\n        component = <NoThanks noThanksText={noThanksText} onChange={this.updateChange} />;\r\n        break;\r\n      case 6:\r\n        component = <Style {...STYLE} case={6} onChange={this.onUpdate} />;\r\n        break;\r\n      case 7:\r\n        component = <Code {...CODE} case={7} onChange={this.onUpdate} />;\r\n        break;\r\n      default:\r\n        component = <Text headline={headline} subheadline={subheadline} onChange={this.updateChange} />;\r\n        break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    const toolData = this.state;\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      if (!Util.isArrayEqual(exitInt, this.state, 3)) {\r\n        if(!toolData.url) {\r\n          toolData.url = \"box.png\";\r\n        } \r\n        RequestHandler.PostRequest(SAVE_TOOL, { toolData: ExitIntentModal(toolData) }, (res, err) => {\r\n          if (res) {\r\n            if (res.data.success) {\r\n              Modal.success({\r\n                content: \"Campaign Save SuccessFully\",\r\n              });\r\n              setTimeout(() => {\r\n                this.props.history.push(\"/Campaigns\");\r\n              }, 1000);\r\n            } else {\r\n              window.gs.toast(res.data.message, { position: \"bottom-right\", type: window.gs.toast.TYPE.FAILED });\r\n            }\r\n          } else {\r\n            console.log(err);\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  renderRight = () => {\r\n    const { activeTab, url, mediaType, STYLE } = this.state;\r\n    if (activeTab === 3 && url) {\r\n      if (mediaType === \"IMAGE\") return <ReponsiveImage isImg={true} url={url} />;\r\n      return <ReponsiveImage isVideo={true} url={url} />;\r\n    }\r\n    if (activeTab === 6 && STYLE.isbackGroundImage) {\r\n      return <ReponsiveImage isImg={true} url={STYLE.backgroundImage} />;\r\n    }\r\n    return <ReponsiveImage isAs={true} url={\"asset/exit_pop_up.png\"} />;\r\n  };\r\n\r\n  back = () => {\r\n    this.props.history.push(\"/Create\");\r\n  };\r\n\r\n  closePopup = () => {\r\n    this.setState({ preview: false });\r\n  };\r\n\r\n  render() {\r\n    const { preview, url } = this.state;\r\n    // const preview = true;\r\n    return (\r\n      <ToolLayout>\r\n        <div className=\"row\">\r\n          {preview ? <Preview {...this.state} closePopup={this.closePopup} /> : null}\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">{this.renderMain()}</div>\r\n              <div className=\"col-md-6 mt-2\">{this.renderRight()}</div>\r\n              <ButtonsGroup\r\n                preview={ () => {\r\n                  this.setState({ preview: !preview });\r\n                }}\r\n                backUrl={this.back}\r\n                save={this.onClickSave}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <SideBar activeTab={this.state.activeTab} onChangeActive={this.onChangeActive} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}