{"ast":null,"code":"import React,{Component}from\"react\";import\"../../Create.css\";import Code from\"../../../subpages/create/Code\";import RequestHandler from\"../../../../actions/RequestHandler\";import{GET_ONE_TOOL,SAVE_TOOL,getPath}from\"../../../../actions/URLs\";import Text from\"./Text\";import SideBar from\"./SideBar\";import ToolUtil from\"../../../../utils/ToolUtil\";import Style from\"./Style\";import Video from\"./Video\";import Preview from\"./Preview\";import Util from\"../../../Util\";import{VideoPopUpModalResponse,VideoPopUpModal}from\"../../../utils/Modal\";import Image from\"./Image\";import{ToolLayout,ButtonsGroup}from\"../../../layout/ToolLayout\";import{Modal}from\"antd\";import{ReponsiveImage}from\"../../../comman/PreviewAble\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const vidoPop={activeTab:1,image:\"\",TEXT:{campaignName:\"\"},video:{url:\"\",videoType:\"youtube\"},STYLE:{elements:[{name:\"background\",text:\"Video Background\",color:\"\"}],switchElement:false,selected:0},CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:\"\"}]}};export default class VideoPopup extends Component{constructor(){super(...arguments);this.state=vidoPop;this.loaded=false;this.onVideoChange=switchElement=>{this.setState({STYLE:{switchElement}});};this.onChangeActive=tabIndex=>{const{activeTab}=this.state;if(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.onUpdate=(index,data)=>{switch(index){case 1:this.setState({TEXT:data});break;case 2:this.setState({video:data});break;case 3:this.setState({STYLE:data});break;case 4:this.setState({CODE:data});break;case 5:this.setState({image:data});break;default:break;}};this.renderMain=()=>{const{activeTab,TEXT,video,STYLE,CODE,image}=this.state;if(!this.loaded)return null;let component=null;switch(activeTab){case 15:component=/*#__PURE__*/_jsx(Text,{...TEXT,onChange:this.onUpdate});break;case 1:component=/*#__PURE__*/_jsx(Video,{...video,onVideoChange:this.onVideoChange,switchElement:STYLE.switchElement,onChange:this.onUpdate});break;case 2:component=/*#__PURE__*/_jsx(Style,{...STYLE,case:3,onChange:this.onUpdate});break;case 3:component=/*#__PURE__*/_jsx(Code,{...CODE,case:4,onChange:this.onUpdate});break;case 4:component=/*#__PURE__*/_jsx(Image,{image:image,case:5,onChange:this.onUpdate});break;default:component=/*#__PURE__*/_jsx(Text,{...TEXT,onChange:this.onUpdate});break;}return component;};this.onClickSave=()=>{const toolData=this.state;if(this.state.CODE.include[0].url!==\"\"){if(!Util.isArrayEqual(vidoPop,this.state,3)){if(toolData.image!=\"\"){RequestHandler.PostRequest(SAVE_TOOL,{toolData:VideoPopUpModal(toolData)},(res,err)=>{if(res){if(res.data.script){window.gs.setScript(res.data.script);setTimeout(()=>{this.props.history.push(\"/Campaigns\");},3000);}else{window.gs.toast(res.data.message,{position:\"bottom-right\",type:window.gs.toast.TYPE.FAILED});}}else{console.log(err);}});}else{window.gs.toast(\"Please select thumb file.\",{position:\"bottom-right\",type:window.gs.toast.TYPE.ERROR});}}}else{Modal.warning({content:\"Should Contain atleast one trigger point\"});}};this.renderRight=()=>{const{activeTab,image,video}=this.state;if(activeTab===1&&video.url)return/*#__PURE__*/_jsx(ReponsiveImage,{isVideo:true,url:video.url});if(activeTab===4&&image)return/*#__PURE__*/_jsx(ReponsiveImage,{isImg:true,url:\"\".concat(image)});return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/video_pop_up.png\"});};this.back=()=>{this.props.history.push(\"/Create\");};this.closePopup=()=>{this.setState({preview:false});};}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{if(res){this.loaded=true;Util.isRedirected=true;const data=VideoPopUpModalResponse(res);if(data){this.setState(data,()=>{window.gs.navTitle(ToolUtil.getTool(data.toolId)+\"(\"+data.name+\")\");});}}});}else{const toolId=5;this.loaded=true;this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId)+\"(\"+Util.CAMPAIGNS_NAME+\")\");}}render(){const{preview,video}=this.state;return/*#__PURE__*/_jsx(ToolLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[preview?/*#__PURE__*/_jsx(Preview,{...this.state,closePopup:this.closePopup}):null,/*#__PURE__*/_jsx(\"div\",{className:\"col-10 toolItem\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:this.renderMain()}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mt-2\",children:this.renderRight()}),/*#__PURE__*/_jsx(ButtonsGroup,{preview:video.url!=\"\"?()=>{this.setState({preview:!preview});}:null,backUrl:this.back,save:this.onClickSave})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 sideBarButtomPanel\",children:/*#__PURE__*/_jsx(SideBar,{activeTab:this.state.activeTab,onChangeActive:this.onChangeActive})})]})});}}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/tools/VideoPopup/index.js"],"names":["React","Component","Code","RequestHandler","GET_ONE_TOOL","SAVE_TOOL","getPath","Text","SideBar","ToolUtil","Style","Video","Preview","Util","VideoPopUpModalResponse","VideoPopUpModal","Image","ToolLayout","ButtonsGroup","Modal","ReponsiveImage","vidoPop","activeTab","image","TEXT","campaignName","video","url","videoType","STYLE","elements","name","text","color","switchElement","selected","CODE","include","type","exclude","VideoPopup","state","loaded","onVideoChange","setState","onChangeActive","tabIndex","onUpdate","index","data","renderMain","component","onClickSave","toolData","isArrayEqual","PostRequest","res","err","script","window","gs","setScript","setTimeout","props","history","push","toast","message","position","TYPE","FAILED","console","log","ERROR","warning","content","renderRight","back","closePopup","preview","componentDidMount","id","match","params","isRedirected","navTitle","getTool","toolId","toolName","CAMPAIGNS_NAME","RedirectWhenCampaignEmpty","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"../../Create.css\";\r\nimport Code from \"../../../subpages/create/Code\";\r\nimport RequestHandler from \"../../../../actions/RequestHandler\";\r\nimport { GET_ONE_TOOL, SAVE_TOOL, getPath } from \"../../../../actions/URLs\";\r\nimport Text from \"./Text\";\r\nimport SideBar from \"./SideBar\";\r\nimport ToolUtil from \"../../../../utils/ToolUtil\";\r\nimport Style from \"./Style\";\r\nimport Video from \"./Video\";\r\nimport Preview from \"./Preview\";\r\nimport Util from \"../../../Util\";\r\nimport { VideoPopUpModalResponse, VideoPopUpModal } from \"../../../utils/Modal\";\r\nimport Image from \"./Image\";\r\nimport { ToolLayout, ButtonsGroup } from \"../../../layout/ToolLayout\";\r\nimport { Modal } from \"antd\";\r\nimport { ReponsiveImage } from \"../../../comman/PreviewAble\";\r\n\r\nconst vidoPop = {\r\n  activeTab: 1,\r\n  image: \"\",\r\n  TEXT: { campaignName: \"\" },\r\n  video: { url: \"\", videoType: \"youtube\" },\r\n  STYLE: {\r\n    elements: [{ name: \"background\", text: \"Video Background\", color: \"\" }],\r\n    switchElement: false,\r\n    selected: 0,\r\n  },\r\n  CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: \"\" }] },\r\n};\r\nexport default class VideoPopup extends Component {\r\n  state = vidoPop;\r\n  loaded = false;\r\n  onVideoChange = (switchElement) => {\r\n    this.setState({ STYLE: { switchElement } });\r\n  };\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        if (res) {\r\n          this.loaded = true;\r\n          Util.isRedirected = true;\r\n          const data = VideoPopUpModalResponse(res);\r\n          if (data) {\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      const toolId = 5;\r\n      this.loaded = true;\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n    }\r\n  }\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n  onUpdate = (index, data) => {\r\n    switch (index) {\r\n      case 1:\r\n        this.setState({ TEXT: data });\r\n        break;\r\n      case 2:\r\n        this.setState({ video: data });\r\n        break;\r\n      case 3:\r\n        this.setState({ STYLE: data });\r\n        break;\r\n      case 4:\r\n        this.setState({ CODE: data });\r\n        break;\r\n      case 5:\r\n        this.setState({ image: data });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  renderMain = () => {\r\n    const { activeTab, TEXT, video, STYLE, CODE, image } = this.state;\r\n    if (!this.loaded) return null;\r\n    let component = null;\r\n    switch (activeTab) {\r\n      case 15:\r\n        component = <Text {...TEXT} onChange={this.onUpdate} />;\r\n        break;\r\n      case 1:\r\n        component = <Video {...video} onVideoChange={this.onVideoChange} switchElement={STYLE.switchElement} onChange={this.onUpdate} />;\r\n        break;\r\n      case 2:\r\n        component = <Style {...STYLE} case={3} onChange={this.onUpdate} />;\r\n        break;\r\n      case 3:\r\n        component = <Code {...CODE} case={4} onChange={this.onUpdate} />;\r\n        break;\r\n      case 4:\r\n        component = <Image image={image} case={5} onChange={this.onUpdate} />;\r\n        break;\r\n      default:\r\n        component = <Text {...TEXT} onChange={this.onUpdate} />;\r\n        break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    const toolData = this.state;\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      if (!Util.isArrayEqual(vidoPop, this.state, 3)) {\r\n        if(toolData.image != \"\") {\r\n          RequestHandler.PostRequest(SAVE_TOOL, { toolData: VideoPopUpModal(toolData) }, (res, err) => {\r\n            if (res) {\r\n              if (res.data.script) {\r\n                window.gs.setScript(res.data.script);\r\n                setTimeout(() => {\r\n                  this.props.history.push(\"/Campaigns\");\r\n                }, 3000);\r\n              } else {\r\n                window.gs.toast(res.data.message, { position: \"bottom-right\", type: window.gs.toast.TYPE.FAILED });\r\n              }\r\n            } else {\r\n              console.log(err);\r\n            }\r\n          });\r\n        } else {\r\n          window.gs.toast(\"Please select thumb file.\", { position: \"bottom-right\", type: window.gs.toast.TYPE.ERROR });\r\n        }\r\n      }\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  renderRight = () => {\r\n    const { activeTab, image, video } = this.state;\r\n    if (activeTab === 1 && video.url) return <ReponsiveImage isVideo={true} url={video.url} />;\r\n    if (activeTab === 4 && image) return <ReponsiveImage isImg={true} url={`${image}`} />;\r\n    return <ReponsiveImage isAs={true} url={\"asset/video_pop_up.png\"} />;\r\n  };\r\n\r\n  back = () => {\r\n    this.props.history.push(\"/Create\");\r\n  };\r\n\r\n  closePopup = () => {\r\n    this.setState({ preview: false });\r\n  };\r\n\r\n  render() {\r\n    const { preview, video } = this.state;\r\n\r\n    return (\r\n      <ToolLayout>\r\n        <div className=\"row\">\r\n          {preview ? <Preview {...this.state} closePopup={this.closePopup} /> : null}\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">{this.renderMain()}</div>\r\n              <div className=\"col-md-6 mt-2\">{this.renderRight()}</div>\r\n              <ButtonsGroup\r\n                preview={ video.url!=\"\" ? () => {\r\n                  this.setState({ preview: !preview });\r\n                } : null}\r\n                backUrl={this.back}\r\n                save={this.onClickSave}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <SideBar activeTab={this.state.activeTab} onChangeActive={this.onChangeActive} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}