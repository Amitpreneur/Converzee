{"ast":null,"code":"import axios from \"axios\";\nimport { Storage } from \"../../utils/Storage\";\nimport { BASE_URL } from \"../../actions/URLs\";\nexport class Request {}\n\nRequest.loginAuth = function (params, callback) {\n  axios.post(BASE_URL + \"user/auth\", {\n    userData: params\n  }).then(res => {\n    if (res.data.success) Request.setAuth(res.data.token, res.data.id);\n    callback(res, null); // const { token } = res.data;\n    // localStorage.setItem(\"jwtToken\", token);\n  }).catch(err => callback(null, err));\n};\n\nRequest.setAuth = function () {\n  let token = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let id = arguments.length > 1 ? arguments[1] : undefined;\n  var now = new Date();\n  now.setMinutes(now.getMinutes() + 24 * 60);\n  Storage.put(\"timeout\", now.getTime());\n  Storage.put(\"id\", id);\n  Storage.put(\"x-access-token\", token);\n};\n\nRequest.getAuth = function () {\n  const current = new Date().getTime();\n  const timeout = Storage.get(\"timeout\");\n\n  if (timeout > current) {\n    return true;\n  }\n\n  return false;\n};","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/auth/authHandler.js"],"names":["axios","Storage","BASE_URL","Request","loginAuth","params","callback","post","userData","then","res","data","success","setAuth","token","id","catch","err","now","Date","setMinutes","getMinutes","put","getTime","getAuth","current","timeout","get"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAO,MAAMC,OAAN,CAAc;;AAARA,O,CACJC,S,GAAY,UAASC,MAAT,EAAiBC,QAAjB,EAA2B;AAC5CN,EAAAA,KAAK,CACFO,IADH,CACQL,QAAQ,GAAG,WADnB,EACgC;AAAEM,IAAAA,QAAQ,EAAEH;AAAZ,GADhC,EAEGI,IAFH,CAEQC,GAAG,IAAI;AACX,QAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,EAAsBT,OAAO,CAACU,OAAR,CAAgBH,GAAG,CAACC,IAAJ,CAASG,KAAzB,EAAgCJ,GAAG,CAACC,IAAJ,CAASI,EAAzC;AACtBT,IAAAA,QAAQ,CAACI,GAAD,EAAM,IAAN,CAAR,CAFW,CAGX;AACA;AACD,GAPH,EAQGM,KARH,CAQSC,GAAG,IAAIX,QAAQ,CAAC,IAAD,EAAOW,GAAP,CARxB;AASD,C;;AAXUd,O,CAYJU,O,GAAU,YAA2B;AAAA,MAAlBC,KAAkB,uEAAV,IAAU;AAAA,MAAJC,EAAI;AAC1C,MAAIG,GAAG,GAAG,IAAIC,IAAJ,EAAV;AACAD,EAAAA,GAAG,CAACE,UAAJ,CAAeF,GAAG,CAACG,UAAJ,KAAmB,KAAK,EAAvC;AACApB,EAAAA,OAAO,CAACqB,GAAR,CAAY,SAAZ,EAAuBJ,GAAG,CAACK,OAAJ,EAAvB;AACAtB,EAAAA,OAAO,CAACqB,GAAR,CAAY,IAAZ,EAAkBP,EAAlB;AACAd,EAAAA,OAAO,CAACqB,GAAR,CAAY,gBAAZ,EAA8BR,KAA9B;AACD,C;;AAlBUX,O,CAmBJqB,O,GAAU,YAAW;AAC1B,QAAMC,OAAO,GAAG,IAAIN,IAAJ,GAAWI,OAAX,EAAhB;AACA,QAAMG,OAAO,GAAGzB,OAAO,CAAC0B,GAAR,CAAY,SAAZ,CAAhB;;AACA,MAAID,OAAO,GAAGD,OAAd,EAAuB;AACrB,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,C","sourcesContent":["import axios from \"axios\";\r\nimport { Storage } from \"../../utils/Storage\";\r\nimport { BASE_URL } from \"../../actions/URLs\";\r\nexport class Request {\r\n  static loginAuth = function(params, callback) {\r\n    axios\r\n      .post(BASE_URL + \"user/auth\", { userData: params })\r\n      .then(res => {\r\n        if (res.data.success) Request.setAuth(res.data.token, res.data.id);\r\n        callback(res, null);\r\n        // const { token } = res.data;\r\n        // localStorage.setItem(\"jwtToken\", token);\r\n      })\r\n      .catch(err => callback(null, err));\r\n  };\r\n  static setAuth = function(token = null, id) {\r\n    var now = new Date();\r\n    now.setMinutes(now.getMinutes() + 24 * 60);\r\n    Storage.put(\"timeout\", now.getTime());\r\n    Storage.put(\"id\", id);\r\n    Storage.put(\"x-access-token\", token);\r\n  };\r\n  static getAuth = function() {\r\n    const current = new Date().getTime();\r\n    const timeout = Storage.get(\"timeout\");\r\n    if (timeout > current) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}