{"ast":null,"code":"var _jsxFileName = \"/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/tools/ProofApp/index.js\";\nimport React, { Component } from \"react\";\nimport SideBar from \"./SideBar\";\nimport ToolUtil, { generateIframeContant, getDefaultItems } from \"../../../../utils/ToolUtil\";\nimport Util, { generateFile, parseImgUrl } from \"../../../Util\";\nimport Text from \"./Text\";\nimport Script from \"./Script\";\nimport { ToolLayout, ButtonsGroup } from \"../../../layout/ToolLayout\";\nimport { getPath, GET_PIXEL, SAVE_TOOL, GET_ONE_TOOL, BASE_URL } from \"../../../../actions/URLs\";\nimport RequestHandler from \"../../../../actions/RequestHandler\";\nimport { Modal } from \"antd\";\nimport { LayoutSelector } from \"../../../layout/LayoutSelector\";\nimport Code from \"./Code\";\nimport { proofAppModalResponse, proofAppModal } from \"../../../utils/Modal\";\nimport Preview from \"./Preview\";\nimport { ReponsiveImage } from \"../../../comman/PreviewAble\";\nimport Style from \"./Style\";\nimport Display from \"./Display\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class OptinForm extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      toolName: \"\",\n      toolId: \"\",\n      preview: false,\n      _id: null,\n      activeTab: 1,\n      toolData: {\n        text: \"bought the product\",\n        subText: \"From\",\n        duration: 2,\n        position: \"bottomLeft\",\n        timeFirstUser: 0,\n        timeBetweenTwoUser: 2\n      },\n      STYLE: {\n        elements: [{\n          name: \"titleColor\",\n          text: \"Title\",\n          color: \"#ed8a25\"\n        }, {\n          name: \"subtitleColor\",\n          text: \"Subtitle\",\n          color: \"#292929\"\n        }, {\n          name: \"logoColor\",\n          text: \"Logo Color\",\n          color: \"#292929\"\n        }],\n        selected: 0,\n        displayFrequency: \"\"\n      },\n      CODE: {\n        include: [{\n          type: \"contains\",\n          url: \"\"\n        }],\n        exclude: [{\n          type: \"contains\",\n          url: null\n        }]\n      }\n    };\n    this.loaded = false;\n\n    this.onChangeActive = tabIndex => {\n      const {\n        activeTab\n      } = this.state;\n\n      if (activeTab !== tabIndex) {\n        this.setState({\n          activeTab: tabIndex\n        });\n      }\n    };\n\n    this.onUpdate = (index, data) => {\n      switch (index) {\n        case 1:\n          this.setState({\n            toolData: { ...this.state.toolData,\n              ...data\n            }\n          });\n          break;\n\n        case 3:\n          this.setState({\n            toolData: { ...this.state.toolData,\n              ...data\n            }\n          });\n          break;\n\n        case 5:\n          this.setState({\n            STYLE: data\n          });\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.codeUpdate = data => {\n      this.setState({\n        CODE: data\n      });\n    };\n\n    this.renderMain = () => {\n      const {\n        activeTab,\n        toolData,\n        CODE,\n        STYLE\n      } = this.state;\n      let component = null;\n      if (!this.loaded) return null;\n\n      switch (activeTab) {\n        case 1:\n          component = /*#__PURE__*/_jsxDEV(Text, {\n            text: toolData.text,\n            subText: toolData.subText,\n            timeFirstUser: toolData.timeFirstUser,\n            timeBetweenTwoUser: toolData.timeBetweenTwoUser,\n            cases: 1,\n            onChange: this.onUpdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this);\n          break;\n\n        case 3:\n          component = /*#__PURE__*/_jsxDEV(Display, {\n            toolData: toolData,\n            cases: 3,\n            onChange: this.onUpdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this);\n          break;\n\n        case 4:\n          component = /*#__PURE__*/_jsxDEV(Style, { ...STYLE,\n            cases: 5,\n            onChange: this.onUpdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this);\n          break;\n\n        default:\n          component = /*#__PURE__*/_jsxDEV(Code, { ...CODE,\n            onChange: this.codeUpdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this);\n          break;\n      }\n\n      return component;\n    };\n\n    this.onClickSave = () => {\n      if (this.state.CODE.include[0].url !== \"\") {\n        RequestHandler.PostRequest(SAVE_TOOL, {\n          toolData: proofAppModal(this.state)\n        }, (res, err) => {\n          if (res) {\n            const data1 = res.data;\n\n            if (data1.success) {\n              if (data1.script) {\n                window.gs.setScript(data1.script);\n              } else {\n                Modal.success({\n                  content: data1.message\n                });\n              }\n\n              setTimeout(() => {\n                this.props.history.push(\"/Campaigns\");\n              }, 1000);\n            }\n          }\n        });\n      } else {\n        Modal.warning({\n          content: \"Should Contain atleast one trigger point\"\n        });\n      }\n    };\n\n    this.back = () => {\n      this.props.history.push(\"/Create\");\n      window.gs.navTitle(\"Create\");\n    };\n\n    this.togglePreview = () => {\n      const {\n        preview\n      } = this.state;\n      this.setState({\n        preview: !preview\n      });\n    };\n  }\n\n  componentWillMount() {\n    if (window.gs.ie) {\n      const ie = getDefaultItems(window.gs.ie);\n      let {\n        toolData\n      } = this.state;\n      this.state.toolData = { ...toolData,\n        ...ie\n      };\n      window.gs.ie = null;\n    }\n  }\n\n  componentDidMount() {\n    const id = this.props.match ? this.props.match.params ? this.props.match.params.id : null : null;\n\n    if (id) {\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\n        this.loaded = true;\n\n        if (res) {\n          Util.isRedirected = true;\n          const data = proofAppModalResponse(res);\n\n          if (data) {\n            this.setState(data, () => {\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"  \" + \"(\" + data.name + \")\");\n            });\n          }\n        }\n      });\n    } else {\n      let toolId = 25;\n      this.loaded = true;\n      this.setState({\n        toolId: toolId,\n        toolName: ToolUtil.getTool(toolId),\n        name: Util.CAMPAIGNS_NAME\n      });\n      Util.RedirectWhenCampaignEmpty(this.props);\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"(\" + Util.CAMPAIGNS_NAME + \")\");\n    }\n  }\n\n  // renderRight = () => {\n  //   const { activeTab, image, video } = this.state;\n  //   if (activeTab === 1 && video.url) return <ReponsiveImage isVideo={true} url={video.url} />;\n  //   if (activeTab === 2 && image) return <ReponsiveImage isImg={true} url={`https://d257yxqteot439.cloudfront.net/static/contains/${image}`} />;\n  //   return (activeTab === 5 ? null : <ReponsiveImage isAs={true} url={\"asset/video_pop_up.png\"} />);\n  // };\n  render() {\n    const {\n      preview,\n      toolData,\n      activeTab\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(ToolLayout, {\n      children: [preview ? /*#__PURE__*/_jsxDEV(Preview, { ...this.state,\n        onClose: this.togglePreview\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 20\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-10 toolItem\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: activeTab === 5 ? \"col-md-12\" : \"col-md-6\",\n              children: this.renderMain()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 mt-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ButtonsGroup, {\n              preview: () => {\n                this.setState({\n                  preview: !preview\n                });\n              },\n              backUrl: this.back,\n              save: this.onClickSave\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-1 sideBarButtomPanel\",\n          children: /*#__PURE__*/_jsxDEV(SideBar, {\n            layout: toolData.layout,\n            activeTab: activeTab,\n            onChangeActive: this.onChangeActive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/tools/ProofApp/index.js"],"names":["React","Component","SideBar","ToolUtil","generateIframeContant","getDefaultItems","Util","generateFile","parseImgUrl","Text","Script","ToolLayout","ButtonsGroup","getPath","GET_PIXEL","SAVE_TOOL","GET_ONE_TOOL","BASE_URL","RequestHandler","Modal","LayoutSelector","Code","proofAppModalResponse","proofAppModal","Preview","ReponsiveImage","Style","Display","OptinForm","state","toolName","toolId","preview","_id","activeTab","toolData","text","subText","duration","position","timeFirstUser","timeBetweenTwoUser","STYLE","elements","name","color","selected","displayFrequency","CODE","include","type","url","exclude","loaded","onChangeActive","tabIndex","setState","onUpdate","index","data","codeUpdate","renderMain","component","onClickSave","PostRequest","res","err","data1","success","script","window","gs","setScript","content","message","setTimeout","props","history","push","warning","back","navTitle","togglePreview","componentWillMount","ie","componentDidMount","id","match","params","isRedirected","getTool","CAMPAIGNS_NAME","RedirectWhenCampaignEmpty","render","layout"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport SideBar from \"./SideBar\";\r\nimport ToolUtil, { generateIframeContant, getDefaultItems } from \"../../../../utils/ToolUtil\";\r\nimport Util, { generateFile, parseImgUrl } from \"../../../Util\";\r\nimport Text from \"./Text\";\r\nimport Script from \"./Script\";\r\nimport { ToolLayout, ButtonsGroup } from \"../../../layout/ToolLayout\";\r\nimport { getPath, GET_PIXEL, SAVE_TOOL, GET_ONE_TOOL, BASE_URL } from \"../../../../actions/URLs\";\r\nimport RequestHandler from \"../../../../actions/RequestHandler\";\r\nimport { Modal } from \"antd\";\r\nimport { LayoutSelector } from \"../../../layout/LayoutSelector\";\r\nimport Code from \"./Code\";\r\nimport { proofAppModalResponse, proofAppModal } from \"../../../utils/Modal\";\r\nimport Preview from \"./Preview\";\r\nimport { ReponsiveImage } from \"../../../comman/PreviewAble\";\r\nimport Style from \"./Style\";\r\nimport Display from \"./Display\";\r\n\r\nexport default class OptinForm extends Component {\r\n  state = {\r\n    toolName: \"\",\r\n    toolId: \"\",\r\n    preview: false,\r\n    _id: null,\r\n    activeTab: 1,\r\n    toolData: {\r\n      text: \"bought the product\",\r\n      subText: \"From\",\r\n      duration: 2,\r\n      position: \"bottomLeft\",\r\n      timeFirstUser: 0,\r\n      timeBetweenTwoUser: 2,\r\n    },\r\n    STYLE: {\r\n      elements: [\r\n        { name: \"titleColor\", text: \"Title\", color: \"#ed8a25\" },\r\n        { name: \"subtitleColor\", text: \"Subtitle\", color: \"#292929\" },\r\n        { name: \"logoColor\", text: \"Logo Color\", color: \"#292929\" },\r\n      ],\r\n      selected: 0,\r\n      displayFrequency:\"\"\r\n    },\r\n    CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: null }] }\r\n  };\r\n  loaded = false;\r\n\r\n  componentWillMount() {\r\n    if (window.gs.ie) {\r\n      const ie = getDefaultItems(window.gs.ie);\r\n      let { toolData } = this.state;\r\n      this.state.toolData = { ...toolData, ...ie };\r\n      window.gs.ie = null;\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        this.loaded = true;\r\n        if (res) {\r\n          Util.isRedirected = true;\r\n          const data = proofAppModalResponse(res);\r\n          if (data) {\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"  \" + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      let toolId = 25; this.loaded = true;\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n    }\r\n  }\r\n\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n\r\n  onUpdate = (index, data) => {\r\n    switch (index) {\r\n      case 1:\r\n          this.setState({ toolData : { ...this.state.toolData, ...data} });\r\n          break;\r\n      case 3:\r\n          this.setState({ toolData : { ...this.state.toolData, ...data} });\r\n          break;\r\n      case 5:\r\n          this.setState({ STYLE : data });\r\n          break;\r\n      default:\r\n          break;\r\n    }\r\n  };\r\n\r\n  codeUpdate = (data) => {\r\n    this.setState({ CODE: data });\r\n  }\r\n\r\n  renderMain = () => {\r\n    const { activeTab, toolData, CODE, STYLE } = this.state;\r\n    let component = null;\r\n    if (!this.loaded) return null;\r\n    switch (activeTab) {\r\n        case 1:\r\n            component = <Text text={toolData.text} subText={toolData.subText} timeFirstUser={toolData.timeFirstUser} timeBetweenTwoUser={toolData.timeBetweenTwoUser} cases={1} onChange={this.onUpdate} />;\r\n            break;\r\n        case 3:\r\n            component = <Display toolData={toolData} cases={3} onChange={this.onUpdate} />;\r\n            break;\r\n        case 4:\r\n            component = <Style {...STYLE} cases={5} onChange={this.onUpdate} />;\r\n            break;\r\n        default:\r\n            component = <Code {...CODE} onChange={this.codeUpdate} />\r\n            break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      RequestHandler.PostRequest(SAVE_TOOL, { toolData: proofAppModal(this.state) }, (res, err) => {\r\n        if (res) {\r\n          const data1 = res.data;\r\n          if (data1.success) {\r\n            if (data1.script) {\r\n              window.gs.setScript(data1.script);\r\n            } else {\r\n              Modal.success({\r\n                content: data1.message,\r\n              });\r\n            }\r\n            setTimeout(() => {\r\n              this.props.history.push(\"/Campaigns\");\r\n            }, 1000);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  back = () => {\r\n    this.props.history.push(\"/Create\");\r\n    window.gs.navTitle(\"Create\")\r\n  };\r\n\r\n  togglePreview = () => {\r\n    const { preview } = this.state;\r\n    this.setState({ preview: !preview });\r\n  };\r\n\r\n  // renderRight = () => {\r\n  //   const { activeTab, image, video } = this.state;\r\n  //   if (activeTab === 1 && video.url) return <ReponsiveImage isVideo={true} url={video.url} />;\r\n  //   if (activeTab === 2 && image) return <ReponsiveImage isImg={true} url={`https://d257yxqteot439.cloudfront.net/static/contains/${image}`} />;\r\n  //   return (activeTab === 5 ? null : <ReponsiveImage isAs={true} url={\"asset/video_pop_up.png\"} />);\r\n  // };\r\n\r\n  render() {\r\n    const { preview, toolData, activeTab  } = this.state;\r\n    return (\r\n      <ToolLayout>\r\n        {preview ? <Preview {...this.state} onClose={this.togglePreview} /> : null}\r\n        <div className=\"row\">\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className={activeTab === 5 ? \"col-md-12\" : \"col-md-6\"}>{this.renderMain()}</div>\r\n              <div className=\"col-md-6 mt-2\"></div>\r\n              <ButtonsGroup   \r\n               preview={() => {\r\n                this.setState({ preview: !preview });\r\n              }}\r\n              backUrl={this.back}\r\n              save={this.onClickSave} \r\n            />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <SideBar layout={toolData.layout} activeTab={activeTab} onChangeActive={this.onChangeActive} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}