{"ast":null,"code":"import React,{Component}from\"react\";import SideBar from\"./SideBar\";import ToolUtil,{generateIframeContant,getDefaultItems}from\"../../../../utils/ToolUtil\";import Util,{generateFile,parseImgUrl}from\"../../../Util\";import Text from\"./Text\";import Script from\"./Script\";import{ToolLayout,ButtonsGroup}from\"../../../layout/ToolLayout\";import{getPath,GET_PIXEL,SAVE_TOOL,GET_ONE_TOOL,BASE_URL}from\"../../../../actions/URLs\";import RequestHandler from\"../../../../actions/RequestHandler\";import{Modal}from\"antd\";import{LayoutSelector}from\"../../../layout/LayoutSelector\";import Code from\"./Code\";import{proofAppModalResponse,proofAppModal}from\"../../../utils/Modal\";import Preview from\"./Preview\";import{ReponsiveImage}from\"../../../comman/PreviewAble\";import Style from\"./Style\";import Display from\"./Display\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class OptinForm extends Component{constructor(){super(...arguments);this.state={toolName:\"\",toolId:\"\",preview:false,_id:null,activeTab:1,toolData:{text:\"bought the product\",subText:\"From\",duration:2,position:\"bottomLeft\",timeFirstUser:0,timeBetweenTwoUser:2},STYLE:{elements:[{name:\"titleColor\",text:\"Title\",color:\"#ed8a25\"},{name:\"subtitleColor\",text:\"Subtitle\",color:\"#292929\"},{name:\"logoColor\",text:\"Logo Color\",color:\"#292929\"}],selected:0,displayFrequency:\"\"},CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:null}]}};this.loaded=false;this.onChangeActive=tabIndex=>{const{activeTab}=this.state;if(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.onUpdate=(index,data)=>{switch(index){case 1:this.setState({toolData:{...this.state.toolData,...data}});break;case 3:this.setState({toolData:{...this.state.toolData,...data}});break;case 5:this.setState({STYLE:data});break;default:break;}};this.codeUpdate=data=>{this.setState({CODE:data});};this.renderMain=()=>{const{activeTab,toolData,CODE,STYLE}=this.state;let component=null;if(!this.loaded)return null;switch(activeTab){case 1:component=/*#__PURE__*/_jsx(Text,{text:toolData.text,subText:toolData.subText,timeFirstUser:toolData.timeFirstUser,timeBetweenTwoUser:toolData.timeBetweenTwoUser,cases:1,onChange:this.onUpdate});break;case 3:component=/*#__PURE__*/_jsx(Display,{toolData:toolData,cases:3,onChange:this.onUpdate});break;case 4:component=/*#__PURE__*/_jsx(Style,{...STYLE,cases:5,onChange:this.onUpdate});break;default:component=/*#__PURE__*/_jsx(Code,{...CODE,onChange:this.codeUpdate});break;}return component;};this.onClickSave=()=>{if(this.state.CODE.include[0].url!==\"\"){RequestHandler.PostRequest(SAVE_TOOL,{toolData:proofAppModal(this.state)},(res,err)=>{if(res){const data1=res.data;if(data1.success){if(data1.script){window.gs.setScript(data1.script);}else{Modal.success({content:data1.message});}setTimeout(()=>{this.props.history.push(\"/Campaigns\");},1000);}}});}else{Modal.warning({content:\"Should Contain atleast one trigger point\"});}};this.back=()=>{this.props.history.push(\"/Create\");window.gs.navTitle(\"Create\");};this.togglePreview=()=>{const{preview}=this.state;this.setState({preview:!preview});};}componentWillMount(){if(window.gs.ie){const ie=getDefaultItems(window.gs.ie);let{toolData}=this.state;this.state.toolData={...toolData,...ie};window.gs.ie=null;}}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{this.loaded=true;if(res){Util.isRedirected=true;const data=proofAppModalResponse(res);if(data){this.setState(data,()=>{window.gs.navTitle(ToolUtil.getTool(data.toolId)+\"  \"+\"(\"+data.name+\")\");});}}});}else{let toolId=25;this.loaded=true;this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId)+\"(\"+Util.CAMPAIGNS_NAME+\")\");}}// renderRight = () => {\n//   const { activeTab, image, video } = this.state;\n//   if (activeTab === 1 && video.url) return <ReponsiveImage isVideo={true} url={video.url} />;\n//   if (activeTab === 2 && image) return <ReponsiveImage isImg={true} url={`https://d257yxqteot439.cloudfront.net/static/contains/${image}`} />;\n//   return (activeTab === 5 ? null : <ReponsiveImage isAs={true} url={\"asset/video_pop_up.png\"} />);\n// };\nrender(){const{preview,toolData,activeTab}=this.state;return/*#__PURE__*/_jsxs(ToolLayout,{children:[preview?/*#__PURE__*/_jsx(Preview,{...this.state,onClose:this.togglePreview}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-10 toolItem\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:activeTab===5?\"col-md-12\":\"col-md-6\",children:this.renderMain()}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mt-2\"}),/*#__PURE__*/_jsx(ButtonsGroup,{preview:()=>{this.setState({preview:!preview});},backUrl:this.back,save:this.onClickSave})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 sideBarButtomPanel\",children:/*#__PURE__*/_jsx(SideBar,{layout:toolData.layout,activeTab:activeTab,onChangeActive:this.onChangeActive})})]})]});}}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/tools/ProofApp/index.js"],"names":["React","Component","SideBar","ToolUtil","generateIframeContant","getDefaultItems","Util","generateFile","parseImgUrl","Text","Script","ToolLayout","ButtonsGroup","getPath","GET_PIXEL","SAVE_TOOL","GET_ONE_TOOL","BASE_URL","RequestHandler","Modal","LayoutSelector","Code","proofAppModalResponse","proofAppModal","Preview","ReponsiveImage","Style","Display","OptinForm","state","toolName","toolId","preview","_id","activeTab","toolData","text","subText","duration","position","timeFirstUser","timeBetweenTwoUser","STYLE","elements","name","color","selected","displayFrequency","CODE","include","type","url","exclude","loaded","onChangeActive","tabIndex","setState","onUpdate","index","data","codeUpdate","renderMain","component","onClickSave","PostRequest","res","err","data1","success","script","window","gs","setScript","content","message","setTimeout","props","history","push","warning","back","navTitle","togglePreview","componentWillMount","ie","componentDidMount","id","match","params","isRedirected","getTool","CAMPAIGNS_NAME","RedirectWhenCampaignEmpty","render","layout"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,QAAP,EAAmBC,qBAAnB,CAA0CC,eAA1C,KAAiE,4BAAjE,CACA,MAAOC,CAAAA,IAAP,EAAeC,YAAf,CAA6BC,WAA7B,KAAgD,eAAhD,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,UAAT,CAAqBC,YAArB,KAAyC,4BAAzC,CACA,OAASC,OAAT,CAAkBC,SAAlB,CAA6BC,SAA7B,CAAwCC,YAAxC,CAAsDC,QAAtD,KAAsE,0BAAtE,CACA,MAAOC,CAAAA,cAAP,KAA2B,oCAA3B,CACA,OAASC,KAAT,KAAsB,MAAtB,CACA,OAASC,cAAT,KAA+B,gCAA/B,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,OAASC,qBAAT,CAAgCC,aAAhC,KAAqD,sBAArD,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAASC,cAAT,KAA+B,6BAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,wFAEA,cAAe,MAAMC,CAAAA,SAAN,QAAwB3B,CAAAA,SAAU,wCAC/C4B,KAD+C,CACvC,CACNC,QAAQ,CAAE,EADJ,CAENC,MAAM,CAAE,EAFF,CAGNC,OAAO,CAAE,KAHH,CAINC,GAAG,CAAE,IAJC,CAKNC,SAAS,CAAE,CALL,CAMNC,QAAQ,CAAE,CACRC,IAAI,CAAE,oBADE,CAERC,OAAO,CAAE,MAFD,CAGRC,QAAQ,CAAE,CAHF,CAIRC,QAAQ,CAAE,YAJF,CAKRC,aAAa,CAAE,CALP,CAMRC,kBAAkB,CAAE,CANZ,CANJ,CAcNC,KAAK,CAAE,CACLC,QAAQ,CAAE,CACR,CAAEC,IAAI,CAAE,YAAR,CAAsBR,IAAI,CAAE,OAA5B,CAAqCS,KAAK,CAAE,SAA5C,CADQ,CAER,CAAED,IAAI,CAAE,eAAR,CAAyBR,IAAI,CAAE,UAA/B,CAA2CS,KAAK,CAAE,SAAlD,CAFQ,CAGR,CAAED,IAAI,CAAE,WAAR,CAAqBR,IAAI,CAAE,YAA3B,CAAyCS,KAAK,CAAE,SAAhD,CAHQ,CADL,CAMLC,QAAQ,CAAE,CANL,CAOLC,gBAAgB,CAAC,EAPZ,CAdD,CAuBNC,IAAI,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,IAAI,CAAE,UAAR,CAAoBC,GAAG,CAAE,EAAzB,CAAD,CAAX,CAA4CC,OAAO,CAAE,CAAC,CAAEF,IAAI,CAAE,UAAR,CAAoBC,GAAG,CAAE,IAAzB,CAAD,CAArD,CAvBA,CADuC,MA0B/CE,MA1B+C,CA0BtC,KA1BsC,MA4D/CC,cA5D+C,CA4D7BC,QAAD,EAAc,CAC7B,KAAM,CAAErB,SAAF,EAAgB,KAAKL,KAA3B,CACA,GAAIK,SAAS,GAAKqB,QAAlB,CAA4B,CAC1B,KAAKC,QAAL,CAAc,CAAEtB,SAAS,CAAEqB,QAAb,CAAd,EACD,CACF,CAjE8C,MAmE/CE,QAnE+C,CAmEpC,CAACC,KAAD,CAAQC,IAAR,GAAiB,CAC1B,OAAQD,KAAR,EACE,IAAK,EAAL,CACI,KAAKF,QAAL,CAAc,CAAErB,QAAQ,CAAG,CAAE,GAAG,KAAKN,KAAL,CAAWM,QAAhB,CAA0B,GAAGwB,IAA7B,CAAb,CAAd,EACA,MACJ,IAAK,EAAL,CACI,KAAKH,QAAL,CAAc,CAAErB,QAAQ,CAAG,CAAE,GAAG,KAAKN,KAAL,CAAWM,QAAhB,CAA0B,GAAGwB,IAA7B,CAAb,CAAd,EACA,MACJ,IAAK,EAAL,CACI,KAAKH,QAAL,CAAc,CAAEd,KAAK,CAAGiB,IAAV,CAAd,EACA,MACJ,QACI,MAXN,CAaD,CAjF8C,MAmF/CC,UAnF+C,CAmFjCD,IAAD,EAAU,CACrB,KAAKH,QAAL,CAAc,CAAER,IAAI,CAAEW,IAAR,CAAd,EACD,CArF8C,MAuF/CE,UAvF+C,CAuFlC,IAAM,CACjB,KAAM,CAAE3B,SAAF,CAAaC,QAAb,CAAuBa,IAAvB,CAA6BN,KAA7B,EAAuC,KAAKb,KAAlD,CACA,GAAIiC,CAAAA,SAAS,CAAG,IAAhB,CACA,GAAI,CAAC,KAAKT,MAAV,CAAkB,MAAO,KAAP,CAClB,OAAQnB,SAAR,EACI,IAAK,EAAL,CACI4B,SAAS,cAAG,KAAC,IAAD,EAAM,IAAI,CAAE3B,QAAQ,CAACC,IAArB,CAA2B,OAAO,CAAED,QAAQ,CAACE,OAA7C,CAAsD,aAAa,CAAEF,QAAQ,CAACK,aAA9E,CAA6F,kBAAkB,CAAEL,QAAQ,CAACM,kBAA1H,CAA8I,KAAK,CAAE,CAArJ,CAAwJ,QAAQ,CAAE,KAAKgB,QAAvK,EAAZ,CACA,MACJ,IAAK,EAAL,CACIK,SAAS,cAAG,KAAC,OAAD,EAAS,QAAQ,CAAE3B,QAAnB,CAA6B,KAAK,CAAE,CAApC,CAAuC,QAAQ,CAAE,KAAKsB,QAAtD,EAAZ,CACA,MACJ,IAAK,EAAL,CACIK,SAAS,cAAG,KAAC,KAAD,KAAWpB,KAAX,CAAkB,KAAK,CAAE,CAAzB,CAA4B,QAAQ,CAAE,KAAKe,QAA3C,EAAZ,CACA,MACJ,QACIK,SAAS,cAAG,KAAC,IAAD,KAAUd,IAAV,CAAgB,QAAQ,CAAE,KAAKY,UAA/B,EAAZ,CACA,MAZR,CAcA,MAAOE,CAAAA,SAAP,CACD,CA1G8C,MA4G/CC,WA5G+C,CA4GjC,IAAM,CAClB,GAAI,KAAKlC,KAAL,CAAWmB,IAAX,CAAgBC,OAAhB,CAAwB,CAAxB,EAA2BE,GAA3B,GAAmC,EAAvC,CAA2C,CACzCjC,cAAc,CAAC8C,WAAf,CAA2BjD,SAA3B,CAAsC,CAAEoB,QAAQ,CAAEZ,aAAa,CAAC,KAAKM,KAAN,CAAzB,CAAtC,CAA+E,CAACoC,GAAD,CAAMC,GAAN,GAAc,CAC3F,GAAID,GAAJ,CAAS,CACP,KAAME,CAAAA,KAAK,CAAGF,GAAG,CAACN,IAAlB,CACA,GAAIQ,KAAK,CAACC,OAAV,CAAmB,CACjB,GAAID,KAAK,CAACE,MAAV,CAAkB,CAChBC,MAAM,CAACC,EAAP,CAAUC,SAAV,CAAoBL,KAAK,CAACE,MAA1B,EACD,CAFD,IAEO,CACLlD,KAAK,CAACiD,OAAN,CAAc,CACZK,OAAO,CAAEN,KAAK,CAACO,OADH,CAAd,EAGD,CACDC,UAAU,CAAC,IAAM,CACf,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB,EACD,CAFS,CAEP,IAFO,CAAV,CAGD,CACF,CACF,CAhBD,EAiBD,CAlBD,IAkBO,CACL3D,KAAK,CAAC4D,OAAN,CAAc,CACZN,OAAO,CAAE,0CADG,CAAd,EAGD,CACF,CApI8C,MAsI/CO,IAtI+C,CAsIxC,IAAM,CACX,KAAKJ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB,EACAR,MAAM,CAACC,EAAP,CAAUU,QAAV,CAAmB,QAAnB,EACD,CAzI8C,MA2I/CC,aA3I+C,CA2I/B,IAAM,CACpB,KAAM,CAAElD,OAAF,EAAc,KAAKH,KAAzB,CACA,KAAK2B,QAAL,CAAc,CAAExB,OAAO,CAAE,CAACA,OAAZ,CAAd,EACD,CA9I8C,EA4B/CmD,kBAAkB,EAAG,CACnB,GAAIb,MAAM,CAACC,EAAP,CAAUa,EAAd,CAAkB,CAChB,KAAMA,CAAAA,EAAE,CAAG/E,eAAe,CAACiE,MAAM,CAACC,EAAP,CAAUa,EAAX,CAA1B,CACA,GAAI,CAAEjD,QAAF,EAAe,KAAKN,KAAxB,CACA,KAAKA,KAAL,CAAWM,QAAX,CAAsB,CAAE,GAAGA,QAAL,CAAe,GAAGiD,EAAlB,CAAtB,CACAd,MAAM,CAACC,EAAP,CAAUa,EAAV,CAAe,IAAf,CACD,CACF,CAEDC,iBAAiB,EAAG,CAClB,KAAMC,CAAAA,EAAE,CAAG,KAAKV,KAAL,CAAWW,KAAX,CAAoB,KAAKX,KAAL,CAAWW,KAAX,CAAiBC,MAAjB,CAA0B,KAAKZ,KAAL,CAAWW,KAAX,CAAiBC,MAAjB,CAAwBF,EAAlD,CAAuD,IAA3E,CAAmF,IAA9F,CACA,GAAIA,EAAJ,CAAQ,CACNpE,cAAc,CAAC8C,WAAf,CAA2BhD,YAAY,CAAGsE,EAA1C,CAA8C,EAA9C,CAAkD,CAACrB,GAAD,CAAMC,GAAN,GAAc,CAC9D,KAAKb,MAAL,CAAc,IAAd,CACA,GAAIY,GAAJ,CAAS,CACP3D,IAAI,CAACmF,YAAL,CAAoB,IAApB,CACA,KAAM9B,CAAAA,IAAI,CAAGrC,qBAAqB,CAAC2C,GAAD,CAAlC,CACA,GAAIN,IAAJ,CAAU,CACR,KAAKH,QAAL,CAAcG,IAAd,CAAoB,IAAM,CACxBW,MAAM,CAACC,EAAP,CAAUU,QAAV,CAAmB9E,QAAQ,CAACuF,OAAT,CAAiB/B,IAAI,CAAC5B,MAAtB,EAAgC,IAAhC,CAAuC,GAAvC,CAA6C4B,IAAI,CAACf,IAAlD,CAAyD,GAA5E,EACD,CAFD,EAGD,CACF,CACF,CAXD,EAYD,CAbD,IAaO,CACL,GAAIb,CAAAA,MAAM,CAAG,EAAb,CAAiB,KAAKsB,MAAL,CAAc,IAAd,CACjB,KAAKG,QAAL,CAAc,CAAEzB,MAAM,CAAEA,MAAV,CAAkBD,QAAQ,CAAE3B,QAAQ,CAACuF,OAAT,CAAiB3D,MAAjB,CAA5B,CAAsDa,IAAI,CAAEtC,IAAI,CAACqF,cAAjE,CAAd,EACArF,IAAI,CAACsF,yBAAL,CAA+B,KAAKhB,KAApC,EACAN,MAAM,CAACC,EAAP,CAAUU,QAAV,CAAmB9E,QAAQ,CAACuF,OAAT,CAAiB3D,MAAjB,EAA2B,GAA3B,CAAiCzB,IAAI,CAACqF,cAAtC,CAAuD,GAA1E,EACD,CACF,CAsFD;AACA;AACA;AACA;AACA;AACA;AAEAE,MAAM,EAAG,CACP,KAAM,CAAE7D,OAAF,CAAWG,QAAX,CAAqBD,SAArB,EAAoC,KAAKL,KAA/C,CACA,mBACE,MAAC,UAAD,YACGG,OAAO,cAAG,KAAC,OAAD,KAAa,KAAKH,KAAlB,CAAyB,OAAO,CAAE,KAAKqD,aAAvC,EAAH,CAA8D,IADxE,cAEE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAEhD,SAAS,GAAK,CAAd,CAAkB,WAAlB,CAAgC,UAAhD,UAA6D,KAAK2B,UAAL,EAA7D,EADF,cAEE,YAAK,SAAS,CAAC,eAAf,EAFF,cAGE,KAAC,YAAD,EACC,OAAO,CAAE,IAAM,CACd,KAAKL,QAAL,CAAc,CAAExB,OAAO,CAAE,CAACA,OAAZ,CAAd,EACD,CAHD,CAIA,OAAO,CAAE,KAAKgD,IAJd,CAKA,IAAI,CAAE,KAAKjB,WALX,EAHF,GADF,EADF,cAcE,YAAK,SAAS,CAAC,0BAAf,uBACE,KAAC,OAAD,EAAS,MAAM,CAAE5B,QAAQ,CAAC2D,MAA1B,CAAkC,SAAS,CAAE5D,SAA7C,CAAwD,cAAc,CAAE,KAAKoB,cAA7E,EADF,EAdF,GAFF,GADF,CAuBD,CAhL8C","sourcesContent":["import React, { Component } from \"react\";\r\nimport SideBar from \"./SideBar\";\r\nimport ToolUtil, { generateIframeContant, getDefaultItems } from \"../../../../utils/ToolUtil\";\r\nimport Util, { generateFile, parseImgUrl } from \"../../../Util\";\r\nimport Text from \"./Text\";\r\nimport Script from \"./Script\";\r\nimport { ToolLayout, ButtonsGroup } from \"../../../layout/ToolLayout\";\r\nimport { getPath, GET_PIXEL, SAVE_TOOL, GET_ONE_TOOL, BASE_URL } from \"../../../../actions/URLs\";\r\nimport RequestHandler from \"../../../../actions/RequestHandler\";\r\nimport { Modal } from \"antd\";\r\nimport { LayoutSelector } from \"../../../layout/LayoutSelector\";\r\nimport Code from \"./Code\";\r\nimport { proofAppModalResponse, proofAppModal } from \"../../../utils/Modal\";\r\nimport Preview from \"./Preview\";\r\nimport { ReponsiveImage } from \"../../../comman/PreviewAble\";\r\nimport Style from \"./Style\";\r\nimport Display from \"./Display\";\r\n\r\nexport default class OptinForm extends Component {\r\n  state = {\r\n    toolName: \"\",\r\n    toolId: \"\",\r\n    preview: false,\r\n    _id: null,\r\n    activeTab: 1,\r\n    toolData: {\r\n      text: \"bought the product\",\r\n      subText: \"From\",\r\n      duration: 2,\r\n      position: \"bottomLeft\",\r\n      timeFirstUser: 0,\r\n      timeBetweenTwoUser: 2,\r\n    },\r\n    STYLE: {\r\n      elements: [\r\n        { name: \"titleColor\", text: \"Title\", color: \"#ed8a25\" },\r\n        { name: \"subtitleColor\", text: \"Subtitle\", color: \"#292929\" },\r\n        { name: \"logoColor\", text: \"Logo Color\", color: \"#292929\" },\r\n      ],\r\n      selected: 0,\r\n      displayFrequency:\"\"\r\n    },\r\n    CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: null }] }\r\n  };\r\n  loaded = false;\r\n\r\n  componentWillMount() {\r\n    if (window.gs.ie) {\r\n      const ie = getDefaultItems(window.gs.ie);\r\n      let { toolData } = this.state;\r\n      this.state.toolData = { ...toolData, ...ie };\r\n      window.gs.ie = null;\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        this.loaded = true;\r\n        if (res) {\r\n          Util.isRedirected = true;\r\n          const data = proofAppModalResponse(res);\r\n          if (data) {\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"  \" + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      let toolId = 25; this.loaded = true;\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n    }\r\n  }\r\n\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n\r\n  onUpdate = (index, data) => {\r\n    switch (index) {\r\n      case 1:\r\n          this.setState({ toolData : { ...this.state.toolData, ...data} });\r\n          break;\r\n      case 3:\r\n          this.setState({ toolData : { ...this.state.toolData, ...data} });\r\n          break;\r\n      case 5:\r\n          this.setState({ STYLE : data });\r\n          break;\r\n      default:\r\n          break;\r\n    }\r\n  };\r\n\r\n  codeUpdate = (data) => {\r\n    this.setState({ CODE: data });\r\n  }\r\n\r\n  renderMain = () => {\r\n    const { activeTab, toolData, CODE, STYLE } = this.state;\r\n    let component = null;\r\n    if (!this.loaded) return null;\r\n    switch (activeTab) {\r\n        case 1:\r\n            component = <Text text={toolData.text} subText={toolData.subText} timeFirstUser={toolData.timeFirstUser} timeBetweenTwoUser={toolData.timeBetweenTwoUser} cases={1} onChange={this.onUpdate} />;\r\n            break;\r\n        case 3:\r\n            component = <Display toolData={toolData} cases={3} onChange={this.onUpdate} />;\r\n            break;\r\n        case 4:\r\n            component = <Style {...STYLE} cases={5} onChange={this.onUpdate} />;\r\n            break;\r\n        default:\r\n            component = <Code {...CODE} onChange={this.codeUpdate} />\r\n            break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      RequestHandler.PostRequest(SAVE_TOOL, { toolData: proofAppModal(this.state) }, (res, err) => {\r\n        if (res) {\r\n          const data1 = res.data;\r\n          if (data1.success) {\r\n            if (data1.script) {\r\n              window.gs.setScript(data1.script);\r\n            } else {\r\n              Modal.success({\r\n                content: data1.message,\r\n              });\r\n            }\r\n            setTimeout(() => {\r\n              this.props.history.push(\"/Campaigns\");\r\n            }, 1000);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  back = () => {\r\n    this.props.history.push(\"/Create\");\r\n    window.gs.navTitle(\"Create\")\r\n  };\r\n\r\n  togglePreview = () => {\r\n    const { preview } = this.state;\r\n    this.setState({ preview: !preview });\r\n  };\r\n\r\n  // renderRight = () => {\r\n  //   const { activeTab, image, video } = this.state;\r\n  //   if (activeTab === 1 && video.url) return <ReponsiveImage isVideo={true} url={video.url} />;\r\n  //   if (activeTab === 2 && image) return <ReponsiveImage isImg={true} url={`https://d257yxqteot439.cloudfront.net/static/contains/${image}`} />;\r\n  //   return (activeTab === 5 ? null : <ReponsiveImage isAs={true} url={\"asset/video_pop_up.png\"} />);\r\n  // };\r\n\r\n  render() {\r\n    const { preview, toolData, activeTab  } = this.state;\r\n    return (\r\n      <ToolLayout>\r\n        {preview ? <Preview {...this.state} onClose={this.togglePreview} /> : null}\r\n        <div className=\"row\">\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className={activeTab === 5 ? \"col-md-12\" : \"col-md-6\"}>{this.renderMain()}</div>\r\n              <div className=\"col-md-6 mt-2\"></div>\r\n              <ButtonsGroup   \r\n               preview={() => {\r\n                this.setState({ preview: !preview });\r\n              }}\r\n              backUrl={this.back}\r\n              save={this.onClickSave} \r\n            />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <SideBar layout={toolData.layout} activeTab={activeTab} onChangeActive={this.onChangeActive} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}