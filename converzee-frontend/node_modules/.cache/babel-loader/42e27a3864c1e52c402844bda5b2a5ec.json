{"ast":null,"code":"import React,{Component}from\"react\";import{Redirect}from\"react-router-dom\";import\"./Campaigns.css\";import RequestHandler from\"../../actions/RequestHandler\";import{GET_CAMPAIGNS,CLONE_TOOL,ARCHIVE_TOOL,PURGE_TOOL,getPath,DOWNLOAD_DATA}from\"../../actions/URLs\";import ToolUtil,{exportCSVFile}from\"../../utils/ToolUtil\";import{EMAIL_SEND}from\"../../utils/Routes\";import{Filter}from\"../comman/Filter\";import{CampignItem}from\"../layout/ToolLayout\";import{Link}from\"react-router-dom\";import{createElement as _createElement}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class Campaigns extends Component{constructor(){var _this;super(...arguments);_this=this;this.toolId=0;this.url=null;this.state={items:[],emails:[],isRedirect:false,isopenFilter:false,searchStr:\"\"};this.getCampaigns=function(){let data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};RequestHandler.PostRequest(GET_CAMPAIGNS,{searchData:data},(res,err)=>{if(res){const items=res.data.campaigns;_this.setState({items});}});};this.cloneRequest=id=>{RequestHandler.PostRequest(CLONE_TOOL+id,{},(res,err)=>{if(res){window.gs.toast(\"Clone Success\",{position:\"bottom-right\",type:window.gs.toast.TYPE.SUCCESS});this.getCampaigns();}});};this.archiveRequest=id=>{RequestHandler.PostRequest(ARCHIVE_TOOL+id,{},(res,err)=>{if(res){window.gs.toast(\"Successfully\",{position:\"bottom-right\",type:window.gs.toast.TYPE.SUCCESS});this.getCampaigns();}});};this.purgeTool=id=>{RequestHandler.PostRequest(PURGE_TOOL+id,{},(res,err)=>{if(res){window.gs.toast(\"Archive Success\",{position:\"bottom-right\",type:window.gs.toast.TYPE.SUCCESS});this.getCampaigns();}});};this.downloadData=id=>{RequestHandler.PostRequest(DOWNLOAD_DATA+id,{},(res,err)=>{if(res){const{data}=res.data;if(data){exportCSVFile(data,\"converzee\");}}});};this.onClickAction=(id,toolId,action)=>{if(action==\"CLONE\"){if(!ToolUtil.isUpgrade1&&!window.isAdvancedOpt){window.gs.sayUpdate(null,false,ToolUtil.linksList?ToolUtil.linksList.oto2:\"\");return;}}this.getToolurl(toolId,id);switch(action){case\"EDIT\":this.setState({isRedirect:true});break;case\"CLONE\":this.cloneRequest(id);break;case\"ARCHIVE\":this.purgeTool(id);break;case\"STATUS\":this.archiveRequest(id);break;case\"SEND\":this.setState({isRedirect:true});break;default:this.setState({isRedirect:true});break;}};this.renderListItems=(item,i)=>{const items={...item,onClickAction:this.onClickAction,archiveRequest:this.archiveRequest,downloadData:this.downloadData,isLock:ToolUtil.isUpgrade1&&window.isAdvancedOpt?false:true};return/*#__PURE__*/_createElement(CampignItem,{...items,key:i});};this.openFilterClick=()=>{if(!ToolUtil.isUpgrade1||!window.isAdvancedOpt){window.gs.sayUpdate(null,false,ToolUtil.linksList?ToolUtil.linksList.oto2:\"\");return;}this.setState({isopenFilter:true});};this.onFilterClose=()=>{this.setState({isopenFilter:false});};this.onFilterChange=filters=>{if(!ToolUtil.isUpgrade1||!window.isAdvancedOpt){window.gs.sayUpdate(null,false,ToolUtil.linksList?ToolUtil.linksList.oto2:\"\");return;}const{searchStr}=this.state;if(searchStr!==\"\")filters[\"searchStr\"]=searchStr;this.getCampaigns(filters);};this.onSearchClick=()=>{const{searchStr}=this.state;this.getCampaigns({searchStr});};this.onSearchChange=e=>{this.setState({searchStr:e.target.value});};this.onSortingChange=istrue=>{this.setState({sorting:istrue?1:0});};this.PressEnter=e=>{if(e.keyCode===13)this.onSearchClick();};this.resetSearch=()=>{this.setState({searchStr:\"\"},()=>this.onSearchClick());};}componentDidMount(){window.gs.navTitle(\"Campaigns\");this.getCampaigns();}componentDidUpdate(){let sidebar=document.querySelectorAll(\".sidebar_content\");sidebar.forEach(sd=>{if(sd.getAttribute(\"title\")===\"Campaigns\"){if(!sd.classList.contains(\"nav-active\")){sd.classList.add(\"nav-active\");}}else{sd.classList.remove(\"nav-active\");}});}getToolurl(toolId,id){if(toolId)this.url=ToolUtil.getToolData(toolId).url+\"/\"+id||null;else this.url=EMAIL_SEND+\"/\"+id||null;}render(){const{items,isRedirect,isopenFilter,searchStr}=this.state;const url=this.url;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",name:\"Campaigns\",children:[/*#__PURE__*/_jsx(Filter,{visible:isopenFilter,onChangeFilter:this.onFilterChange,onClose:this.onFilterClose}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 col-sm-2 d-none d-sm-block\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 col-sm-8 camp_filterItem1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pull-right input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control search-field\",onKeyUp:this.PressEnter,value:searchStr,onChange:this.onSearchChange,placeholder:\"Search By Campaign Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text search-icon\",onClick:this.onSearchClick,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-search\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 col-sm-2 camp_filterItem2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pull-right\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm filter-btn\",onClick:this.openFilterClick,children:[/*#__PURE__*/_jsx(\"span\",{className:\"d-block d-sm-none\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-filter\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-none d-sm-block\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-filter\"}),\"Filter\"]})]})})})]}),!items.length?/*#__PURE__*/_jsxs(\"div\",{className:\"cz_empty_box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"No campaigns available right now\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You have not created any campaigns so far. Click on the button below to create a campaign.\"}),/*#__PURE__*/_jsx(Link,{className:\"cz_btn cz_orange_btn\",to:\"/Create\",children:\"Create Campaign\"})]}):null,isRedirect&&url?/*#__PURE__*/_jsx(Redirect,{to:url}):null,items.map(this.renderListItems)]});}}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/Campaigns.js"],"names":["React","Component","Redirect","RequestHandler","GET_CAMPAIGNS","CLONE_TOOL","ARCHIVE_TOOL","PURGE_TOOL","getPath","DOWNLOAD_DATA","ToolUtil","exportCSVFile","EMAIL_SEND","Filter","CampignItem","Link","Campaigns","toolId","url","state","items","emails","isRedirect","isopenFilter","searchStr","getCampaigns","data","PostRequest","searchData","res","err","campaigns","setState","cloneRequest","id","window","gs","toast","position","type","TYPE","SUCCESS","archiveRequest","purgeTool","downloadData","onClickAction","action","isUpgrade1","isAdvancedOpt","sayUpdate","linksList","oto2","getToolurl","renderListItems","item","i","isLock","openFilterClick","onFilterClose","onFilterChange","filters","onSearchClick","onSearchChange","e","target","value","onSortingChange","istrue","sorting","PressEnter","keyCode","resetSearch","componentDidMount","navTitle","componentDidUpdate","sidebar","document","querySelectorAll","forEach","sd","getAttribute","classList","contains","add","remove","getToolData","render","length","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport \"./Campaigns.css\";\r\nimport RequestHandler from \"../../actions/RequestHandler\";\r\nimport { GET_CAMPAIGNS, CLONE_TOOL, ARCHIVE_TOOL, PURGE_TOOL, getPath, DOWNLOAD_DATA } from \"../../actions/URLs\";\r\nimport ToolUtil, { exportCSVFile } from \"../../utils/ToolUtil\";\r\nimport { EMAIL_SEND } from \"../../utils/Routes\";\r\nimport { Filter } from \"../comman/Filter\";\r\nimport { CampignItem } from \"../layout/ToolLayout\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default class Campaigns extends Component {\r\n  toolId = 0;\r\n  url = null;\r\n  state = {\r\n    items: [],\r\n    emails: [],\r\n    isRedirect: false,\r\n    isopenFilter: false,\r\n    searchStr: \"\",\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.gs.navTitle(\"Campaigns\");\r\n    this.getCampaigns(); \r\n  }\r\n  componentDidUpdate() {\r\n    let sidebar = document.querySelectorAll(\".sidebar_content\");\r\n    sidebar.forEach(sd => {\r\n      if(sd.getAttribute(\"title\") === \"Campaigns\") {\r\n        if(!sd.classList.contains(\"nav-active\")) {\r\n          sd.classList.add(\"nav-active\");\r\n        }\r\n      } else {\r\n        sd.classList.remove(\"nav-active\");\r\n      }\r\n    });\r\n  }\r\n  getCampaigns = (data = {}) => {\r\n    RequestHandler.PostRequest(GET_CAMPAIGNS, { searchData: data }, (res, err) => {\r\n      if (res) {\r\n        const items = res.data.campaigns;\r\n        this.setState({ items });\r\n      }\r\n    });\r\n  };\r\n\r\n  getToolurl(toolId, id) {\r\n    if (toolId) this.url = ToolUtil.getToolData(toolId).url + \"/\" + id || null;\r\n    else this.url = EMAIL_SEND + \"/\" + id || null;\r\n  }\r\n\r\n  cloneRequest = (id) => {\r\n    RequestHandler.PostRequest(CLONE_TOOL + id, {}, (res, err) => {\r\n      if (res) {\r\n        window.gs.toast(\"Clone Success\", { position: \"bottom-right\", type: window.gs.toast.TYPE.SUCCESS });\r\n        this.getCampaigns();\r\n      }\r\n    });\r\n  };\r\n\r\n  archiveRequest = (id) => {\r\n    RequestHandler.PostRequest(ARCHIVE_TOOL + id, {}, (res, err) => {\r\n      if (res) {\r\n        window.gs.toast(\"Successfully\", { position: \"bottom-right\", type: window.gs.toast.TYPE.SUCCESS });\r\n        this.getCampaigns();\r\n      }\r\n    });\r\n  };\r\n\r\n  purgeTool = (id) => {\r\n    RequestHandler.PostRequest(PURGE_TOOL + id, {}, (res, err) => {\r\n      if (res) {\r\n        window.gs.toast(\"Archive Success\", { position: \"bottom-right\", type: window.gs.toast.TYPE.SUCCESS });\r\n        this.getCampaigns();\r\n      }\r\n    });\r\n  };\r\n\r\n  downloadData = (id) => {\r\n    RequestHandler.PostRequest(DOWNLOAD_DATA + id, {}, (res, err) => {\r\n      if (res) {\r\n        const { data } = res.data;\r\n        if (data) {\r\n          exportCSVFile(data, \"converzee\");\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  onClickAction = (id, toolId, action) => {\r\n    if (action == \"CLONE\") {\r\n      if (!ToolUtil.isUpgrade1 && !window.isAdvancedOpt) {\r\n        window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\r\n        return;\r\n      }\r\n    }\r\n    this.getToolurl(toolId, id);\r\n    switch (action) {\r\n      case \"EDIT\":\r\n        this.setState({ isRedirect: true });\r\n        break;\r\n      case \"CLONE\":\r\n        this.cloneRequest(id);\r\n        break;\r\n      case \"ARCHIVE\":\r\n        this.purgeTool(id);\r\n        break;\r\n      case \"STATUS\":\r\n        this.archiveRequest(id);\r\n        break;\r\n      case \"SEND\":\r\n        this.setState({ isRedirect: true });\r\n        break;\r\n      default:\r\n        this.setState({ isRedirect: true });\r\n        break;\r\n    }\r\n  };\r\n\r\n  renderListItems = (item, i) => {\r\n    const items = {\r\n      ...item,\r\n      onClickAction: this.onClickAction,\r\n      archiveRequest: this.archiveRequest,\r\n      downloadData: this.downloadData,\r\n      isLock: (ToolUtil.isUpgrade1 && window.isAdvancedOpt) ? false : true,\r\n    };\r\n    return <CampignItem {...items} key={i} />;\r\n  };\r\n\r\n  openFilterClick = () => {\r\n    if (!ToolUtil.isUpgrade1 || !window.isAdvancedOpt) {\r\n      window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\r\n      return;\r\n    }\r\n    this.setState({ isopenFilter: true });\r\n  };\r\n\r\n  onFilterClose = () => {\r\n    this.setState({ isopenFilter: false });\r\n  };\r\n\r\n  onFilterChange = (filters) => {\r\n    if (!ToolUtil.isUpgrade1 || !window.isAdvancedOpt) {\r\n      window.gs.sayUpdate(null, false, ToolUtil.linksList ? ToolUtil.linksList.oto2 : \"\");\r\n      return;\r\n    }\r\n    const { searchStr } = this.state;\r\n    if (searchStr !== \"\") filters[\"searchStr\"] = searchStr;\r\n    this.getCampaigns(filters);\r\n  };\r\n\r\n  onSearchClick = () => {\r\n    const { searchStr } = this.state;\r\n    this.getCampaigns({ searchStr });\r\n  };\r\n\r\n  onSearchChange = (e) => {\r\n    this.setState({ searchStr: e.target.value });\r\n  };\r\n\r\n  onSortingChange = (istrue) => {\r\n    this.setState({ sorting: istrue ? 1 : 0 });\r\n  };\r\n\r\n  PressEnter = (e) => {\r\n    if (e.keyCode === 13) this.onSearchClick();\r\n  };\r\n\r\n  resetSearch = () => {\r\n    this.setState({ searchStr: \"\" }, () => this.onSearchClick());\r\n  };\r\n\r\n  render() {\r\n    const { items, isRedirect, isopenFilter, searchStr } = this.state;\r\n    const url = this.url;\r\n    return (\r\n      <div className=\"container\" name=\"Campaigns\">\r\n        <Filter visible={isopenFilter} onChangeFilter={this.onFilterChange} onClose={this.onFilterClose} />\r\n        \r\n        <div className=\"row\">\r\n          <div className=\"col-md-3 col-sm-2 d-none d-sm-block\"></div>\r\n          <div className=\"col-md-5 col-sm-8 camp_filterItem1\">\r\n            <div className=\"pull-right input-group mb-3\">\r\n              <input type=\"text\" className=\"form-control search-field\" onKeyUp={this.PressEnter} value={searchStr} onChange={this.onSearchChange} placeholder=\"Search By Campaign Name\" />\r\n              <div className=\"input-group-append\">\r\n                <span className=\"input-group-text search-icon\" onClick={this.onSearchClick}>\r\n                  <i className=\"fa fa-search\"></i>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-4 col-sm-2 camp_filterItem2\">\r\n            <div className=\"pull-right\">\r\n              <button className=\"btn btn-sm filter-btn\" onClick={this.openFilterClick}>\r\n                <span className=\"d-block d-sm-none\">\r\n                  <i className=\"fa fa-filter\"></i>\r\n                </span>\r\n                <span className=\"d-none d-sm-block\">\r\n                  <i className=\"fa fa-filter\"></i>Filter\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>  \r\n        { !items.length ? \r\n        <div className=\"cz_empty_box\">\r\n          <h2>No campaigns available right now</h2>\r\n          <p>You have not created any campaigns so far. Click on the button below to create a campaign.</p>\r\n          <Link className=\"cz_btn cz_orange_btn\" to=\"/Create\">Create Campaign</Link>\r\n        </div> : null}\r\n        {isRedirect && url ? <Redirect to={url} /> : null}\r\n        {items.map(this.renderListItems)}\r\n      </div> \r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}