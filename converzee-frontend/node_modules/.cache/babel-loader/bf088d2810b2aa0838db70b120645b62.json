{"ast":null,"code":"import React,{Component}from\"react\";import\"./index.css\";import CreateSideBar from\"./CreateSideBar\";import CreateText from\"./CreateText\";import Code from\"./Code\";import Style from\"./Style\";import Layout from\"./Layout\";import Timer from\"./Timer\";import CTA from\"./CTA\";import RequestHandler from\"../../../../actions/RequestHandler\";import{SAVE_TOOL,GET_ONE_TOOL,getPath}from\"../../../../actions/URLs\";import ToolUtil from\"../../../../utils/ToolUtil\";import Util from\"../../../Util\";import Preview from\"./Preview\";import{HelloBarTimerModalResponse,HelloBarTimerModal}from\"../../../utils/Modal\";import{ButtonsGroup,ToolLayout}from\"../../../layout/ToolLayout\";import{Modal}from\"antd\";import{ReponsiveImage}from\"../../../comman/PreviewAble\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const helloBarTimerr={toolName:\"\",activeTab:4,create:{campaignName:Util.CAMPAIGNS_NAME,helloBarPos:\"top\",textBody:\"Hurry! Coupon Expires in...\",cpCode:\"CODE\",codeText:\"\"},cta:{ctaText:\"GET ACCESS NOW!\",ctaAction:\"redirect\",redirectUrl:\"\"},timer:{timerType:\"DATE_AND_TIME_BASED\",endDateTime:new Date(),timeZone:Util.getTimeZoneList()[0].value,redirectUrl:\"\",whenTimeExp:\"redirect\",DD:0,HH:0,MM:0,SS:0},layout:0,STYLE:{elements:[{name:\"highlight\",text:\"HelloBar Background\",color:\"#420068\"},{name:\"highlightBackground\",text:\"CTA Background\",color:\"#ffcc00\"},{name:\"arrowBackground\",text:\"Arrow Background\",color:\"#210b45\"},{name:\"timerBox\",text:\"Timer Box\",color:\"#000\"},{name:\"timerTextColor\",text:\"Timer Color\",color:\"#fff\"}],selected:0},CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:\"\"}]},file:{file:[]},toolId:0,status:true,openPopUp:false,popUpScript:\"\",preview:false,_id:null// templateType: null\n};export default class HelloBar extends Component{constructor(){super(...arguments);this.toolId=0;this.state=helloBarTimerr;this.loaded=false;this.onChangeActive=tabIndex=>{const{activeTab}=this.state;if(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.onUpdate=(index,data)=>{switch(index){case 1:this.setState({create:data});break;case 2:this.setState({cta:data});break;case 3:this.setState({timer:data});break;case 4:this.changeHelloBarTimerSetting(data);// this.setState({ layout: data });\nbreak;case 5:this.setState({STYLE:data});break;case 6:this.setState({CODE:data});break;case 7:this.setState({file:data});break;default:break;}};this.changeHelloBarTimerSetting=data=>{if(this.state._id){if(data===this.editedData.layout){this.setState({...this.editedData,layout:data});}else{this.changeLayoutProperties(data);}}else{this.changeLayoutProperties(data);}};this.changeLayoutProperties=data=>{if(data===2){helloBarTimerr.STYLE.elements[0].color=\"#dc3747\";helloBarTimerr.STYLE.elements[1].color=\"#000000\";helloBarTimerr.STYLE.elements[2].color=\"#210b45\";helloBarTimerr.create.textBody=\"Grab it right now! <br> Coupon Expires in...\";this.setState({...this.state,STYLE:helloBarTimerr.STYLE,create:{...helloBarTimerr.create,textBody:helloBarTimerr.create.textBody},layout:data});}else if(data===1){helloBarTimerr.STYLE.elements[0].color=\"#006820\";helloBarTimerr.STYLE.elements[1].color=\"#012f0f\";helloBarTimerr.STYLE.elements[2].color=\"#012f0f\";helloBarTimerr.create.textBody=\"Grab it right now! <br> Coupon Expires in...\";this.setState({...this.state,STYLE:helloBarTimerr.STYLE,create:{...helloBarTimerr.create,textBody:helloBarTimerr.create.textBody},layout:data});}else{helloBarTimerr.STYLE.elements[0].color=\"#420068\";helloBarTimerr.STYLE.elements[1].color=\"#ffcc00\";helloBarTimerr.STYLE.elements[2].color=\"#210b44\";helloBarTimerr.create.textBody=\"Hurry! Coupon Expires in...\";this.setState({...this.state,STYLE:helloBarTimerr.STYLE,create:{...helloBarTimerr.create,textBody:helloBarTimerr.create.textBody},layout:data});}};this.renderMain=()=>{const{activeTab,create,cta,timer,layout,STYLE,CODE,file}=this.state;if(!this.loaded)return null;let component=null;switch(activeTab){case 1:component=/*#__PURE__*/_jsx(CreateText,{...create,layout:layout,cases:1,onChange:this.onUpdate});break;case 2:component=/*#__PURE__*/_jsx(CTA,{...cta,cases:2,onChange:this.onUpdate});break;case 3:component=/*#__PURE__*/_jsx(Timer,{...timer,cases:3,onChange:this.onUpdate});break;case 4:component=/*#__PURE__*/_jsx(Layout,{layout:layout,cases:4,onChange:this.onUpdate});break;case 5:component=/*#__PURE__*/_jsx(Style,{...STYLE,layout:layout,cases:5,onChange:this.onUpdate});break;case 6:component=/*#__PURE__*/_jsx(Code,{...CODE,cases:6,onChange:this.onUpdate});break;default:component=/*#__PURE__*/_jsx(CreateText,{...create,onChange:this.onUpdate});break;}return component;};this.onClickSave=()=>{const toolData=this.state;if(this.state.CODE.include[0].url!==\"\"){if(!Util.isArrayEqual(helloBarTimerr,this.state,3)){RequestHandler.PostRequest(SAVE_TOOL,{toolData:HelloBarTimerModal(toolData)},(res,err)=>{if(res){if(res.data.success){Modal.success({content:\"Campaign Save SuccessFully\"});setTimeout(()=>{this.props.history.push(\"/Campaigns\");},1000);}else{window.gs.toast(res.data.message,{position:\"bottom-right\",type:window.gs.toast.TYPE.FAILED});}}else{console.log(err);}});}}else{Modal.warning({content:\"Should Contain atleast one trigger point\"});}};this.closePopup=()=>{this.setState({openPopUp:false,success:false});this.props.history.push(\"/\");};this.setTemplate=i=>{this.setState({templateType:i});};this.onDrawerClose=()=>{if(this.state.visible)this.setState({visible:false});else this.setState({visible:true});};this.renderRight=()=>{const{layout}=this.state;if(layout===0)return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/hbt1.png\"});if(layout===1)return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/hbt2.png\"});return/*#__PURE__*/_jsx(ReponsiveImage,{isAs:true,url:\"asset/hbt3.png\"});};this.back=()=>{this.props.history.push(\"/Create\");};}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{this.loaded=true;if(res){Util.isRedirected=true;const data=HelloBarTimerModalResponse(res);if(data){this.editedData=data;this.setState(data,()=>{window.gs.navTitle(ToolUtil.getTool(data.toolId)+\"(\"+data.name+\")\");});}}});}else{const toolId=17;this.loaded=true;this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId)+\"(\"+Util.CAMPAIGNS_NAME+\")\");}}render(){const itemId=this.props.location.state;const{preview}=this.state;return/*#__PURE__*/_jsx(ToolLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[preview?/*#__PURE__*/_jsx(Preview,{...this.state}):null,/*#__PURE__*/_jsx(\"div\",{className:\"col-10 toolItem\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:this.renderMain()}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mt-2\",children:this.renderRight()}),/*#__PURE__*/_jsx(ButtonsGroup,{preview:()=>{this.setState({preview:!preview});},backUrl:this.back,save:this.onClickSave})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 sideBarButtomPanel\",children:/*#__PURE__*/_jsx(CreateSideBar,{activeTab:this.state.activeTab,onChangeActive:this.onChangeActive,...itemId})})]})});}}HelloBar.CAMPAIGNS_NAME=\"\";","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/tools/HelloBarTimer/index.js"],"names":["React","Component","CreateSideBar","CreateText","Code","Style","Layout","Timer","CTA","RequestHandler","SAVE_TOOL","GET_ONE_TOOL","getPath","ToolUtil","Util","Preview","HelloBarTimerModalResponse","HelloBarTimerModal","ButtonsGroup","ToolLayout","Modal","ReponsiveImage","helloBarTimerr","toolName","activeTab","create","campaignName","CAMPAIGNS_NAME","helloBarPos","textBody","cpCode","codeText","cta","ctaText","ctaAction","redirectUrl","timer","timerType","endDateTime","Date","timeZone","getTimeZoneList","value","whenTimeExp","DD","HH","MM","SS","layout","STYLE","elements","name","text","color","selected","CODE","include","type","url","exclude","file","toolId","status","openPopUp","popUpScript","preview","_id","HelloBar","state","loaded","onChangeActive","tabIndex","setState","onUpdate","index","data","changeHelloBarTimerSetting","editedData","changeLayoutProperties","renderMain","component","onClickSave","toolData","isArrayEqual","PostRequest","res","err","success","content","setTimeout","props","history","push","window","gs","toast","message","position","TYPE","FAILED","console","log","warning","closePopup","setTemplate","i","templateType","onDrawerClose","visible","renderRight","back","componentDidMount","id","match","params","isRedirected","navTitle","getTool","RedirectWhenCampaignEmpty","render","itemId","location"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./index.css\";\r\nimport CreateSideBar from \"./CreateSideBar\";\r\nimport CreateText from \"./CreateText\";\r\nimport Code from \"./Code\";\r\nimport Style from \"./Style\";\r\nimport Layout from \"./Layout\";\r\nimport Timer from \"./Timer\";\r\nimport CTA from \"./CTA\";\r\nimport RequestHandler from \"../../../../actions/RequestHandler\";\r\nimport { SAVE_TOOL, GET_ONE_TOOL, getPath } from \"../../../../actions/URLs\";\r\nimport ToolUtil from \"../../../../utils/ToolUtil\";\r\nimport Util from \"../../../Util\";\r\nimport Preview from \"./Preview\";\r\nimport { HelloBarTimerModalResponse, HelloBarTimerModal } from \"../../../utils/Modal\";\r\nimport { ButtonsGroup, ToolLayout } from \"../../../layout/ToolLayout\";\r\nimport { Modal } from \"antd\";\r\nimport { ReponsiveImage } from \"../../../comman/PreviewAble\";\r\n\r\nconst helloBarTimerr = {\r\n  toolName: \"\",\r\n  activeTab: 4,\r\n  create: { campaignName: Util.CAMPAIGNS_NAME, helloBarPos: \"top\", textBody: \"Hurry! Coupon Expires in...\", cpCode: \"CODE\", codeText: \"\" },\r\n  cta: { ctaText: \"GET ACCESS NOW!\", ctaAction: \"redirect\", redirectUrl: \"\" },\r\n  timer: { timerType: \"DATE_AND_TIME_BASED\", endDateTime: new Date(), timeZone: Util.getTimeZoneList()[0].value, redirectUrl: \"\", whenTimeExp: \"redirect\", DD: 0, HH: 0, MM: 0, SS: 0 },\r\n  layout: 0,\r\n  STYLE: {\r\n    elements: [\r\n      { name: \"highlight\", text: \"HelloBar Background\", color: \"#420068\" },\r\n      { name: \"highlightBackground\", text: \"CTA Background\", color: \"#ffcc00\" },\r\n      { name: \"arrowBackground\", text: \"Arrow Background\", color: \"#210b45\" },\r\n      { name: \"timerBox\", text: \"Timer Box\", color: \"#000\" },\r\n      { name: \"timerTextColor\", text: \"Timer Color\", color: \"#fff\" },\r\n    ],\r\n    selected: 0,\r\n  },\r\n  CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: \"\" }] },\r\n  file: { file: [] },\r\n  toolId: 0,\r\n  status: true,\r\n  openPopUp: false,\r\n  popUpScript: \"\",\r\n  preview: false,\r\n  _id: null,\r\n  // templateType: null\r\n};\r\nexport default class HelloBar extends Component {\r\n  static CAMPAIGNS_NAME = \"\";\r\n  toolId = 0;\r\n  state = helloBarTimerr;\r\n  loaded = false;\r\n  editedData ;\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        this.loaded = true;\r\n        if (res) {\r\n          Util.isRedirected = true;\r\n          const data = HelloBarTimerModalResponse(res);\r\n          if (data) {\r\n            this.editedData = data;\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      const toolId = 17;\r\n      this.loaded = true;\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n    }\r\n  }\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n  onUpdate = (index, data) => {\r\n    switch (index) {\r\n      case 1:\r\n        this.setState({ create: data });\r\n        break;\r\n      case 2:\r\n        this.setState({ cta: data });\r\n        break;\r\n      case 3:\r\n        this.setState({ timer: data });\r\n        break;\r\n      case 4:\r\n        this.changeHelloBarTimerSetting(data);\r\n        // this.setState({ layout: data });\r\n        break;\r\n      case 5:\r\n        this.setState({ STYLE: data });\r\n        break;\r\n      case 6:\r\n        this.setState({ CODE: data });\r\n        break;\r\n      case 7:\r\n        this.setState({ file: data });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  changeHelloBarTimerSetting = (data) => {\r\n    if(this.state._id) {\r\n      if(data === this.editedData.layout) {\r\n        this.setState({\r\n          ...this.editedData,\r\n          layout: data\r\n        })\r\n      } else {\r\n        this.changeLayoutProperties(data);\r\n      }\r\n    } else {\r\n      this.changeLayoutProperties(data);\r\n    }\r\n  }\r\n\r\n  changeLayoutProperties = (data) => {\r\n    if(data === 2 ) {\r\n      helloBarTimerr.STYLE.elements[0].color = \"#dc3747\";\r\n      helloBarTimerr.STYLE.elements[1].color = \"#000000\";\r\n      helloBarTimerr.STYLE.elements[2].color = \"#210b45\";\r\n      helloBarTimerr.create.textBody = \"Grab it right now! <br> Coupon Expires in...\";\r\n      this.setState({\r\n        ...this.state,\r\n        STYLE : helloBarTimerr.STYLE,\r\n        create : {\r\n          ...helloBarTimerr.create,\r\n          textBody : helloBarTimerr.create.textBody\r\n        },\r\n        layout: data\r\n      });\r\n    } else if(data === 1) {\r\n      helloBarTimerr.STYLE.elements[0].color = \"#006820\";\r\n      helloBarTimerr.STYLE.elements[1].color = \"#012f0f\";\r\n      helloBarTimerr.STYLE.elements[2].color = \"#012f0f\";\r\n      helloBarTimerr.create.textBody = \"Grab it right now! <br> Coupon Expires in...\";\r\n      this.setState({\r\n        ...this.state,\r\n        STYLE : helloBarTimerr.STYLE,\r\n        create : {\r\n          ...helloBarTimerr.create,\r\n          textBody : helloBarTimerr.create.textBody\r\n        },\r\n        layout: data\r\n      });\r\n    } else {\r\n      helloBarTimerr.STYLE.elements[0].color = \"#420068\";\r\n      helloBarTimerr.STYLE.elements[1].color = \"#ffcc00\";\r\n      helloBarTimerr.STYLE.elements[2].color = \"#210b44\";\r\n      helloBarTimerr.create.textBody = \"Hurry! Coupon Expires in...\";\r\n      this.setState({\r\n        ...this.state,\r\n        STYLE : helloBarTimerr.STYLE,\r\n        create : {\r\n          ...helloBarTimerr.create,\r\n          textBody : helloBarTimerr.create.textBody\r\n        },\r\n        layout: data\r\n      });\r\n    }\r\n  }\r\n\r\n  renderMain = () => {\r\n    const { activeTab, create, cta, timer, layout, STYLE, CODE, file } = this.state;\r\n    if (!this.loaded) return null;\r\n    let component = null;\r\n    switch (activeTab) {\r\n      case 1:\r\n        component = <CreateText {...create} layout={layout} cases={1} onChange={this.onUpdate} />;\r\n        break;\r\n      case 2:\r\n        component = <CTA {...cta} cases={2} onChange={this.onUpdate} />;\r\n        break;\r\n      case 3:\r\n        component = <Timer {...timer} cases={3} onChange={this.onUpdate} />;\r\n        break;\r\n      case 4:\r\n        component = <Layout layout={layout} cases={4} onChange={this.onUpdate} />;\r\n        break;\r\n      case 5:\r\n        component = <Style {...STYLE} layout={layout} cases={5} onChange={this.onUpdate} />;\r\n        break;\r\n      case 6:\r\n        component = <Code {...CODE} cases={6} onChange={this.onUpdate} />;\r\n        break;\r\n      default:\r\n        component = <CreateText {...create} onChange={this.onUpdate} />;\r\n        break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    const toolData = this.state;\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      if (!Util.isArrayEqual(helloBarTimerr, this.state, 3)) {\r\n        RequestHandler.PostRequest(SAVE_TOOL, { toolData: HelloBarTimerModal(toolData) }, (res, err) => {\r\n          if (res) {\r\n            if (res.data.success) {\r\n              Modal.success({\r\n                content: \"Campaign Save SuccessFully\",\r\n              });\r\n              setTimeout(() => {\r\n                this.props.history.push(\"/Campaigns\");\r\n              }, 1000);\r\n            } else {\r\n              window.gs.toast(res.data.message, { position: \"bottom-right\", type: window.gs.toast.TYPE.FAILED });\r\n            }\r\n          } else {\r\n            console.log(err);\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  closePopup = () => {\r\n    this.setState({ openPopUp: false, success: false });\r\n    this.props.history.push(\"/\");\r\n  };\r\n  setTemplate = (i) => {\r\n    this.setState({ templateType: i });\r\n  };\r\n\r\n  onDrawerClose = () => {\r\n    if (this.state.visible) this.setState({ visible: false });\r\n    else this.setState({ visible: true });\r\n  };\r\n\r\n  renderRight = () => {\r\n    const { layout } = this.state;\r\n    if (layout === 0) return <ReponsiveImage isAs={true} url={\"asset/hbt1.png\"} />;\r\n    if (layout === 1) return <ReponsiveImage isAs={true} url={\"asset/hbt2.png\"} />;\r\n    return <ReponsiveImage isAs={true} url={\"asset/hbt3.png\"} />;\r\n  };\r\n\r\n  back = () => {\r\n    this.props.history.push(\"/Create\");\r\n  };\r\n\r\n  render() {\r\n    const itemId = this.props.location.state;\r\n    const { preview } = this.state;\r\n\r\n    return (\r\n      <ToolLayout>\r\n        <div className=\"row\">\r\n          {preview ? <Preview {...this.state} /> : null}\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">{this.renderMain()}</div>\r\n              <div className=\"col-md-6 mt-2\">{this.renderRight()}</div>\r\n              <ButtonsGroup\r\n                preview={() => {\r\n                  this.setState({ preview: !preview });\r\n                }}\r\n                backUrl={this.back}\r\n                save={this.onClickSave}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <CreateSideBar activeTab={this.state.activeTab} onChangeActive={this.onChangeActive} {...itemId} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}