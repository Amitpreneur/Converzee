{"ast":null,"code":"/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.2 (2021-11-17)\n */\n(function () {\n  'use strict';\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var checkRange = function (str, substr, start) {\n    return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n  };\n\n  var contains = function (str, substr) {\n    return str.indexOf(substr) !== -1;\n  };\n\n  var startsWith = function (str, prefix) {\n    return checkRange(str, prefix, 0);\n  };\n\n  var global = tinymce.util.Tools.resolve('tinymce.Env');\n\n  var link = function () {\n    return /(?:[A-Za-z][A-Za-z\\d.+-]{0,14}:\\/\\/(?:[-.~*+=!&;:'%@?^${}(),\\w]+@)?|www\\.|[-;:&=+$,.\\w]+@)[A-Za-z\\d-]+(?:\\.[A-Za-z\\d-]+)*(?::\\d+)?(?:\\/(?:[-+~=.,%()\\/\\w]*[-+~=%()\\/\\w])?)?(?:\\?(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+))?/g;\n  };\n\n  var defaultLinkPattern = new RegExp('^' + link().source + '$', 'i');\n\n  var getAutoLinkPattern = function (editor) {\n    return editor.getParam('autolink_pattern', defaultLinkPattern);\n  };\n\n  var getDefaultLinkTarget = function (editor) {\n    return editor.getParam('default_link_target', false);\n  };\n\n  var getDefaultLinkProtocol = function (editor) {\n    return editor.getParam('link_default_protocol', 'http', 'string');\n  };\n\n  var rangeEqualsBracketOrSpace = function (rangeString) {\n    return /^[(\\[{ \\u00a0]$/.test(rangeString);\n  };\n\n  var isTextNode = function (node) {\n    return node.nodeType === 3;\n  };\n\n  var isElement = function (node) {\n    return node.nodeType === 1;\n  };\n\n  var handleBracket = function (editor) {\n    return parseCurrentLine(editor, -1);\n  };\n\n  var handleSpacebar = function (editor) {\n    return parseCurrentLine(editor, 0);\n  };\n\n  var handleEnter = function (editor) {\n    return parseCurrentLine(editor, -1);\n  };\n\n  var scopeIndex = function (container, index) {\n    if (index < 0) {\n      index = 0;\n    }\n\n    if (isTextNode(container)) {\n      var len = container.data.length;\n\n      if (index > len) {\n        index = len;\n      }\n    }\n\n    return index;\n  };\n\n  var setStart = function (rng, container, offset) {\n    if (!isElement(container) || container.hasChildNodes()) {\n      rng.setStart(container, scopeIndex(container, offset));\n    } else {\n      rng.setStartBefore(container);\n    }\n  };\n\n  var setEnd = function (rng, container, offset) {\n    if (!isElement(container) || container.hasChildNodes()) {\n      rng.setEnd(container, scopeIndex(container, offset));\n    } else {\n      rng.setEndAfter(container);\n    }\n  };\n\n  var hasProtocol = function (url) {\n    return /^([A-Za-z][A-Za-z\\d.+-]*:\\/\\/)|mailto:/.test(url);\n  };\n\n  var isPunctuation = function (char) {\n    return /[?!,.;:]/.test(char);\n  };\n\n  var parseCurrentLine = function (editor, endOffset) {\n    var end, endContainer, bookmark, text, prev, len, rngText;\n    var autoLinkPattern = getAutoLinkPattern(editor);\n    var defaultLinkTarget = getDefaultLinkTarget(editor);\n\n    if (editor.dom.getParent(editor.selection.getNode(), 'a[href]') !== null) {\n      return;\n    }\n\n    var rng = editor.selection.getRng().cloneRange();\n\n    if (rng.startOffset < 5) {\n      prev = rng.endContainer.previousSibling;\n\n      if (!prev) {\n        if (!rng.endContainer.firstChild || !rng.endContainer.firstChild.nextSibling) {\n          return;\n        }\n\n        prev = rng.endContainer.firstChild.nextSibling;\n      }\n\n      len = prev.length;\n      setStart(rng, prev, len);\n      setEnd(rng, prev, len);\n\n      if (rng.endOffset < 5) {\n        return;\n      }\n\n      end = rng.endOffset;\n      endContainer = prev;\n    } else {\n      endContainer = rng.endContainer;\n\n      if (!isTextNode(endContainer) && endContainer.firstChild) {\n        while (!isTextNode(endContainer) && endContainer.firstChild) {\n          endContainer = endContainer.firstChild;\n        }\n\n        if (isTextNode(endContainer)) {\n          setStart(rng, endContainer, 0);\n          setEnd(rng, endContainer, endContainer.nodeValue.length);\n        }\n      }\n\n      if (rng.endOffset === 1) {\n        end = 2;\n      } else {\n        end = rng.endOffset - 1 - endOffset;\n      }\n    }\n\n    var start = end;\n\n    do {\n      setStart(rng, endContainer, end >= 2 ? end - 2 : 0);\n      setEnd(rng, endContainer, end >= 1 ? end - 1 : 0);\n      end -= 1;\n      rngText = rng.toString();\n    } while (!rangeEqualsBracketOrSpace(rngText) && end - 2 >= 0);\n\n    if (rangeEqualsBracketOrSpace(rng.toString())) {\n      setStart(rng, endContainer, end);\n      setEnd(rng, endContainer, start);\n      end += 1;\n    } else if (rng.startOffset === 0) {\n      setStart(rng, endContainer, 0);\n      setEnd(rng, endContainer, start);\n    } else {\n      setStart(rng, endContainer, end);\n      setEnd(rng, endContainer, start);\n    }\n\n    text = rng.toString();\n\n    if (isPunctuation(text.charAt(text.length - 1))) {\n      setEnd(rng, endContainer, start - 1);\n    }\n\n    text = rng.toString().trim();\n    var matches = text.match(autoLinkPattern);\n    var protocol = getDefaultLinkProtocol(editor);\n\n    if (matches) {\n      var url = matches[0];\n\n      if (startsWith(url, 'www.')) {\n        url = protocol + '://' + url;\n      } else if (contains(url, '@') && !hasProtocol(url)) {\n        url = 'mailto:' + url;\n      }\n\n      bookmark = editor.selection.getBookmark();\n      editor.selection.setRng(rng);\n      editor.execCommand('createlink', false, url);\n\n      if (defaultLinkTarget !== false) {\n        editor.dom.setAttrib(editor.selection.getNode(), 'target', defaultLinkTarget);\n      }\n\n      editor.selection.moveToBookmark(bookmark);\n      editor.nodeChanged();\n    }\n  };\n\n  var setup = function (editor) {\n    var autoUrlDetectState;\n    editor.on('keydown', function (e) {\n      if (e.keyCode === 13) {\n        return handleEnter(editor);\n      }\n    });\n\n    if (global.browser.isIE()) {\n      editor.on('focus', function () {\n        if (!autoUrlDetectState) {\n          autoUrlDetectState = true;\n\n          try {\n            editor.execCommand('AutoUrlDetect', false, true);\n          } catch (ex) {}\n        }\n      });\n      return;\n    }\n\n    editor.on('keypress', function (e) {\n      if (e.keyCode === 41 || e.keyCode === 93 || e.keyCode === 125) {\n        return handleBracket(editor);\n      }\n    });\n    editor.on('keyup', function (e) {\n      if (e.keyCode === 32) {\n        return handleSpacebar(editor);\n      }\n    });\n  };\n\n  function Plugin() {\n    global$1.add('autolink', function (editor) {\n      setup(editor);\n    });\n  }\n\n  Plugin();\n})();","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/node_modules/tinymce/plugins/autolink/plugin.js"],"names":["global$1","tinymce","util","Tools","resolve","checkRange","str","substr","start","length","contains","indexOf","startsWith","prefix","global","link","defaultLinkPattern","RegExp","source","getAutoLinkPattern","editor","getParam","getDefaultLinkTarget","getDefaultLinkProtocol","rangeEqualsBracketOrSpace","rangeString","test","isTextNode","node","nodeType","isElement","handleBracket","parseCurrentLine","handleSpacebar","handleEnter","scopeIndex","container","index","len","data","setStart","rng","offset","hasChildNodes","setStartBefore","setEnd","setEndAfter","hasProtocol","url","isPunctuation","char","endOffset","end","endContainer","bookmark","text","prev","rngText","autoLinkPattern","defaultLinkTarget","dom","getParent","selection","getNode","getRng","cloneRange","startOffset","previousSibling","firstChild","nextSibling","nodeValue","toString","charAt","trim","matches","match","protocol","getBookmark","setRng","execCommand","setAttrib","moveToBookmark","nodeChanged","setup","autoUrlDetectState","on","e","keyCode","browser","isIE","ex","Plugin","add"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.2 (2021-11-17)\n */\n(function () {\n    'use strict';\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var link = function () {\n      return /(?:[A-Za-z][A-Za-z\\d.+-]{0,14}:\\/\\/(?:[-.~*+=!&;:'%@?^${}(),\\w]+@)?|www\\.|[-;:&=+$,.\\w]+@)[A-Za-z\\d-]+(?:\\.[A-Za-z\\d-]+)*(?::\\d+)?(?:\\/(?:[-+~=.,%()\\/\\w]*[-+~=%()\\/\\w])?)?(?:\\?(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+))?/g;\n    };\n\n    var defaultLinkPattern = new RegExp('^' + link().source + '$', 'i');\n    var getAutoLinkPattern = function (editor) {\n      return editor.getParam('autolink_pattern', defaultLinkPattern);\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target', false);\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var rangeEqualsBracketOrSpace = function (rangeString) {\n      return /^[(\\[{ \\u00a0]$/.test(rangeString);\n    };\n    var isTextNode = function (node) {\n      return node.nodeType === 3;\n    };\n    var isElement = function (node) {\n      return node.nodeType === 1;\n    };\n    var handleBracket = function (editor) {\n      return parseCurrentLine(editor, -1);\n    };\n    var handleSpacebar = function (editor) {\n      return parseCurrentLine(editor, 0);\n    };\n    var handleEnter = function (editor) {\n      return parseCurrentLine(editor, -1);\n    };\n    var scopeIndex = function (container, index) {\n      if (index < 0) {\n        index = 0;\n      }\n      if (isTextNode(container)) {\n        var len = container.data.length;\n        if (index > len) {\n          index = len;\n        }\n      }\n      return index;\n    };\n    var setStart = function (rng, container, offset) {\n      if (!isElement(container) || container.hasChildNodes()) {\n        rng.setStart(container, scopeIndex(container, offset));\n      } else {\n        rng.setStartBefore(container);\n      }\n    };\n    var setEnd = function (rng, container, offset) {\n      if (!isElement(container) || container.hasChildNodes()) {\n        rng.setEnd(container, scopeIndex(container, offset));\n      } else {\n        rng.setEndAfter(container);\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^([A-Za-z][A-Za-z\\d.+-]*:\\/\\/)|mailto:/.test(url);\n    };\n    var isPunctuation = function (char) {\n      return /[?!,.;:]/.test(char);\n    };\n    var parseCurrentLine = function (editor, endOffset) {\n      var end, endContainer, bookmark, text, prev, len, rngText;\n      var autoLinkPattern = getAutoLinkPattern(editor);\n      var defaultLinkTarget = getDefaultLinkTarget(editor);\n      if (editor.dom.getParent(editor.selection.getNode(), 'a[href]') !== null) {\n        return;\n      }\n      var rng = editor.selection.getRng().cloneRange();\n      if (rng.startOffset < 5) {\n        prev = rng.endContainer.previousSibling;\n        if (!prev) {\n          if (!rng.endContainer.firstChild || !rng.endContainer.firstChild.nextSibling) {\n            return;\n          }\n          prev = rng.endContainer.firstChild.nextSibling;\n        }\n        len = prev.length;\n        setStart(rng, prev, len);\n        setEnd(rng, prev, len);\n        if (rng.endOffset < 5) {\n          return;\n        }\n        end = rng.endOffset;\n        endContainer = prev;\n      } else {\n        endContainer = rng.endContainer;\n        if (!isTextNode(endContainer) && endContainer.firstChild) {\n          while (!isTextNode(endContainer) && endContainer.firstChild) {\n            endContainer = endContainer.firstChild;\n          }\n          if (isTextNode(endContainer)) {\n            setStart(rng, endContainer, 0);\n            setEnd(rng, endContainer, endContainer.nodeValue.length);\n          }\n        }\n        if (rng.endOffset === 1) {\n          end = 2;\n        } else {\n          end = rng.endOffset - 1 - endOffset;\n        }\n      }\n      var start = end;\n      do {\n        setStart(rng, endContainer, end >= 2 ? end - 2 : 0);\n        setEnd(rng, endContainer, end >= 1 ? end - 1 : 0);\n        end -= 1;\n        rngText = rng.toString();\n      } while (!rangeEqualsBracketOrSpace(rngText) && end - 2 >= 0);\n      if (rangeEqualsBracketOrSpace(rng.toString())) {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n        end += 1;\n      } else if (rng.startOffset === 0) {\n        setStart(rng, endContainer, 0);\n        setEnd(rng, endContainer, start);\n      } else {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n      }\n      text = rng.toString();\n      if (isPunctuation(text.charAt(text.length - 1))) {\n        setEnd(rng, endContainer, start - 1);\n      }\n      text = rng.toString().trim();\n      var matches = text.match(autoLinkPattern);\n      var protocol = getDefaultLinkProtocol(editor);\n      if (matches) {\n        var url = matches[0];\n        if (startsWith(url, 'www.')) {\n          url = protocol + '://' + url;\n        } else if (contains(url, '@') && !hasProtocol(url)) {\n          url = 'mailto:' + url;\n        }\n        bookmark = editor.selection.getBookmark();\n        editor.selection.setRng(rng);\n        editor.execCommand('createlink', false, url);\n        if (defaultLinkTarget !== false) {\n          editor.dom.setAttrib(editor.selection.getNode(), 'target', defaultLinkTarget);\n        }\n        editor.selection.moveToBookmark(bookmark);\n        editor.nodeChanged();\n      }\n    };\n    var setup = function (editor) {\n      var autoUrlDetectState;\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13) {\n          return handleEnter(editor);\n        }\n      });\n      if (global.browser.isIE()) {\n        editor.on('focus', function () {\n          if (!autoUrlDetectState) {\n            autoUrlDetectState = true;\n            try {\n              editor.execCommand('AutoUrlDetect', false, true);\n            } catch (ex) {\n            }\n          }\n        });\n        return;\n      }\n      editor.on('keypress', function (e) {\n        if (e.keyCode === 41 || e.keyCode === 93 || e.keyCode === 125) {\n          return handleBracket(editor);\n        }\n      });\n      editor.on('keyup', function (e) {\n        if (e.keyCode === 32) {\n          return handleSpacebar(editor);\n        }\n      });\n    };\n\n    function Plugin () {\n      global$1.add('autolink', function (editor) {\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"]},"metadata":{},"sourceType":"script"}