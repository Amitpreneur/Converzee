{"ast":null,"code":"import React,{Component,useState}from\"react\";import\"./SupportUser.css\";import{dateParser}from\"../Util\";import{getUserList,parseUserData,parseResellerData}from\"../comman/TableWithData\";import{Tabs,Modal,Select,Switch}from\"antd\";import RequestHandler from\"../../actions/RequestHandler\";import{UPDATE_USER,SEARCH_USER,ADD_SUBUSER,GET_SUBUSER,DELETE_USER}from\"../../actions/URLs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;export default class SuperAdmin extends Component{constructor(){super(...arguments);this.state={user:[],loading:true,id:null,isAdd:false};this.users=[];this.getSubUser=()=>{RequestHandler.PostRequest(GET_SUBUSER,{},(res,err)=>{if(res){const data=res.data.data;this.setState({user:parseUserData(data)});}else{window.gs.success(false,res.data.message);}});};this.onSearch=searchString=>{const userType=0;RequestHandler.PostRequest(SEARCH_USER,{userData:{searchString,userType}},(res,err)=>{if(res){const data=res.data.data;this.setState({user:parseUserData(data)});}});};this.onAddClick=()=>{this.setState({isAdd:true});};this.onCloseAdd=()=>{this.setState({isAdd:false});};this.addUser=(firstname,email,password)=>{let tools=this.getTools(true,true);if(firstname&&email&&password){RequestHandler.PostRequest(ADD_SUBUSER,{userData:{firstname,email,password,tools}},(res,err)=>{if(res){if(res.data.success){window.gs.success(res.data.success);this.setState({isAdd:false});this.getSubUser();}else{window.gs.success(false,res.data.message);}}});}else{window.gs.success(false,\"Please fill all the fields.\");}};this.getUserData=id=>{let data=this.users.find(e=>e._id===id);return data;};this.onEdit=id=>{this.setState({id});};this.onClose=()=>{this.setState({id:null});};this.getTools=function(){let isUpgrade1=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let isUpgrade2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const tools=new Set([1,2,3,4,5,6,7,8,9,10,13,14,15,17,24]);if(isUpgrade1){tools.add(18);tools.add(19);}if(isUpgrade2){tools.add(20);tools.add(21);}return Array.from(tools);};this.onDeleteClick=id=>{Modal.confirm({title:\"Confirm\",content:\"Are you Sure to Delete this user\",okText:\"Delete\",onOk:()=>{RequestHandler.PostRequest(DELETE_USER,{userData:{id}},(res,err)=>{if(res){const{data}=res;if(data.success){window.gs.success(true,data.message);this.getSubUser();}}});},cancelText:\"Cancel\"});};}componentDidMount(){this.getSubUser();}render(){const{user,id,isAdd}=this.state;const modelProps={visible:id?true:false,onClose:this.onClose,data:id?this.getUserData(id):{}// onSave: this.onSave,\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"container admin\",name:\"admin\",children:[/*#__PURE__*/_jsx(ADDModel,{onAddClick:this.addUser,visible:isAdd,onClose:this.onCloseAdd}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(SearchInput,{onSearch:this.onSearch}),/*#__PURE__*/_jsx(ADD_USER_BUTTON,{onAddClicked:this.onAddClick})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(USERTABLE,{data:user,onEdit:this.onEdit,onDelete:this.onDeleteClick})})})]});}}const SearchInput=function(props){const[search,setSearch]=useState(props.search);return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:e=>setSearch(e.target.value),className:\"form-control\",placeholder:\"Search\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",onClick:()=>props.onSearch(search),style:{cursor:\"pointer\"},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-search\"})})})]})});};const ADD_USER_BUTTON=function(props){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-12 col-lg-6 \",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary pull-right\",onClick:props.onAddClicked,children:\"Add Support User\"})});};const USERROW=function(props){const item=props.item;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.firstname}),/*#__PURE__*/_jsx(\"td\",{children:item.email}),/*#__PURE__*/_jsx(\"td\",{children:item.isActive?/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-success\",children:\"Active\"}):/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-secondary\",children:\"De-Active\"})}),/*#__PURE__*/_jsx(\"td\",{children:dateParser(item.date)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-font-size editbtn\",onClick:()=>props.onDelete(item.id),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\",\"aria-hidden\":\"true\"}),\" Delete\"]})})})]});};const USERTABLE=function(props){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table userTable\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Active\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:props.data.length?props.data.map((value,i)=>/*#__PURE__*/_jsx(USERROW,{item:value,onEdit:props.onEdit,onDelete:props.onDelete},i)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",children:\"There is no user.\"})})})]})});};// const EditModel = function (props) {\n//   const [name, setName] = useState(props.data.firstname ? props.data.firstname : \"\");\n//   const [email, setEmail] = useState(props.data.email);\n//   return (\n//     <Modal title=\"Edit User\" centered visible={props.visible} onOk={() => props.onSave(name, email)} onCancel={() => props.onClose(false)}>\n//       <div className=\"form-group admin-form-group\">\n//         <label>Name</label>\n//         <input type=\"text\" name=\"name\" value={name} onChange={(e) => setName(e.target.value)} className=\"form-control\" />\n//       </div>\n//       <div className=\"form-group admin-form-group\">\n//         <label>Email</label>\n//         <input type=\"text\" name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} className=\"form-control\" />\n//       </div>\n//     </Modal>\n//   );\n// };\nconst ADDModel=function(props){const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");return/*#__PURE__*/_jsxs(Modal,{title:\"Add User\",centered:true,visible:props.visible,onOk:()=>props.onAddClick(name,email,password),onCancel:()=>props.onClose(false),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group admin-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",autoComplete:\"off\",name:\"email\",value:email,onChange:e=>setEmail(e.target.value),className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group admin-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",autoComplete:\"off\",name:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group admin-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",autoComplete:\"off\",name:\"name\",value:name,onChange:e=>setName(e.target.value),className:\"form-control\"})]})]});};","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/supportUser/SupportUser.js"],"names":["React","Component","useState","dateParser","getUserList","parseUserData","parseResellerData","Tabs","Modal","Select","Switch","RequestHandler","UPDATE_USER","SEARCH_USER","ADD_SUBUSER","GET_SUBUSER","DELETE_USER","Option","SuperAdmin","state","user","loading","id","isAdd","users","getSubUser","PostRequest","res","err","data","setState","window","gs","success","message","onSearch","searchString","userType","userData","onAddClick","onCloseAdd","addUser","firstname","email","password","tools","getTools","getUserData","find","e","_id","onEdit","onClose","isUpgrade1","isUpgrade2","Set","add","Array","from","onDeleteClick","confirm","title","content","okText","onOk","cancelText","componentDidMount","render","modelProps","visible","SearchInput","props","search","setSearch","target","value","cursor","ADD_USER_BUTTON","onAddClicked","USERROW","item","isActive","date","onDelete","USERTABLE","length","map","i","ADDModel","name","setName","setEmail","setPassword"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\r\nimport \"./SupportUser.css\";\r\nimport { dateParser } from \"../Util\";\r\nimport { getUserList, parseUserData, parseResellerData } from \"../comman/TableWithData\";\r\nimport { Tabs, Modal, Select, Switch } from \"antd\";\r\nimport RequestHandler from \"../../actions/RequestHandler\";\r\nimport { UPDATE_USER, SEARCH_USER, ADD_SUBUSER, GET_SUBUSER, DELETE_USER } from \"../../actions/URLs\";\r\nconst { Option } = Select;\r\n\r\nexport default class SuperAdmin extends Component {\r\n  state = {\r\n    user: [],\r\n    loading: true,\r\n    id: null,\r\n    isAdd: false,\r\n  };\r\n  users = [];\r\n\r\n  componentDidMount() {\r\n    this.getSubUser();\r\n  }\r\n\r\n  getSubUser = () => {\r\n    RequestHandler.PostRequest(GET_SUBUSER, {  }, (res, err) => {\r\n      if (res) {\r\n        const data = res.data.data;\r\n        this.setState({ user: parseUserData(data) });\r\n      } else {\r\n        window.gs.success(false, res.data.message);\r\n      }\r\n    });\r\n  }\r\n\r\n  onSearch = (searchString) => {\r\n    const userType = 0;\r\n    RequestHandler.PostRequest(SEARCH_USER, { userData: { searchString, userType } }, (res, err) => {\r\n      if (res) {\r\n        const data = res.data.data;\r\n        this.setState({ user: parseUserData(data) });\r\n      }\r\n    });\r\n  };\r\n\r\n  onAddClick = () => {\r\n    this.setState({ isAdd: true });\r\n  };\r\n\r\n  onCloseAdd = () => {\r\n    this.setState({ isAdd: false });\r\n  };\r\n\r\n  addUser = (firstname, email, password) => {\r\n    let tools = this.getTools(true, true);\r\n    if(firstname && email && password) {\r\n      RequestHandler.PostRequest(ADD_SUBUSER, { userData: { firstname, email, password, tools } }, (res, err) => {\r\n        if (res) {\r\n          if (res.data.success) {\r\n            window.gs.success(res.data.success);\r\n            this.setState({ isAdd: false });\r\n            this.getSubUser();\r\n          } else {\r\n            window.gs.success(false, res.data.message);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      window.gs.success(false, \"Please fill all the fields.\");\r\n    }\r\n  };\r\n\r\n  getUserData = (id) => {\r\n    let data = this.users.find((e) => e._id === id);\r\n    return data;\r\n  };\r\n\r\n  onEdit = (id) => {\r\n    this.setState({ id });\r\n  };\r\n\r\n  onClose = () => {\r\n    this.setState({ id: null });\r\n  };\r\n\r\n  getTools = (isUpgrade1 = false, isUpgrade2 = false) => {\r\n    const tools = new Set([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 13, 14, 15, 17, 24]);\r\n    if (isUpgrade1) {\r\n      tools.add(18);\r\n      tools.add(19);\r\n    }\r\n    if (isUpgrade2) {\r\n      tools.add(20);\r\n      tools.add(21);\r\n    }\r\n    return Array.from(tools);\r\n  };\r\n\r\n  // onSave = (name, isActive, isUpgrade1 = false, isUpgrade2 = false) => {\r\n  //   const { id } = this.state;\r\n  //   const tools = this.getTools(isUpgrade1, isUpgrade2);\r\n  //   RequestHandler.PostRequest(UPDATE_USER, { userData: { id, name, isActive, tools, isUpgrade1, isUpgrade2 } }, (res, err) => {\r\n  //     if (res) {\r\n  //       window.gs.success(res.data.success);\r\n  //       if (res.data.success) {\r\n  //         // this.onTabSwitch(this.state.activeTab);\r\n  //         this.setState({ id: null });\r\n  //       }\r\n  //     }\r\n  //   });\r\n  // };\r\n\r\n  onDeleteClick = (id) => {\r\n    Modal.confirm({\r\n      title: \"Confirm\",\r\n      content: \"Are you Sure to Delete this user\",\r\n      okText: \"Delete\",\r\n      onOk: () => {\r\n        RequestHandler.PostRequest(DELETE_USER, { userData: { id } }, (res, err) => {\r\n          if (res) {\r\n            const { data } = res;\r\n            if (data.success) {\r\n              window.gs.success(true, data.message);\r\n              this.getSubUser();\r\n            }\r\n          }\r\n        });\r\n      },\r\n      cancelText: \"Cancel\",\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { user, id, isAdd } = this.state;\r\n    const modelProps = {\r\n      visible: id ? true : false,\r\n      onClose: this.onClose,\r\n      data: id ? this.getUserData(id) : {},\r\n      // onSave: this.onSave,\r\n    };\r\n    return (\r\n      <div className=\"container admin\" name=\"admin\">\r\n        {/* {id ? <EditModel {...modelProps} /> : null} */}\r\n        <ADDModel onAddClick={this.addUser} visible={isAdd} onClose={this.onCloseAdd} />\r\n        <div className=\"row\">\r\n          <SearchInput onSearch={this.onSearch} />\r\n          <ADD_USER_BUTTON onAddClicked={this.onAddClick} />\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n              <USERTABLE data={user} onEdit={this.onEdit}  onDelete={this.onDeleteClick}/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst SearchInput = function (props) {\r\n  const [search, setSearch] = useState(props.search);\r\n  return (\r\n    <div className=\"col-md-6 col-sm-12 col-lg-6\">\r\n      <div className=\"input-group mb-3\">\r\n        <input type=\"text\" onChange={(e) => setSearch(e.target.value)} className=\"form-control\" placeholder=\"Search\" />\r\n        <div className=\"input-group-append\">\r\n          <span className=\"input-group-text\" onClick={() => props.onSearch(search)} style={{ cursor: \"pointer\" }}>\r\n            <i className=\"fa fa-search\"></i>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ADD_USER_BUTTON = function (props) {\r\n  return (\r\n    <div className=\"col-md-6 col-sm-12 col-lg-6 \">\r\n      <button className=\"btn btn-sm btn-primary pull-right\" onClick={props.onAddClicked}>\r\n        Add Support User\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst USERROW = function (props) {\r\n  const item = props.item;\r\n  return (\r\n    <tr>\r\n      <td>{item.firstname}</td>\r\n      <td>{item.email}</td>\r\n      <td>{item.isActive ? <span className=\"badge badge-success\">Active</span> : <span className=\"badge badge-secondary\">De-Active</span>}</td>\r\n      <td>{dateParser(item.date)}</td>\r\n      <td>\r\n        <div className=\"btn-group\">\r\n          <button className=\"btn btn-sm btn-font-size editbtn\" onClick={() => props.onDelete(item.id)}>\r\n            <i className=\"fa fa-trash\" aria-hidden=\"true\"></i> Delete\r\n          </button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nconst USERTABLE = function (props) {\r\n  return (\r\n    <div>\r\n      <table className=\"table userTable\">\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Email</th>\r\n            <th>Active</th>\r\n            <th>Created</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {props.data.length ? props.data.map((value, i) => (\r\n            <USERROW key={i} item={value} onEdit={props.onEdit} onDelete={props.onDelete}/>\r\n          )): <tr><td colSpan=\"5\">There is no user.</td></tr>}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\n// const EditModel = function (props) {\r\n//   const [name, setName] = useState(props.data.firstname ? props.data.firstname : \"\");\r\n//   const [email, setEmail] = useState(props.data.email);\r\n  \r\n//   return (\r\n//     <Modal title=\"Edit User\" centered visible={props.visible} onOk={() => props.onSave(name, email)} onCancel={() => props.onClose(false)}>\r\n//       <div className=\"form-group admin-form-group\">\r\n//         <label>Name</label>\r\n//         <input type=\"text\" name=\"name\" value={name} onChange={(e) => setName(e.target.value)} className=\"form-control\" />\r\n//       </div>\r\n//       <div className=\"form-group admin-form-group\">\r\n//         <label>Email</label>\r\n//         <input type=\"text\" name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} className=\"form-control\" />\r\n//       </div>\r\n//     </Modal>\r\n//   );\r\n// };\r\n\r\n\r\nconst ADDModel = function (props) {\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  return (\r\n    <Modal title=\"Add User\" centered visible={props.visible} onOk={() => props.onAddClick(name, email, password)} onCancel={() => props.onClose(false)}>\r\n      <div className=\"form-group admin-form-group\">\r\n        <label>Email</label>\r\n        <input type=\"text\" autoComplete={\"off\"} name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group admin-form-group\">\r\n        <label>Password</label>\r\n        <input type=\"password\" autoComplete={\"off\"} name=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group admin-form-group\">\r\n        <label>name</label>\r\n        <input type=\"text\" autoComplete={\"off\"} name=\"name\" value={name} onChange={(e) => setName(e.target.value)} className=\"form-control\" />\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}