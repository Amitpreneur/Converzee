{"ast":null,"code":"import React,{Component}from\"react\";import SideBar from\"./SideBar\";import ToolUtil from\"../../utils/ToolUtil\";import Util from\"../Util\";import Text from\"./Text\";import{ToolLayout,ButtonsGroup}from\"../layout/ToolLayout\";import{SAVE_TOOL,GET_ONE_TOOL}from\"../../actions/URLs\";import{OTO2,BONUS_CREATE}from\"../../utils/Routes\";import RequestHandler from\"../../actions/RequestHandler\";import{Modal}from\"antd\";import Style from\"./Style\";import Code from\"./Code\";import{OptinFormModalResponse,OptinFormModal}from\"../utils/Modal\";import{Preview}from\"./Preview\";import{ReponsiveImage}from\"../comman/PreviewAble\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class ReviewEngin extends Component{constructor(){super(...arguments);this.state={toolName:\"\",toolId:\"\",preview:false,_id:null,activeTab:2,toolData:{style:[{name:\"Background\",id:\"backgound\",value:\"#fff3ea\"}],items:[],position:\"left\"},CODE:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:null}]}};this.loaded=false;this.onChangeActive=tabIndex=>{const{activeTab}=this.state;if(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.codeChange=data=>{this.setState({CODE:data});};this.onUpdate=data=>{const{toolData}=this.state;this.setState({toolData:{...toolData,...data}});};this.renderMain=()=>{const{activeTab,toolData,CODE}=this.state;let component=null;if(!this.loaded)return null;switch(activeTab){case 2:component=/*#__PURE__*/_jsx(Text,{items:toolData.items,position:toolData.position,onChange:this.onUpdate});break;case 4:component=/*#__PURE__*/_jsx(Style,{style:toolData.style,onChange:this.onUpdate});break;case 5:component=/*#__PURE__*/_jsx(Code,{...CODE,onChange:this.codeChange});break;default:component=/*#__PURE__*/_jsx(Text,{onChange:this.onUpdate});break;}return component;};this.onClickSave=()=>{if(this.state.CODE.include[0].url!==\"\"){RequestHandler.PostRequest(SAVE_TOOL,{toolData:OptinFormModal(this.state)},(res,err)=>{if(res){const data1=res.data;if(data1.success){Modal.success({content:data1.message});setTimeout(()=>{this.props.history.push(\"/Campaigns\");},1000);}}});}else{Modal.warning({content:\"Should Contain atleast one trigger point\"});}};this.renderRight=()=>{// return <ReponsiveImage isAs={true} url={\"asset/hb3.png\"} />;\n};this.back=()=>{this.props.history.push(BONUS_CREATE);};}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{this.loaded=true;if(res){Util.isRedirected=true;const data=OptinFormModalResponse(res);if(data){this.setState(data,()=>{window.gs.navTitle(ToolUtil.getTool(data.toolId)+\"(\"+data.name+\")\");});}}});}else{const toolId=21;this.loaded=true;this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId)+\" \"+\"(\"+Util.CAMPAIGNS_NAME+\")\");delete window.gs.defaultLayout;}}// togglePreview = () => {\n//   const { preview } = this.state;\n//   this.setState({ preview: !preview });\n// };\nrender(){// const { preview } = this.state;\nreturn/*#__PURE__*/_jsx(ToolLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-10 toolItem\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:this.renderMain()}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mt-2\",children:this.renderRight()}),/*#__PURE__*/_jsx(ButtonsGroup,{backUrl:this.back,preview:this.togglePreview,save:this.onClickSave})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 sideBarButtomPanel\",children:/*#__PURE__*/_jsx(SideBar,{activeTab:this.state.activeTab,onChangeActive:this.onChangeActive})})]})});}}","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/ReviewEngin/index.js"],"names":["React","Component","SideBar","ToolUtil","Util","Text","ToolLayout","ButtonsGroup","SAVE_TOOL","GET_ONE_TOOL","OTO2","BONUS_CREATE","RequestHandler","Modal","Style","Code","OptinFormModalResponse","OptinFormModal","Preview","ReponsiveImage","ReviewEngin","state","toolName","toolId","preview","_id","activeTab","toolData","style","name","id","value","items","position","CODE","include","type","url","exclude","loaded","onChangeActive","tabIndex","setState","codeChange","data","onUpdate","renderMain","component","onClickSave","PostRequest","res","err","data1","success","content","message","setTimeout","props","history","push","warning","renderRight","back","componentDidMount","match","params","isRedirected","window","gs","navTitle","getTool","CAMPAIGNS_NAME","RedirectWhenCampaignEmpty","defaultLayout","render","togglePreview"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport SideBar from \"./SideBar\";\r\nimport ToolUtil from \"../../utils/ToolUtil\";\r\nimport Util from \"../Util\";\r\nimport Text from \"./Text\";\r\nimport { ToolLayout, ButtonsGroup } from \"../layout/ToolLayout\";\r\nimport { SAVE_TOOL, GET_ONE_TOOL } from \"../../actions/URLs\";\r\nimport { OTO2, BONUS_CREATE } from \"../../utils/Routes\";\r\nimport RequestHandler from \"../../actions/RequestHandler\";\r\nimport { Modal } from \"antd\";\r\nimport Style from \"./Style\";\r\nimport Code from \"./Code\";\r\nimport { OptinFormModalResponse, OptinFormModal } from \"../utils/Modal\";\r\nimport { Preview } from \"./Preview\";\r\nimport { ReponsiveImage } from \"../comman/PreviewAble\";\r\n\r\nexport default class ReviewEngin extends Component {\r\n  state = {\r\n    toolName: \"\",\r\n    toolId: \"\",\r\n    preview: false,\r\n    _id: null,\r\n    activeTab: 2,\r\n    toolData: {\r\n      style: [{ name: \"Background\", id: \"backgound\", value: \"#fff3ea\" }],\r\n      items: [],\r\n      position: \"left\",\r\n    },\r\n    CODE: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: null }] },\r\n  };\r\n  loaded = false;\r\n\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        this.loaded = true;\r\n        if (res) {\r\n          Util.isRedirected = true;\r\n          const data = OptinFormModalResponse(res);\r\n          if (data) {\r\n            this.setState(data, () => {\r\n              window.gs.navTitle(ToolUtil.getTool(data.toolId) + \"(\" + data.name + \")\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      const toolId = 21;\r\n      this.loaded = true;\r\n      this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n      Util.RedirectWhenCampaignEmpty(this.props);\r\n      window.gs.navTitle(ToolUtil.getTool(toolId) + \" \" + \"(\" + Util.CAMPAIGNS_NAME + \")\");\r\n      delete window.gs.defaultLayout;\r\n    }\r\n  }\r\n\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n\r\n  codeChange = (data) => {\r\n    this.setState({ CODE: data });\r\n  };\r\n\r\n  onUpdate = (data) => {\r\n    const { toolData } = this.state;\r\n    this.setState({ toolData: { ...toolData, ...data } });\r\n  };\r\n\r\n  renderMain = () => {\r\n    const { activeTab, toolData, CODE } = this.state;\r\n    let component = null;\r\n    if (!this.loaded) return null;\r\n    switch (activeTab) {\r\n      case 2:\r\n        component = <Text items={toolData.items} position={toolData.position} onChange={this.onUpdate} />;\r\n        break;\r\n      case 4:\r\n        component = <Style style={toolData.style} onChange={this.onUpdate} />;\r\n        break;\r\n      case 5:\r\n        component = <Code {...CODE} onChange={this.codeChange} />;\r\n        break;\r\n      default:\r\n        component = <Text onChange={this.onUpdate} />;\r\n        break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    if (this.state.CODE.include[0].url !== \"\") {\r\n      RequestHandler.PostRequest(SAVE_TOOL, { toolData: OptinFormModal(this.state) }, (res, err) => {\r\n        if (res) {\r\n          const data1 = res.data;\r\n          if (data1.success) {\r\n            Modal.success({\r\n              content: data1.message,\r\n            });\r\n            setTimeout(() => {\r\n              this.props.history.push(\"/Campaigns\");\r\n            }, 1000);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      Modal.warning({\r\n        content: \"Should Contain atleast one trigger point\",\r\n      });\r\n    }\r\n  };\r\n\r\n  renderRight = () => {\r\n    // return <ReponsiveImage isAs={true} url={\"asset/hb3.png\"} />;\r\n  };\r\n\r\n  back = () => {\r\n    this.props.history.push(BONUS_CREATE);\r\n  };\r\n\r\n  // togglePreview = () => {\r\n  //   const { preview } = this.state;\r\n  //   this.setState({ preview: !preview });\r\n  // };\r\n\r\n  render() {\r\n    // const { preview } = this.state;\r\n    return (\r\n      <ToolLayout>\r\n        {/* {preview ? <Preview {...this.state} onClose={this.togglePreview} /> : null} */}\r\n        <div className=\"row\">\r\n          <div className=\"col-10 toolItem\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">{this.renderMain()}</div>\r\n              <div className=\"col-md-6 mt-2\">{this.renderRight()}</div>\r\n              <ButtonsGroup backUrl={this.back} preview={this.togglePreview} save={this.onClickSave} />\r\n            </div>\r\n          </div>\r\n          <div className=\"col-1 sideBarButtomPanel\">\r\n            <SideBar activeTab={this.state.activeTab} onChangeActive={this.onChangeActive} />\r\n          </div>\r\n        </div>\r\n      </ToolLayout>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}