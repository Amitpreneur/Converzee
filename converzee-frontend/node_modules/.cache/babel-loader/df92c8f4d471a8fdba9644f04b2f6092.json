{"ast":null,"code":"import React,{Component}from\"react\";import\"./Create.css\";import CreateSideBar from\"../subpages/create/CreateSideBar\";import CreateText from\"../subpages/create/CreateText\";import Code from\"../subpages/create/Code\";import Style from\"../subpages/create/Style\";import Layout from\"../subpages/create/Layout\";import Timer from\"../subpages/create/Timer\";import CTA from\"../subpages/create/CTA\";import RequestHandler from\"../../actions/RequestHandler\";import{SAVE_TOOL,GET_ONE_TOOL}from\"../../actions/URLs\";import FileUploader from\"../subpages/create/FileUploader\";import ToolUtil from\"../../utils/ToolUtil\";import Util from\"../Util\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default class Create extends Component{constructor(){super(...arguments);this.toolId=0;this.state={toolName:\"\",activeTab:1,create:{campaignName:Util.CAMPAIGNS_NAME,helloBarPos:\"\",textBody:\"\"},cta:{ctaText:\"\",ctaAction:\"\",redirectUrl:\"\"},timer:{timerType:\"\",endDateTime:new Date(),timeZone:Util.getTimeZoneList()[0].value,whenTimeExp:\"\"},layout:{layout:1},style:{elements:[{name:\"centralTimer\",text:\"Central Timer\",color:\"\"},{name:\"centralTimerTitle\",text:\"Central Timer Title\",color:\"\"},{name:\"centralTimerLabel\",text:\"Central Timer Label\",color:\"\"},{name:\"highlight\",text:\"Highlight\",color:\"\"},{name:\"highlightBackground\",text:\"Highlight Background\",color:\"\"}],selected:0},code:{include:[{type:\"contains\",url:\"\"}],exclude:[{type:\"contains\",url:\"\"}]},file:{file:[]},toolId:0,status:true,openPopUp:false,popUpScript:\"\",_id:null};this.onChangeActive=tabIndex=>{const{activeTab}=this.state;if(activeTab!==tabIndex){this.setState({activeTab:tabIndex});}};this.onUpdate=(index,data)=>{switch(index){case 1:this.setState({create:data,toolName:data.campaignName});break;case 2:this.setState({cta:data});break;case 3:this.setState({timer:data});break;case 4:this.setState({layout:data});break;case 5:this.setState({style:data});break;case 6:this.setState({code:data});break;case 7:this.setState({file:data});break;default:break;}};this.renderMain=()=>{const{activeTab,create,cta,timer,layout,style,code,file}=this.state;let component=null;switch(activeTab){case 1:component=/*#__PURE__*/_jsx(CreateText,{...create,onChange:this.onUpdate});break;case 2:component=/*#__PURE__*/_jsx(CTA,{...cta,onChange:this.onUpdate});break;case 3:component=/*#__PURE__*/_jsx(Timer,{...timer,onChange:this.onUpdate});break;case 4:component=/*#__PURE__*/_jsx(Layout,{...layout,onChange:this.onUpdate});break;case 5:component=/*#__PURE__*/_jsx(Style,{...style,onChange:this.onUpdate});break;case 6:component=/*#__PURE__*/_jsx(Code,{...code,onChange:this.onUpdate});break;case 7:component=/*#__PURE__*/_jsx(FileUploader,{...file,onChange:this.onUpdate});break;default:component=/*#__PURE__*/_jsx(CreateText,{...create,onChange:this.onUpdate});break;}return component;};this.onClickSave=()=>{const toolData=this.state;RequestHandler.PostRequest(SAVE_TOOL,{toolData:toolData},(res,err)=>{if(res){if(res.data.script){this.setState({openPopUp:true,popUpScript:res.data.script});}}else{console.log(err);}});};this.closePopup=()=>{this.setState({openPopUp:false,success:false});this.props.history.push(\"/\");};}componentDidMount(){const id=this.props.match?this.props.match.params?this.props.match.params.id:null:null;if(id){RequestHandler.PostRequest(GET_ONE_TOOL+id,{},(res,err)=>{if(res){const data=res.data.campaigns;Object.assign(data,{_id:id,toolName:ToolUtil.getTool(data.toolId),toolId:data.toolId,name:data.data});this.setState({...data});window.gs.navTitle(ToolUtil.getTool(data.toolId));}});}else{if(Util.CAMPAIGNS_NAME==\"\"){this.props.history.push(\"/\");}else{const toolId=this.props.match?this.props.match.params?parseInt(this.props.match.params.routeName):1:1;this.setState({toolId:toolId,toolName:ToolUtil.getTool(toolId),name:Util.CAMPAIGNS_NAME});Util.RedirectWhenCampaignEmpty(this.props);window.gs.navTitle(ToolUtil.getTool(toolId));}}}render(){const itemId=this.props.location.state;const{openPopUp,popUpScript}=this.state;const scriptPorps={popUpScript:popUpScript,closePopup:this.closePopup};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[openPopUp?/*#__PURE__*/_jsx(ScriptPopup,{...scriptPorps}):null,/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"create-top-bar-button\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-md create-top-button\",children:\"Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.onClickSave,className:\"btn btn-primary btn-md create-top-button\",children:\"Save\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{paddingTop:\"35px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"create-center-main\",children:this.renderMain()})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col col-lg-2\",children:/*#__PURE__*/_jsx(CreateSideBar,{activeTab:this.state.activeTab,onChangeActive:this.onChangeActive,...itemId})})]})]});}}Create.CAMPAIGNS_NAME=\"\";function copyScript(){var copyText=document.getElementById(\"scriptToCopy\");copyText.select();copyText.setSelectionRange(0,99999);document.execCommand(\"copy\");}const ScriptPopup=props=>{return/*#__PURE__*/_jsx(\"div\",{className:\"popup\",children:/*#__PURE__*/_jsx(\"div\",{className:\"popup_inner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popUpMainContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popUpTitlebar\",children:/*#__PURE__*/_jsx(\"div\",{onClick:()=>props.closePopup(),className:\"popupCloseButton\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-close\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-campaing\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Script\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"scriptToCopy\",value:props.popUpScript,name:\"campaignsName\",required:true}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group-append\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",onClick:copyScript,style:{cursor:\"pointer\"},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-copy\"})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"popUpbottomBar\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-xs btn-danger\",onClick:()=>props.closePopup(),children:\"Close\"})})})]})})});};","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/src/components/pages/Create.js"],"names":["React","Component","CreateSideBar","CreateText","Code","Style","Layout","Timer","CTA","RequestHandler","SAVE_TOOL","GET_ONE_TOOL","FileUploader","ToolUtil","Util","Create","toolId","state","toolName","activeTab","create","campaignName","CAMPAIGNS_NAME","helloBarPos","textBody","cta","ctaText","ctaAction","redirectUrl","timer","timerType","endDateTime","Date","timeZone","getTimeZoneList","value","whenTimeExp","layout","style","elements","name","text","color","selected","code","include","type","url","exclude","file","status","openPopUp","popUpScript","_id","onChangeActive","tabIndex","setState","onUpdate","index","data","renderMain","component","onClickSave","toolData","PostRequest","res","err","script","console","log","closePopup","success","props","history","push","componentDidMount","id","match","params","campaigns","Object","assign","getTool","window","gs","navTitle","parseInt","routeName","RedirectWhenCampaignEmpty","render","itemId","location","scriptPorps","paddingTop","copyScript","copyText","document","getElementById","select","setSelectionRange","execCommand","ScriptPopup","cursor"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./Create.css\";\r\nimport CreateSideBar from \"../subpages/create/CreateSideBar\";\r\nimport CreateText from \"../subpages/create/CreateText\";\r\nimport Code from \"../subpages/create/Code\";\r\nimport Style from \"../subpages/create/Style\";\r\nimport Layout from \"../subpages/create/Layout\";\r\nimport Timer from \"../subpages/create/Timer\";\r\nimport CTA from \"../subpages/create/CTA\";\r\nimport RequestHandler from \"../../actions/RequestHandler\";\r\nimport { SAVE_TOOL, GET_ONE_TOOL } from \"../../actions/URLs\";\r\nimport FileUploader from \"../subpages/create/FileUploader\";\r\nimport ToolUtil from \"../../utils/ToolUtil\";\r\nimport Util from \"../Util\";\r\nexport default class Create extends Component {\r\n  static CAMPAIGNS_NAME = \"\";\r\n  toolId = 0;\r\n  state = {\r\n    toolName: \"\",\r\n    activeTab: 1,\r\n    create: { campaignName: Util.CAMPAIGNS_NAME, helloBarPos: \"\", textBody: \"\" },\r\n    cta: { ctaText: \"\", ctaAction: \"\", redirectUrl: \"\" },\r\n    timer: { timerType: \"\", endDateTime: new Date(), timeZone: Util.getTimeZoneList()[0].value, whenTimeExp: \"\" },\r\n    layout: { layout: 1 },\r\n    style: {\r\n      elements: [\r\n        { name: \"centralTimer\", text: \"Central Timer\", color: \"\" },\r\n        { name: \"centralTimerTitle\", text: \"Central Timer Title\", color: \"\" },\r\n        { name: \"centralTimerLabel\", text: \"Central Timer Label\", color: \"\" },\r\n        { name: \"highlight\", text: \"Highlight\", color: \"\" },\r\n        { name: \"highlightBackground\", text: \"Highlight Background\", color: \"\" },\r\n      ],\r\n      selected: 0,\r\n    },\r\n    code: { include: [{ type: \"contains\", url: \"\" }], exclude: [{ type: \"contains\", url: \"\" }] },\r\n    file: { file: [] },\r\n    toolId: 0,\r\n    status: true,\r\n    openPopUp: false,\r\n    popUpScript: \"\",\r\n    _id: null,\r\n  };\r\n  componentDidMount() {\r\n    const id = this.props.match ? (this.props.match.params ? this.props.match.params.id : null) : null;\r\n    if (id) {\r\n      RequestHandler.PostRequest(GET_ONE_TOOL + id, {}, (res, err) => {\r\n        if (res) {\r\n          const data = res.data.campaigns;\r\n          Object.assign(data, { _id: id, toolName: ToolUtil.getTool(data.toolId), toolId: data.toolId, name: data.data });\r\n          this.setState({ ...data });\r\n          window.gs.navTitle(ToolUtil.getTool(data.toolId));\r\n        }\r\n      });\r\n    } else {\r\n      if (Util.CAMPAIGNS_NAME == \"\") {\r\n        this.props.history.push(\"/\");\r\n      } else {\r\n        const toolId = this.props.match ? (this.props.match.params ? parseInt(this.props.match.params.routeName) : 1) : 1;\r\n        this.setState({ toolId: toolId, toolName: ToolUtil.getTool(toolId), name: Util.CAMPAIGNS_NAME });\r\n        Util.RedirectWhenCampaignEmpty(this.props); \r\n        window.gs.navTitle(ToolUtil.getTool(toolId));\r\n      }\r\n    }\r\n  }\r\n  onChangeActive = (tabIndex) => {\r\n    const { activeTab } = this.state;\r\n    if (activeTab !== tabIndex) {\r\n      this.setState({ activeTab: tabIndex });\r\n    }\r\n  };\r\n  onUpdate = (index, data) => {\r\n    switch (index) {\r\n      case 1:\r\n        this.setState({ create: data, toolName: data.campaignName });\r\n        break;\r\n      case 2:\r\n        this.setState({ cta: data });\r\n        break;\r\n      case 3:\r\n        this.setState({ timer: data });\r\n        break;\r\n      case 4:\r\n        this.setState({ layout: data });\r\n        break;\r\n      case 5:\r\n        this.setState({ style: data });\r\n        break;\r\n      case 6:\r\n        this.setState({ code: data });\r\n        break;\r\n      case 7:\r\n        this.setState({ file: data });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  renderMain = () => {\r\n    const { activeTab, create, cta, timer, layout, style, code, file } = this.state;\r\n    let component = null;\r\n    switch (activeTab) {\r\n      case 1:\r\n        component = <CreateText {...create} onChange={this.onUpdate} />;\r\n        break;\r\n      case 2:\r\n        component = <CTA {...cta} onChange={this.onUpdate} />;\r\n        break;\r\n      case 3:\r\n        component = <Timer {...timer} onChange={this.onUpdate} />;\r\n        break;\r\n      case 4:\r\n        component = <Layout {...layout} onChange={this.onUpdate} />;\r\n        break;\r\n      case 5:\r\n        component = <Style {...style} onChange={this.onUpdate} />;\r\n        break;\r\n      case 6:\r\n        component = <Code {...code} onChange={this.onUpdate} />;\r\n        break;\r\n      case 7:\r\n        component = <FileUploader {...file} onChange={this.onUpdate} />;\r\n        break;\r\n      default:\r\n        component = <CreateText {...create} onChange={this.onUpdate} />;\r\n        break;\r\n    }\r\n    return component;\r\n  };\r\n\r\n  onClickSave = () => {\r\n    const toolData = this.state;\r\n    RequestHandler.PostRequest(SAVE_TOOL, { toolData: toolData }, (res, err) => {\r\n      if (res) {\r\n        if (res.data.script) {\r\n          this.setState({ openPopUp: true, popUpScript: res.data.script });\r\n        }\r\n      } else {\r\n        console.log(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  closePopup = () => {\r\n    this.setState({ openPopUp: false, success: false });\r\n    this.props.history.push(\"/\");\r\n  };\r\n\r\n  render() {\r\n    const itemId = this.props.location.state;\r\n    const { openPopUp, popUpScript } = this.state;\r\n    const scriptPorps = {\r\n      popUpScript: popUpScript,\r\n      closePopup: this.closePopup,\r\n    };\r\n    return (\r\n      <div className=\"container\">\r\n        {openPopUp ? <ScriptPopup {...scriptPorps} /> : null}\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <div className=\"create-top-bar-button\">\r\n              <button className=\"btn btn-primary btn-md create-top-button\">Preview</button>\r\n              <button onClick={this.onClickSave} className=\"btn btn-primary btn-md create-top-button\">\r\n                Save\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\" style={{ paddingTop: \"35px\" }}>\r\n          <div className=\"col\">\r\n            <center>\r\n              <div className=\"create-center-main\">{this.renderMain()}</div>\r\n            </center>\r\n          </div>\r\n          <div className=\"col col-lg-2\">\r\n            <CreateSideBar activeTab={this.state.activeTab} onChangeActive={this.onChangeActive} {...itemId} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction copyScript() {\r\n  var copyText = document.getElementById(\"scriptToCopy\");\r\n  copyText.select();\r\n  copyText.setSelectionRange(0, 99999);\r\n  document.execCommand(\"copy\");\r\n}\r\n\r\nconst ScriptPopup = (props) => {\r\n  return (\r\n    <div className=\"popup\">\r\n      <div className=\"popup_inner\">\r\n        <div className=\"popUpMainContainer\">\r\n          <div className=\"popUpTitlebar\">\r\n            <div onClick={() => props.closePopup()} className=\"popupCloseButton\">\r\n              <i className=\"fa fa-close\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"main-campaing\">\r\n            <label>Script</label>\r\n            <div class=\"input-group mb-3\">\r\n              <input type=\"text\" className=\"form-control\" id=\"scriptToCopy\" value={props.popUpScript} name=\"campaignsName\" required />\r\n              <div class=\"input-group-append\">\r\n                <span class=\"input-group-text\" onClick={copyScript} style={{ cursor: \"pointer\" }}>\r\n                  <i className=\"fa fa-copy\" />\r\n                </span>\r\n              </div>\r\n            </div>\r\n            {/* <input type=\"text\" className=\"form-control\" value={props.popUpScript} name=\"campaignsName\" required /> */}\r\n          </div>\r\n          <div className=\"popUpbottomBar\">\r\n            <div>\r\n              <button className=\"btn btn-xs btn-danger\" onClick={() => props.closePopup()}>\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}