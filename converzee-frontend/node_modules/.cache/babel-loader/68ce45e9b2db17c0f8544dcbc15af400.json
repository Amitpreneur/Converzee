{"ast":null,"code":"/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.2 (2021-11-17)\n */\n(function () {\n  'use strict';\n\n  var global$7 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var typeOf = function (x) {\n    var t = typeof x;\n\n    if (x === null) {\n      return 'null';\n    } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n      return 'array';\n    } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n      return 'string';\n    } else {\n      return t;\n    }\n  };\n\n  var isType$1 = function (type) {\n    return function (value) {\n      return typeOf(value) === type;\n    };\n  };\n\n  var isSimpleType = function (type) {\n    return function (value) {\n      return typeof value === type;\n    };\n  };\n\n  var isString = isType$1('string');\n  var isObject = isType$1('object');\n  var isArray = isType$1('array');\n  var isBoolean = isSimpleType('boolean');\n  var isFunction = isSimpleType('function');\n  var isNumber = isSimpleType('number');\n\n  var noop = function () {};\n\n  var constant = function (value) {\n    return function () {\n      return value;\n    };\n  };\n\n  var identity = function (x) {\n    return x;\n  };\n\n  var tripleEquals = function (a, b) {\n    return a === b;\n  };\n\n  var not = function (f) {\n    return function (t) {\n      return !f(t);\n    };\n  };\n\n  var never = constant(false);\n  var always = constant(true);\n\n  var none = function () {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var call = function (thunk) {\n      return thunk();\n    };\n\n    var id = identity;\n    var me = {\n      fold: function (n, _s) {\n        return n();\n      },\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function (msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: function () {\n        return none();\n      },\n      toArray: function () {\n        return [];\n      },\n      toString: constant('none()')\n    };\n    return me;\n  }();\n\n  var some = function (a) {\n    var constant_a = constant(a);\n\n    var self = function () {\n      return me;\n    };\n\n    var bind = function (f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function (n, s) {\n        return s(a);\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function (f) {\n        return some(f(a));\n      },\n      each: function (f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function (f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function () {\n        return [a];\n      },\n      toString: function () {\n        return 'some(' + a + ')';\n      }\n    };\n    return me;\n  };\n\n  var from = function (value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Optional = {\n    some: some,\n    none: none,\n    from: from\n  };\n  var nativeSlice = Array.prototype.slice;\n  var nativePush = Array.prototype.push;\n\n  var map = function (xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i);\n    }\n\n    return r;\n  };\n\n  var each$1 = function (xs, f) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      f(x, i);\n    }\n  };\n\n  var filter$1 = function (xs, pred) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        r.push(x);\n      }\n    }\n\n    return r;\n  };\n\n  var groupBy = function (xs, f) {\n    if (xs.length === 0) {\n      return [];\n    } else {\n      var wasType = f(xs[0]);\n      var r = [];\n      var group = [];\n\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var type = f(x);\n\n        if (type !== wasType) {\n          r.push(group);\n          group = [];\n        }\n\n        wasType = type;\n        group.push(x);\n      }\n\n      if (group.length !== 0) {\n        r.push(group);\n      }\n\n      return r;\n    }\n  };\n\n  var foldl = function (xs, f, acc) {\n    each$1(xs, function (x, i) {\n      acc = f(acc, x, i);\n    });\n    return acc;\n  };\n\n  var findUntil = function (xs, pred, until) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        return Optional.some(x);\n      } else if (until(x, i)) {\n        break;\n      }\n    }\n\n    return Optional.none();\n  };\n\n  var find$1 = function (xs, pred) {\n    return findUntil(xs, pred, never);\n  };\n\n  var flatten = function (xs) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      if (!isArray(xs[i])) {\n        throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n      }\n\n      nativePush.apply(r, xs[i]);\n    }\n\n    return r;\n  };\n\n  var bind = function (xs, f) {\n    return flatten(map(xs, f));\n  };\n\n  var reverse = function (xs) {\n    var r = nativeSlice.call(xs, 0);\n    r.reverse();\n    return r;\n  };\n\n  var get$1 = function (xs, i) {\n    return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n  };\n\n  var head = function (xs) {\n    return get$1(xs, 0);\n  };\n\n  var last = function (xs) {\n    return get$1(xs, xs.length - 1);\n  };\n\n  var findMap = function (arr, f) {\n    for (var i = 0; i < arr.length; i++) {\n      var r = f(arr[i], i);\n\n      if (r.isSome()) {\n        return r;\n      }\n    }\n\n    return Optional.none();\n  };\n\n  var __assign = function () {\n    __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n\n      return t;\n    };\n\n    return __assign.apply(this, arguments);\n  };\n\n  function __spreadArray(to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n        if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n        ar[i] = from[i];\n      }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n  }\n\n  var cached = function (f) {\n    var called = false;\n    var r;\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      if (!called) {\n        called = true;\n        r = f.apply(null, args);\n      }\n\n      return r;\n    };\n  };\n\n  var DeviceType = function (os, browser, userAgent, mediaMatch) {\n    var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n    var isiPhone = os.isiOS() && !isiPad;\n    var isMobile = os.isiOS() || os.isAndroid();\n    var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n    var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n    var isPhone = isiPhone || isMobile && !isTablet;\n    var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n    var isDesktop = !isPhone && !isTablet && !iOSwebview;\n    return {\n      isiPad: constant(isiPad),\n      isiPhone: constant(isiPhone),\n      isTablet: constant(isTablet),\n      isPhone: constant(isPhone),\n      isTouch: constant(isTouch),\n      isAndroid: os.isAndroid,\n      isiOS: os.isiOS,\n      isWebView: constant(iOSwebview),\n      isDesktop: constant(isDesktop)\n    };\n  };\n\n  var firstMatch = function (regexes, s) {\n    for (var i = 0; i < regexes.length; i++) {\n      var x = regexes[i];\n\n      if (x.test(s)) {\n        return x;\n      }\n    }\n\n    return undefined;\n  };\n\n  var find = function (regexes, agent) {\n    var r = firstMatch(regexes, agent);\n\n    if (!r) {\n      return {\n        major: 0,\n        minor: 0\n      };\n    }\n\n    var group = function (i) {\n      return Number(agent.replace(r, '$' + i));\n    };\n\n    return nu$2(group(1), group(2));\n  };\n\n  var detect$3 = function (versionRegexes, agent) {\n    var cleanedAgent = String(agent).toLowerCase();\n\n    if (versionRegexes.length === 0) {\n      return unknown$2();\n    }\n\n    return find(versionRegexes, cleanedAgent);\n  };\n\n  var unknown$2 = function () {\n    return nu$2(0, 0);\n  };\n\n  var nu$2 = function (major, minor) {\n    return {\n      major: major,\n      minor: minor\n    };\n  };\n\n  var Version = {\n    nu: nu$2,\n    detect: detect$3,\n    unknown: unknown$2\n  };\n\n  var detectBrowser$1 = function (browsers, userAgentData) {\n    return findMap(userAgentData.brands, function (uaBrand) {\n      var lcBrand = uaBrand.brand.toLowerCase();\n      return find$1(browsers, function (browser) {\n        var _a;\n\n        return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n      }).map(function (info) {\n        return {\n          current: info.name,\n          version: Version.nu(parseInt(uaBrand.version, 10), 0)\n        };\n      });\n    });\n  };\n\n  var detect$2 = function (candidates, userAgent) {\n    var agent = String(userAgent).toLowerCase();\n    return find$1(candidates, function (candidate) {\n      return candidate.search(agent);\n    });\n  };\n\n  var detectBrowser = function (browsers, userAgent) {\n    return detect$2(browsers, userAgent).map(function (browser) {\n      var version = Version.detect(browser.versionRegexes, userAgent);\n      return {\n        current: browser.name,\n        version: version\n      };\n    });\n  };\n\n  var detectOs = function (oses, userAgent) {\n    return detect$2(oses, userAgent).map(function (os) {\n      var version = Version.detect(os.versionRegexes, userAgent);\n      return {\n        current: os.name,\n        version: version\n      };\n    });\n  };\n\n  var contains$1 = function (str, substr) {\n    return str.indexOf(substr) !== -1;\n  };\n\n  var blank = function (r) {\n    return function (s) {\n      return s.replace(r, '');\n    };\n  };\n\n  var trim = blank(/^\\s+|\\s+$/g);\n\n  var isNotEmpty = function (s) {\n    return s.length > 0;\n  };\n\n  var isEmpty$1 = function (s) {\n    return !isNotEmpty(s);\n  };\n\n  var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n\n  var checkContains = function (target) {\n    return function (uastring) {\n      return contains$1(uastring, target);\n    };\n  };\n\n  var browsers = [{\n    name: 'Edge',\n    versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n    search: function (uastring) {\n      return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n    }\n  }, {\n    name: 'Chrome',\n    brand: 'Chromium',\n    versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/, normalVersionRegex],\n    search: function (uastring) {\n      return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n    }\n  }, {\n    name: 'IE',\n    versionRegexes: [/.*?msie\\ ?([0-9]+)\\.([0-9]+).*/, /.*?rv:([0-9]+)\\.([0-9]+).*/],\n    search: function (uastring) {\n      return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n    }\n  }, {\n    name: 'Opera',\n    versionRegexes: [normalVersionRegex, /.*?opera\\/([0-9]+)\\.([0-9]+).*/],\n    search: checkContains('opera')\n  }, {\n    name: 'Firefox',\n    versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n    search: checkContains('firefox')\n  }, {\n    name: 'Safari',\n    versionRegexes: [normalVersionRegex, /.*?cpu os ([0-9]+)_([0-9]+).*/],\n    search: function (uastring) {\n      return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n    }\n  }];\n  var oses = [{\n    name: 'Windows',\n    search: checkContains('win'),\n    versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n  }, {\n    name: 'iOS',\n    search: function (uastring) {\n      return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n    },\n    versionRegexes: [/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/, /.*cpu os ([0-9]+)_([0-9]+).*/, /.*cpu iphone os ([0-9]+)_([0-9]+).*/]\n  }, {\n    name: 'Android',\n    search: checkContains('android'),\n    versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n  }, {\n    name: 'OSX',\n    search: checkContains('mac os x'),\n    versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n  }, {\n    name: 'Linux',\n    search: checkContains('linux'),\n    versionRegexes: []\n  }, {\n    name: 'Solaris',\n    search: checkContains('sunos'),\n    versionRegexes: []\n  }, {\n    name: 'FreeBSD',\n    search: checkContains('freebsd'),\n    versionRegexes: []\n  }, {\n    name: 'ChromeOS',\n    search: checkContains('cros'),\n    versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n  }];\n  var PlatformInfo = {\n    browsers: constant(browsers),\n    oses: constant(oses)\n  };\n  var edge = 'Edge';\n  var chrome = 'Chrome';\n  var ie = 'IE';\n  var opera = 'Opera';\n  var firefox = 'Firefox';\n  var safari = 'Safari';\n\n  var unknown$1 = function () {\n    return nu$1({\n      current: undefined,\n      version: Version.unknown()\n    });\n  };\n\n  var nu$1 = function (info) {\n    var current = info.current;\n    var version = info.version;\n\n    var isBrowser = function (name) {\n      return function () {\n        return current === name;\n      };\n    };\n\n    return {\n      current: current,\n      version: version,\n      isEdge: isBrowser(edge),\n      isChrome: isBrowser(chrome),\n      isIE: isBrowser(ie),\n      isOpera: isBrowser(opera),\n      isFirefox: isBrowser(firefox),\n      isSafari: isBrowser(safari)\n    };\n  };\n\n  var Browser = {\n    unknown: unknown$1,\n    nu: nu$1,\n    edge: constant(edge),\n    chrome: constant(chrome),\n    ie: constant(ie),\n    opera: constant(opera),\n    firefox: constant(firefox),\n    safari: constant(safari)\n  };\n  var windows = 'Windows';\n  var ios = 'iOS';\n  var android = 'Android';\n  var linux = 'Linux';\n  var osx = 'OSX';\n  var solaris = 'Solaris';\n  var freebsd = 'FreeBSD';\n  var chromeos = 'ChromeOS';\n\n  var unknown = function () {\n    return nu({\n      current: undefined,\n      version: Version.unknown()\n    });\n  };\n\n  var nu = function (info) {\n    var current = info.current;\n    var version = info.version;\n\n    var isOS = function (name) {\n      return function () {\n        return current === name;\n      };\n    };\n\n    return {\n      current: current,\n      version: version,\n      isWindows: isOS(windows),\n      isiOS: isOS(ios),\n      isAndroid: isOS(android),\n      isOSX: isOS(osx),\n      isLinux: isOS(linux),\n      isSolaris: isOS(solaris),\n      isFreeBSD: isOS(freebsd),\n      isChromeOS: isOS(chromeos)\n    };\n  };\n\n  var OperatingSystem = {\n    unknown: unknown,\n    nu: nu,\n    windows: constant(windows),\n    ios: constant(ios),\n    android: constant(android),\n    linux: constant(linux),\n    osx: constant(osx),\n    solaris: constant(solaris),\n    freebsd: constant(freebsd),\n    chromeos: constant(chromeos)\n  };\n\n  var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n    var browsers = PlatformInfo.browsers();\n    var oses = PlatformInfo.oses();\n    var browser = userAgentDataOpt.bind(function (userAgentData) {\n      return detectBrowser$1(browsers, userAgentData);\n    }).orThunk(function () {\n      return detectBrowser(browsers, userAgent);\n    }).fold(Browser.unknown, Browser.nu);\n    var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n    var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n    return {\n      browser: browser,\n      os: os,\n      deviceType: deviceType\n    };\n  };\n\n  var PlatformDetection = {\n    detect: detect$1\n  };\n\n  var mediaMatch = function (query) {\n    return window.matchMedia(query).matches;\n  };\n\n  var platform = cached(function () {\n    return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n  });\n\n  var detect = function () {\n    return platform();\n  };\n\n  var compareDocumentPosition = function (a, b, match) {\n    return (a.compareDocumentPosition(b) & match) !== 0;\n  };\n\n  var documentPositionContainedBy = function (a, b) {\n    return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n  };\n\n  var ELEMENT = 1;\n\n  var fromHtml = function (html, scope) {\n    var doc = scope || document;\n    var div = doc.createElement('div');\n    div.innerHTML = html;\n\n    if (!div.hasChildNodes() || div.childNodes.length > 1) {\n      console.error('HTML does not have a single root node', html);\n      throw new Error('HTML must have a single root node');\n    }\n\n    return fromDom(div.childNodes[0]);\n  };\n\n  var fromTag = function (tag, scope) {\n    var doc = scope || document;\n    var node = doc.createElement(tag);\n    return fromDom(node);\n  };\n\n  var fromText = function (text, scope) {\n    var doc = scope || document;\n    var node = doc.createTextNode(text);\n    return fromDom(node);\n  };\n\n  var fromDom = function (node) {\n    if (node === null || node === undefined) {\n      throw new Error('Node cannot be null or undefined');\n    }\n\n    return {\n      dom: node\n    };\n  };\n\n  var fromPoint = function (docElm, x, y) {\n    return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n  };\n\n  var SugarElement = {\n    fromHtml: fromHtml,\n    fromTag: fromTag,\n    fromText: fromText,\n    fromDom: fromDom,\n    fromPoint: fromPoint\n  };\n\n  var is$2 = function (element, selector) {\n    var dom = element.dom;\n\n    if (dom.nodeType !== ELEMENT) {\n      return false;\n    } else {\n      var elem = dom;\n\n      if (elem.matches !== undefined) {\n        return elem.matches(selector);\n      } else if (elem.msMatchesSelector !== undefined) {\n        return elem.msMatchesSelector(selector);\n      } else if (elem.webkitMatchesSelector !== undefined) {\n        return elem.webkitMatchesSelector(selector);\n      } else if (elem.mozMatchesSelector !== undefined) {\n        return elem.mozMatchesSelector(selector);\n      } else {\n        throw new Error('Browser lacks native selectors');\n      }\n    }\n  };\n\n  var eq = function (e1, e2) {\n    return e1.dom === e2.dom;\n  };\n\n  var regularContains = function (e1, e2) {\n    var d1 = e1.dom;\n    var d2 = e2.dom;\n    return d1 === d2 ? false : d1.contains(d2);\n  };\n\n  var ieContains = function (e1, e2) {\n    return documentPositionContainedBy(e1.dom, e2.dom);\n  };\n\n  var contains = function (e1, e2) {\n    return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n  };\n\n  var is$1 = is$2;\n  var global$6 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n  var global$5 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n  var global$4 = tinymce.util.Tools.resolve('tinymce.util.VK');\n  var keys = Object.keys;\n\n  var each = function (obj, f) {\n    var props = keys(obj);\n\n    for (var k = 0, len = props.length; k < len; k++) {\n      var i = props[k];\n      var x = obj[i];\n      f(x, i);\n    }\n  };\n\n  var objAcc = function (r) {\n    return function (x, i) {\n      r[i] = x;\n    };\n  };\n\n  var internalFilter = function (obj, pred, onTrue, onFalse) {\n    var r = {};\n    each(obj, function (x, i) {\n      (pred(x, i) ? onTrue : onFalse)(x, i);\n    });\n    return r;\n  };\n\n  var filter = function (obj, pred) {\n    var t = {};\n    internalFilter(obj, pred, objAcc(t), noop);\n    return t;\n  };\n\n  typeof window !== 'undefined' ? window : Function('return this;')();\n\n  var name = function (element) {\n    var r = element.dom.nodeName;\n    return r.toLowerCase();\n  };\n\n  var type = function (element) {\n    return element.dom.nodeType;\n  };\n\n  var isType = function (t) {\n    return function (element) {\n      return type(element) === t;\n    };\n  };\n\n  var isElement = isType(ELEMENT);\n\n  var isTag = function (tag) {\n    return function (e) {\n      return isElement(e) && name(e) === tag;\n    };\n  };\n\n  var rawSet = function (dom, key, value) {\n    if (isString(value) || isBoolean(value) || isNumber(value)) {\n      dom.setAttribute(key, value + '');\n    } else {\n      console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n      throw new Error('Attribute value was not simple');\n    }\n  };\n\n  var setAll = function (element, attrs) {\n    var dom = element.dom;\n    each(attrs, function (v, k) {\n      rawSet(dom, k, v);\n    });\n  };\n\n  var clone$1 = function (element) {\n    return foldl(element.dom.attributes, function (acc, attr) {\n      acc[attr.name] = attr.value;\n      return acc;\n    }, {});\n  };\n\n  var parent = function (element) {\n    return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n  };\n\n  var children = function (element) {\n    return map(element.dom.childNodes, SugarElement.fromDom);\n  };\n\n  var child = function (element, index) {\n    var cs = element.dom.childNodes;\n    return Optional.from(cs[index]).map(SugarElement.fromDom);\n  };\n\n  var firstChild = function (element) {\n    return child(element, 0);\n  };\n\n  var lastChild = function (element) {\n    return child(element, element.dom.childNodes.length - 1);\n  };\n\n  var before$1 = function (marker, element) {\n    var parent$1 = parent(marker);\n    parent$1.each(function (v) {\n      v.dom.insertBefore(element.dom, marker.dom);\n    });\n  };\n\n  var append$1 = function (parent, element) {\n    parent.dom.appendChild(element.dom);\n  };\n\n  var before = function (marker, elements) {\n    each$1(elements, function (x) {\n      before$1(marker, x);\n    });\n  };\n\n  var append = function (parent, elements) {\n    each$1(elements, function (x) {\n      append$1(parent, x);\n    });\n  };\n\n  var remove = function (element) {\n    var dom = element.dom;\n\n    if (dom.parentNode !== null) {\n      dom.parentNode.removeChild(dom);\n    }\n  };\n\n  var clone = function (original, isDeep) {\n    return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n  };\n\n  var deep = function (original) {\n    return clone(original, true);\n  };\n\n  var shallowAs = function (original, tag) {\n    var nu = SugarElement.fromTag(tag);\n    var attributes = clone$1(original);\n    setAll(nu, attributes);\n    return nu;\n  };\n\n  var mutate = function (original, tag) {\n    var nu = shallowAs(original, tag);\n    before$1(original, nu);\n    var children$1 = children(original);\n    append(nu, children$1);\n    remove(original);\n    return nu;\n  };\n\n  var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n  var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n  var matchNodeName = function (name) {\n    return function (node) {\n      return node && node.nodeName.toLowerCase() === name;\n    };\n  };\n\n  var matchNodeNames = function (regex) {\n    return function (node) {\n      return node && regex.test(node.nodeName);\n    };\n  };\n\n  var isTextNode = function (node) {\n    return node && node.nodeType === 3;\n  };\n\n  var isListNode = matchNodeNames(/^(OL|UL|DL)$/);\n  var isOlUlNode = matchNodeNames(/^(OL|UL)$/);\n  var isOlNode = matchNodeName('ol');\n  var isListItemNode = matchNodeNames(/^(LI|DT|DD)$/);\n  var isDlItemNode = matchNodeNames(/^(DT|DD)$/);\n  var isTableCellNode = matchNodeNames(/^(TH|TD)$/);\n  var isBr = matchNodeName('br');\n\n  var isFirstChild = function (node) {\n    return node.parentNode.firstChild === node;\n  };\n\n  var isTextBlock = function (editor, node) {\n    return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n  };\n\n  var isBlock = function (node, blockElements) {\n    return node && node.nodeName in blockElements;\n  };\n\n  var isBogusBr = function (dom, node) {\n    if (!isBr(node)) {\n      return false;\n    }\n\n    return dom.isBlock(node.nextSibling) && !isBr(node.previousSibling);\n  };\n\n  var isEmpty = function (dom, elm, keepBookmarks) {\n    var empty = dom.isEmpty(elm);\n\n    if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n      return false;\n    }\n\n    return empty;\n  };\n\n  var isChildOfBody = function (dom, elm) {\n    return dom.isChildOf(elm, dom.getRoot());\n  };\n\n  var shouldIndentOnTab = function (editor) {\n    return editor.getParam('lists_indent_on_tab', true);\n  };\n\n  var getForcedRootBlock = function (editor) {\n    var block = editor.getParam('forced_root_block', 'p');\n\n    if (block === false) {\n      return '';\n    } else if (block === true) {\n      return 'p';\n    } else {\n      return block;\n    }\n  };\n\n  var getForcedRootBlockAttrs = function (editor) {\n    return editor.getParam('forced_root_block_attrs', {});\n  };\n\n  var createTextBlock = function (editor, contentNode) {\n    var dom = editor.dom;\n    var blockElements = editor.schema.getBlockElements();\n    var fragment = dom.createFragment();\n    var blockName = getForcedRootBlock(editor);\n    var node, textBlock, hasContentNode;\n\n    if (blockName) {\n      textBlock = dom.create(blockName);\n\n      if (textBlock.tagName === blockName.toUpperCase()) {\n        dom.setAttribs(textBlock, getForcedRootBlockAttrs(editor));\n      }\n\n      if (!isBlock(contentNode.firstChild, blockElements)) {\n        fragment.appendChild(textBlock);\n      }\n    }\n\n    if (contentNode) {\n      while (node = contentNode.firstChild) {\n        var nodeName = node.nodeName;\n\n        if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n          hasContentNode = true;\n        }\n\n        if (isBlock(node, blockElements)) {\n          fragment.appendChild(node);\n          textBlock = null;\n        } else {\n          if (blockName) {\n            if (!textBlock) {\n              textBlock = dom.create(blockName);\n              fragment.appendChild(textBlock);\n            }\n\n            textBlock.appendChild(node);\n          } else {\n            fragment.appendChild(node);\n          }\n        }\n      }\n    }\n\n    if (!blockName) {\n      fragment.appendChild(dom.create('br'));\n    } else {\n      if (!hasContentNode) {\n        textBlock.appendChild(dom.create('br', {\n          'data-mce-bogus': '1'\n        }));\n      }\n    }\n\n    return fragment;\n  };\n\n  var DOM$2 = global$3.DOM;\n\n  var splitList = function (editor, list, li) {\n    var removeAndKeepBookmarks = function (targetNode) {\n      global$2.each(bookmarks, function (node) {\n        targetNode.parentNode.insertBefore(node, li.parentNode);\n      });\n      DOM$2.remove(targetNode);\n    };\n\n    var bookmarks = DOM$2.select('span[data-mce-type=\"bookmark\"]', list);\n    var newBlock = createTextBlock(editor, li);\n    var tmpRng = DOM$2.createRng();\n    tmpRng.setStartAfter(li);\n    tmpRng.setEndAfter(list);\n    var fragment = tmpRng.extractContents();\n\n    for (var node = fragment.firstChild; node; node = node.firstChild) {\n      if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n        DOM$2.remove(node);\n        break;\n      }\n    }\n\n    if (!editor.dom.isEmpty(fragment)) {\n      DOM$2.insertAfter(fragment, list);\n    }\n\n    DOM$2.insertAfter(newBlock, list);\n\n    if (isEmpty(editor.dom, li.parentNode)) {\n      removeAndKeepBookmarks(li.parentNode);\n    }\n\n    DOM$2.remove(li);\n\n    if (isEmpty(editor.dom, list)) {\n      DOM$2.remove(list);\n    }\n  };\n\n  var isDescriptionDetail = isTag('dd');\n  var isDescriptionTerm = isTag('dt');\n\n  var outdentDlItem = function (editor, item) {\n    if (isDescriptionDetail(item)) {\n      mutate(item, 'dt');\n    } else if (isDescriptionTerm(item)) {\n      parent(item).each(function (dl) {\n        return splitList(editor, dl.dom, item.dom);\n      });\n    }\n  };\n\n  var indentDlItem = function (item) {\n    if (isDescriptionTerm(item)) {\n      mutate(item, 'dd');\n    }\n  };\n\n  var dlIndentation = function (editor, indentation, dlItems) {\n    if (indentation === 'Indent') {\n      each$1(dlItems, indentDlItem);\n    } else {\n      each$1(dlItems, function (item) {\n        return outdentDlItem(editor, item);\n      });\n    }\n  };\n\n  var getNormalizedPoint = function (container, offset) {\n    if (isTextNode(container)) {\n      return {\n        container: container,\n        offset: offset\n      };\n    }\n\n    var node = global$6.getNode(container, offset);\n\n    if (isTextNode(node)) {\n      return {\n        container: node,\n        offset: offset >= container.childNodes.length ? node.data.length : 0\n      };\n    } else if (node.previousSibling && isTextNode(node.previousSibling)) {\n      return {\n        container: node.previousSibling,\n        offset: node.previousSibling.data.length\n      };\n    } else if (node.nextSibling && isTextNode(node.nextSibling)) {\n      return {\n        container: node.nextSibling,\n        offset: 0\n      };\n    }\n\n    return {\n      container: container,\n      offset: offset\n    };\n  };\n\n  var normalizeRange = function (rng) {\n    var outRng = rng.cloneRange();\n    var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n    outRng.setStart(rangeStart.container, rangeStart.offset);\n    var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n    outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n    return outRng;\n  };\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n  var getParentList = function (editor, node) {\n    var selectionStart = node || editor.selection.getStart(true);\n    return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n  };\n\n  var isParentListSelected = function (parentList, selectedBlocks) {\n    return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n  };\n\n  var findSubLists = function (parentList) {\n    return filter$1(parentList.querySelectorAll('ol,ul,dl'), isListNode);\n  };\n\n  var getSelectedSubLists = function (editor) {\n    var parentList = getParentList(editor);\n    var selectedBlocks = editor.selection.getSelectedBlocks();\n\n    if (isParentListSelected(parentList, selectedBlocks)) {\n      return findSubLists(parentList);\n    } else {\n      return filter$1(selectedBlocks, function (elm) {\n        return isListNode(elm) && parentList !== elm;\n      });\n    }\n  };\n\n  var findParentListItemsNodes = function (editor, elms) {\n    var listItemsElms = global$2.map(elms, function (elm) {\n      var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n      return parentLi ? parentLi : elm;\n    });\n    return global$1.unique(listItemsElms);\n  };\n\n  var getSelectedListItems = function (editor) {\n    var selectedBlocks = editor.selection.getSelectedBlocks();\n    return filter$1(findParentListItemsNodes(editor, selectedBlocks), isListItemNode);\n  };\n\n  var getSelectedDlItems = function (editor) {\n    return filter$1(getSelectedListItems(editor), isDlItemNode);\n  };\n\n  var getClosestListRootElm = function (editor, elm) {\n    var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n    return parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n  };\n\n  var findLastParentListNode = function (editor, elm) {\n    var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n    return last(parentLists);\n  };\n\n  var getSelectedLists = function (editor) {\n    var firstList = findLastParentListNode(editor, editor.selection.getStart());\n    var subsequentLists = filter$1(editor.selection.getSelectedBlocks(), isOlUlNode);\n    return firstList.toArray().concat(subsequentLists);\n  };\n\n  var getSelectedListRoots = function (editor) {\n    var selectedLists = getSelectedLists(editor);\n    return getUniqueListRoots(editor, selectedLists);\n  };\n\n  var getUniqueListRoots = function (editor, lists) {\n    var listRoots = map(lists, function (list) {\n      return findLastParentListNode(editor, list).getOr(list);\n    });\n    return global$1.unique(listRoots);\n  };\n\n  var is = function (lhs, rhs, comparator) {\n    if (comparator === void 0) {\n      comparator = tripleEquals;\n    }\n\n    return lhs.exists(function (left) {\n      return comparator(left, rhs);\n    });\n  };\n\n  var lift2 = function (oa, ob, f) {\n    return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n  };\n\n  var fromElements = function (elements, scope) {\n    var doc = scope || document;\n    var fragment = doc.createDocumentFragment();\n    each$1(elements, function (element) {\n      fragment.appendChild(element.dom);\n    });\n    return SugarElement.fromDom(fragment);\n  };\n\n  var fireListEvent = function (editor, action, element) {\n    return editor.fire('ListMutation', {\n      action: action,\n      element: element\n    });\n  };\n\n  var isSupported = function (dom) {\n    return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n  };\n\n  var internalSet = function (dom, property, value) {\n    if (!isString(value)) {\n      console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n      throw new Error('CSS value must be a string: ' + value);\n    }\n\n    if (isSupported(dom)) {\n      dom.style.setProperty(property, value);\n    }\n  };\n\n  var set = function (element, property, value) {\n    var dom = element.dom;\n    internalSet(dom, property, value);\n  };\n\n  var joinSegment = function (parent, child) {\n    append$1(parent.item, child.list);\n  };\n\n  var joinSegments = function (segments) {\n    for (var i = 1; i < segments.length; i++) {\n      joinSegment(segments[i - 1], segments[i]);\n    }\n  };\n\n  var appendSegments = function (head$1, tail) {\n    lift2(last(head$1), head(tail), joinSegment);\n  };\n\n  var createSegment = function (scope, listType) {\n    var segment = {\n      list: SugarElement.fromTag(listType, scope),\n      item: SugarElement.fromTag('li', scope)\n    };\n    append$1(segment.list, segment.item);\n    return segment;\n  };\n\n  var createSegments = function (scope, entry, size) {\n    var segments = [];\n\n    for (var i = 0; i < size; i++) {\n      segments.push(createSegment(scope, entry.listType));\n    }\n\n    return segments;\n  };\n\n  var populateSegments = function (segments, entry) {\n    for (var i = 0; i < segments.length - 1; i++) {\n      set(segments[i].item, 'list-style-type', 'none');\n    }\n\n    last(segments).each(function (segment) {\n      setAll(segment.list, entry.listAttributes);\n      setAll(segment.item, entry.itemAttributes);\n      append(segment.item, entry.content);\n    });\n  };\n\n  var normalizeSegment = function (segment, entry) {\n    if (name(segment.list) !== entry.listType) {\n      segment.list = mutate(segment.list, entry.listType);\n    }\n\n    setAll(segment.list, entry.listAttributes);\n  };\n\n  var createItem = function (scope, attr, content) {\n    var item = SugarElement.fromTag('li', scope);\n    setAll(item, attr);\n    append(item, content);\n    return item;\n  };\n\n  var appendItem = function (segment, item) {\n    append$1(segment.list, item);\n    segment.item = item;\n  };\n\n  var writeShallow = function (scope, cast, entry) {\n    var newCast = cast.slice(0, entry.depth);\n    last(newCast).each(function (segment) {\n      var item = createItem(scope, entry.itemAttributes, entry.content);\n      appendItem(segment, item);\n      normalizeSegment(segment, entry);\n    });\n    return newCast;\n  };\n\n  var writeDeep = function (scope, cast, entry) {\n    var segments = createSegments(scope, entry, entry.depth - cast.length);\n    joinSegments(segments);\n    populateSegments(segments, entry);\n    appendSegments(cast, segments);\n    return cast.concat(segments);\n  };\n\n  var composeList = function (scope, entries) {\n    var cast = foldl(entries, function (cast, entry) {\n      return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n    }, []);\n    return head(cast).map(function (segment) {\n      return segment.list;\n    });\n  };\n\n  var isList = function (el) {\n    return is$1(el, 'OL,UL');\n  };\n\n  var hasFirstChildList = function (el) {\n    return firstChild(el).exists(isList);\n  };\n\n  var hasLastChildList = function (el) {\n    return lastChild(el).exists(isList);\n  };\n\n  var isIndented = function (entry) {\n    return entry.depth > 0;\n  };\n\n  var isSelected = function (entry) {\n    return entry.isSelected;\n  };\n\n  var cloneItemContent = function (li) {\n    var children$1 = children(li);\n    var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n    return map(content, deep);\n  };\n\n  var createEntry = function (li, depth, isSelected) {\n    return parent(li).filter(isElement).map(function (list) {\n      return {\n        depth: depth,\n        dirty: false,\n        isSelected: isSelected,\n        content: cloneItemContent(li),\n        itemAttributes: clone$1(li),\n        listAttributes: clone$1(list),\n        listType: name(list)\n      };\n    });\n  };\n\n  var indentEntry = function (indentation, entry) {\n    switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n\n      case 'Outdent':\n        entry.depth--;\n        break;\n\n      case 'Flatten':\n        entry.depth = 0;\n    }\n\n    entry.dirty = true;\n  };\n\n  var cloneListProperties = function (target, source) {\n    target.listType = source.listType;\n    target.listAttributes = __assign({}, source.listAttributes);\n  };\n\n  var cleanListProperties = function (entry) {\n    entry.listAttributes = filter(entry.listAttributes, function (_value, key) {\n      return key !== 'start';\n    });\n  };\n\n  var closestSiblingEntry = function (entries, start) {\n    var depth = entries[start].depth;\n\n    var matches = function (entry) {\n      return entry.depth === depth && !entry.dirty;\n    };\n\n    var until = function (entry) {\n      return entry.depth < depth;\n    };\n\n    return findUntil(reverse(entries.slice(0, start)), matches, until).orThunk(function () {\n      return findUntil(entries.slice(start + 1), matches, until);\n    });\n  };\n\n  var normalizeEntries = function (entries) {\n    each$1(entries, function (entry, i) {\n      closestSiblingEntry(entries, i).fold(function () {\n        if (entry.dirty) {\n          cleanListProperties(entry);\n        }\n      }, function (matchingEntry) {\n        return cloneListProperties(entry, matchingEntry);\n      });\n    });\n    return entries;\n  };\n\n  var Cell = function (initial) {\n    var value = initial;\n\n    var get = function () {\n      return value;\n    };\n\n    var set = function (v) {\n      value = v;\n    };\n\n    return {\n      get: get,\n      set: set\n    };\n  };\n\n  var parseItem = function (depth, itemSelection, selectionState, item) {\n    return firstChild(item).filter(isList).fold(function () {\n      itemSelection.each(function (selection) {\n        if (eq(selection.start, item)) {\n          selectionState.set(true);\n        }\n      });\n      var currentItemEntry = createEntry(item, depth, selectionState.get());\n      itemSelection.each(function (selection) {\n        if (eq(selection.end, item)) {\n          selectionState.set(false);\n        }\n      });\n      var childListEntries = lastChild(item).filter(isList).map(function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      }).getOr([]);\n      return currentItemEntry.toArray().concat(childListEntries);\n    }, function (list) {\n      return parseList(depth, itemSelection, selectionState, list);\n    });\n  };\n\n  var parseList = function (depth, itemSelection, selectionState, list) {\n    return bind(children(list), function (element) {\n      var parser = isList(element) ? parseList : parseItem;\n      var newDepth = depth + 1;\n      return parser(newDepth, itemSelection, selectionState, element);\n    });\n  };\n\n  var parseLists = function (lists, itemSelection) {\n    var selectionState = Cell(false);\n    var initialDepth = 0;\n    return map(lists, function (list) {\n      return {\n        sourceList: list,\n        entries: parseList(initialDepth, itemSelection, selectionState, list)\n      };\n    });\n  };\n\n  var outdentedComposer = function (editor, entries) {\n    var normalizedEntries = normalizeEntries(entries);\n    return map(normalizedEntries, function (entry) {\n      var content = fromElements(entry.content);\n      return SugarElement.fromDom(createTextBlock(editor, content.dom));\n    });\n  };\n\n  var indentedComposer = function (editor, entries) {\n    var normalizedEntries = normalizeEntries(entries);\n    return composeList(editor.contentDocument, normalizedEntries).toArray();\n  };\n\n  var composeEntries = function (editor, entries) {\n    return bind(groupBy(entries, isIndented), function (entries) {\n      var groupIsIndented = head(entries).exists(isIndented);\n      return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n    });\n  };\n\n  var indentSelectedEntries = function (entries, indentation) {\n    each$1(filter$1(entries, isSelected), function (entry) {\n      return indentEntry(indentation, entry);\n    });\n  };\n\n  var getItemSelection = function (editor) {\n    var selectedListItems = map(getSelectedListItems(editor), SugarElement.fromDom);\n    return lift2(find$1(selectedListItems, not(hasFirstChildList)), find$1(reverse(selectedListItems), not(hasFirstChildList)), function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    });\n  };\n\n  var listIndentation = function (editor, lists, indentation) {\n    var entrySets = parseLists(lists, getItemSelection(editor));\n    each$1(entrySets, function (entrySet) {\n      indentSelectedEntries(entrySet.entries, indentation);\n      var composedLists = composeEntries(editor, entrySet.entries);\n      each$1(composedLists, function (composedList) {\n        fireListEvent(editor, indentation === 'Indent' ? 'IndentList' : 'OutdentList', composedList.dom);\n      });\n      before(entrySet.sourceList, composedLists);\n      remove(entrySet.sourceList);\n    });\n  };\n\n  var selectionIndentation = function (editor, indentation) {\n    var lists = map(getSelectedListRoots(editor), SugarElement.fromDom);\n    var dlItems = map(getSelectedDlItems(editor), SugarElement.fromDom);\n    var isHandled = false;\n\n    if (lists.length || dlItems.length) {\n      var bookmark = editor.selection.getBookmark();\n      listIndentation(editor, lists, indentation);\n      dlIndentation(editor, indentation, dlItems);\n      editor.selection.moveToBookmark(bookmark);\n      editor.selection.setRng(normalizeRange(editor.selection.getRng()));\n      editor.nodeChanged();\n      isHandled = true;\n    }\n\n    return isHandled;\n  };\n\n  var indentListSelection = function (editor) {\n    return selectionIndentation(editor, 'Indent');\n  };\n\n  var outdentListSelection = function (editor) {\n    return selectionIndentation(editor, 'Outdent');\n  };\n\n  var flattenListSelection = function (editor) {\n    return selectionIndentation(editor, 'Flatten');\n  };\n\n  var global = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n  var DOM$1 = global$3.DOM;\n\n  var createBookmark = function (rng) {\n    var bookmark = {};\n\n    var setupEndPoint = function (start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n\n      if (container.nodeType === 1) {\n        var offsetNode = DOM$1.create('span', {\n          'data-mce-type': 'bookmark'\n        });\n\n        if (container.hasChildNodes()) {\n          offset = Math.min(offset, container.childNodes.length - 1);\n\n          if (start) {\n            container.insertBefore(offsetNode, container.childNodes[offset]);\n          } else {\n            DOM$1.insertAfter(offsetNode, container.childNodes[offset]);\n          }\n        } else {\n          container.appendChild(offsetNode);\n        }\n\n        container = offsetNode;\n        offset = 0;\n      }\n\n      bookmark[start ? 'startContainer' : 'endContainer'] = container;\n      bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n    };\n\n    setupEndPoint(true);\n\n    if (!rng.collapsed) {\n      setupEndPoint();\n    }\n\n    return bookmark;\n  };\n\n  var resolveBookmark = function (bookmark) {\n    var restoreEndPoint = function (start) {\n      var node;\n\n      var nodeIndex = function (container) {\n        var node = container.parentNode.firstChild,\n            idx = 0;\n\n        while (node) {\n          if (node === container) {\n            return idx;\n          }\n\n          if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n            idx++;\n          }\n\n          node = node.nextSibling;\n        }\n\n        return -1;\n      };\n\n      var container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n      var offset = bookmark[start ? 'startOffset' : 'endOffset'];\n\n      if (!container) {\n        return;\n      }\n\n      if (container.nodeType === 1) {\n        offset = nodeIndex(container);\n        container = container.parentNode;\n        DOM$1.remove(node);\n\n        if (!container.hasChildNodes() && DOM$1.isBlock(container)) {\n          container.appendChild(DOM$1.create('br'));\n        }\n      }\n\n      bookmark[start ? 'startContainer' : 'endContainer'] = container;\n      bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n    };\n\n    restoreEndPoint(true);\n    restoreEndPoint();\n    var rng = DOM$1.createRng();\n    rng.setStart(bookmark.startContainer, bookmark.startOffset);\n\n    if (bookmark.endContainer) {\n      rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n    }\n\n    return normalizeRange(rng);\n  };\n\n  var listToggleActionFromListName = function (listName) {\n    switch (listName) {\n      case 'UL':\n        return 'ToggleUlList';\n\n      case 'OL':\n        return 'ToggleOlList';\n\n      case 'DL':\n        return 'ToggleDLList';\n    }\n  };\n\n  var isCustomList = function (list) {\n    return /\\btox\\-/.test(list.className);\n  };\n\n  var listState = function (editor, listName, activate) {\n    var nodeChangeHandler = function (e) {\n      var inList = findUntil(e.parents, isListNode, isTableCellNode).filter(function (list) {\n        return list.nodeName === listName && !isCustomList(list);\n      }).isSome();\n      activate(inList);\n    };\n\n    var parents = editor.dom.getParents(editor.selection.getNode());\n    nodeChangeHandler({\n      parents: parents\n    });\n    editor.on('NodeChange', nodeChangeHandler);\n    return function () {\n      return editor.off('NodeChange', nodeChangeHandler);\n    };\n  };\n\n  var updateListStyle = function (dom, el, detail) {\n    var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n    dom.setStyle(el, 'list-style-type', type);\n  };\n\n  var setAttribs = function (elm, attrs) {\n    global$2.each(attrs, function (value, key) {\n      elm.setAttribute(key, value);\n    });\n  };\n\n  var updateListAttrs = function (dom, el, detail) {\n    setAttribs(el, detail['list-attributes']);\n    global$2.each(dom.select('li', el), function (li) {\n      setAttribs(li, detail['list-item-attributes']);\n    });\n  };\n\n  var updateListWithDetails = function (dom, el, detail) {\n    updateListStyle(dom, el, detail);\n    updateListAttrs(dom, el, detail);\n  };\n\n  var removeStyles = function (dom, element, styles) {\n    global$2.each(styles, function (style) {\n      var _a;\n\n      return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n    });\n  };\n\n  var getEndPointNode = function (editor, rng, start, root) {\n    var container = rng[start ? 'startContainer' : 'endContainer'];\n    var offset = rng[start ? 'startOffset' : 'endOffset'];\n\n    if (container.nodeType === 1) {\n      container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n    }\n\n    if (!start && isBr(container.nextSibling)) {\n      container = container.nextSibling;\n    }\n\n    while (container.parentNode !== root) {\n      if (isTextBlock(editor, container)) {\n        return container;\n      }\n\n      if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n        return container;\n      }\n\n      container = container.parentNode;\n    }\n\n    return container;\n  };\n\n  var getSelectedTextBlocks = function (editor, rng, root) {\n    var textBlocks = [];\n    var dom = editor.dom;\n    var startNode = getEndPointNode(editor, rng, true, root);\n    var endNode = getEndPointNode(editor, rng, false, root);\n    var block;\n    var siblings = [];\n\n    for (var node = startNode; node; node = node.nextSibling) {\n      siblings.push(node);\n\n      if (node === endNode) {\n        break;\n      }\n    }\n\n    global$2.each(siblings, function (node) {\n      if (isTextBlock(editor, node)) {\n        textBlocks.push(node);\n        block = null;\n        return;\n      }\n\n      if (dom.isBlock(node) || isBr(node)) {\n        if (isBr(node)) {\n          dom.remove(node);\n        }\n\n        block = null;\n        return;\n      }\n\n      var nextSibling = node.nextSibling;\n\n      if (global.isBookmarkNode(node)) {\n        if (isListNode(nextSibling) || isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n          block = null;\n          return;\n        }\n      }\n\n      if (!block) {\n        block = dom.create('p');\n        node.parentNode.insertBefore(block, node);\n        textBlocks.push(block);\n      }\n\n      block.appendChild(node);\n    });\n    return textBlocks;\n  };\n\n  var hasCompatibleStyle = function (dom, sib, detail) {\n    var sibStyle = dom.getStyle(sib, 'list-style-type');\n    var detailStyle = detail ? detail['list-style-type'] : '';\n    detailStyle = detailStyle === null ? '' : detailStyle;\n    return sibStyle === detailStyle;\n  };\n\n  var applyList = function (editor, listName, detail) {\n    var rng = editor.selection.getRng();\n    var listItemName = 'LI';\n    var root = getClosestListRootElm(editor, editor.selection.getStart(true));\n    var dom = editor.dom;\n\n    if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n      return;\n    }\n\n    listName = listName.toUpperCase();\n\n    if (listName === 'DL') {\n      listItemName = 'DT';\n    }\n\n    var bookmark = createBookmark(rng);\n    var selectedTextBlocks = getSelectedTextBlocks(editor, rng, root);\n    global$2.each(selectedTextBlocks, function (block) {\n      var listBlock;\n      var sibling = block.previousSibling;\n      var parent = block.parentNode;\n\n      if (!isListItemNode(parent)) {\n        if (sibling && isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n          listBlock = sibling;\n          block = dom.rename(block, listItemName);\n          sibling.appendChild(block);\n        } else {\n          listBlock = dom.create(listName);\n          block.parentNode.insertBefore(listBlock, block);\n          listBlock.appendChild(block);\n          block = dom.rename(block, listItemName);\n        }\n\n        removeStyles(dom, block, ['margin', 'margin-right', 'margin-bottom', 'margin-left', 'margin-top', 'padding', 'padding-right', 'padding-bottom', 'padding-left', 'padding-top']);\n        updateListWithDetails(dom, listBlock, detail);\n        mergeWithAdjacentLists(editor.dom, listBlock);\n      }\n    });\n    editor.selection.setRng(resolveBookmark(bookmark));\n  };\n\n  var isValidLists = function (list1, list2) {\n    return list1 && list2 && isListNode(list1) && list1.nodeName === list2.nodeName;\n  };\n\n  var hasSameListStyle = function (dom, list1, list2) {\n    var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n    var style = dom.getStyle(list2, 'list-style-type', true);\n    return targetStyle === style;\n  };\n\n  var hasSameClasses = function (elm1, elm2) {\n    return elm1.className === elm2.className;\n  };\n\n  var shouldMerge = function (dom, list1, list2) {\n    return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n  };\n\n  var mergeWithAdjacentLists = function (dom, listBlock) {\n    var sibling, node;\n    sibling = listBlock.nextSibling;\n\n    if (shouldMerge(dom, listBlock, sibling)) {\n      while (node = sibling.firstChild) {\n        listBlock.appendChild(node);\n      }\n\n      dom.remove(sibling);\n    }\n\n    sibling = listBlock.previousSibling;\n\n    if (shouldMerge(dom, listBlock, sibling)) {\n      while (node = sibling.lastChild) {\n        listBlock.insertBefore(node, listBlock.firstChild);\n      }\n\n      dom.remove(sibling);\n    }\n  };\n\n  var updateList$1 = function (editor, list, listName, detail) {\n    if (list.nodeName !== listName) {\n      var newList = editor.dom.rename(list, listName);\n      updateListWithDetails(editor.dom, newList, detail);\n      fireListEvent(editor, listToggleActionFromListName(listName), newList);\n    } else {\n      updateListWithDetails(editor.dom, list, detail);\n      fireListEvent(editor, listToggleActionFromListName(listName), list);\n    }\n  };\n\n  var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n    var parentIsList = isListNode(parentList);\n\n    if (parentIsList && parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n      flattenListSelection(editor);\n    } else {\n      applyList(editor, listName, detail);\n      var bookmark = createBookmark(editor.selection.getRng());\n      var allLists = parentIsList ? __spreadArray([parentList], lists, true) : lists;\n      global$2.each(allLists, function (elm) {\n        updateList$1(editor, elm, listName, detail);\n      });\n      editor.selection.setRng(resolveBookmark(bookmark));\n    }\n  };\n\n  var hasListStyleDetail = function (detail) {\n    return 'list-style-type' in detail;\n  };\n\n  var toggleSingleList = function (editor, parentList, listName, detail) {\n    if (parentList === editor.getBody()) {\n      return;\n    }\n\n    if (parentList) {\n      if (parentList.nodeName === listName && !hasListStyleDetail(detail) && !isCustomList(parentList)) {\n        flattenListSelection(editor);\n      } else {\n        var bookmark = createBookmark(editor.selection.getRng());\n        updateListWithDetails(editor.dom, parentList, detail);\n        var newList = editor.dom.rename(parentList, listName);\n        mergeWithAdjacentLists(editor.dom, newList);\n        editor.selection.setRng(resolveBookmark(bookmark));\n        applyList(editor, listName, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), newList);\n      }\n    } else {\n      applyList(editor, listName, detail);\n      fireListEvent(editor, listToggleActionFromListName(listName), parentList);\n    }\n  };\n\n  var toggleList = function (editor, listName, _detail) {\n    var parentList = getParentList(editor);\n    var selectedSubLists = getSelectedSubLists(editor);\n    var detail = isObject(_detail) ? _detail : {};\n\n    if (selectedSubLists.length > 0) {\n      toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n    } else {\n      toggleSingleList(editor, parentList, listName, detail);\n    }\n  };\n\n  var DOM = global$3.DOM;\n\n  var normalizeList = function (dom, list) {\n    var parentNode = list.parentNode;\n\n    if (parentNode.nodeName === 'LI' && parentNode.firstChild === list) {\n      var sibling = parentNode.previousSibling;\n\n      if (sibling && sibling.nodeName === 'LI') {\n        sibling.appendChild(list);\n\n        if (isEmpty(dom, parentNode)) {\n          DOM.remove(parentNode);\n        }\n      } else {\n        DOM.setStyle(parentNode, 'listStyleType', 'none');\n      }\n    }\n\n    if (isListNode(parentNode)) {\n      var sibling = parentNode.previousSibling;\n\n      if (sibling && sibling.nodeName === 'LI') {\n        sibling.appendChild(list);\n      }\n    }\n  };\n\n  var normalizeLists = function (dom, element) {\n    var lists = global$2.grep(dom.select('ol,ul', element));\n    global$2.each(lists, function (list) {\n      normalizeList(dom, list);\n    });\n  };\n\n  var findNextCaretContainer = function (editor, rng, isForward, root) {\n    var node = rng.startContainer;\n    var offset = rng.startOffset;\n\n    if (isTextNode(node) && (isForward ? offset < node.data.length : offset > 0)) {\n      return node;\n    }\n\n    var nonEmptyBlocks = editor.schema.getNonEmptyElements();\n\n    if (node.nodeType === 1) {\n      node = global$6.getNode(node, offset);\n    }\n\n    var walker = new global$5(node, root);\n\n    if (isForward) {\n      if (isBogusBr(editor.dom, node)) {\n        walker.next();\n      }\n    }\n\n    while (node = walker[isForward ? 'next' : 'prev2']()) {\n      if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n        return node;\n      }\n\n      if (nonEmptyBlocks[node.nodeName]) {\n        return node;\n      }\n\n      if (isTextNode(node) && node.data.length > 0) {\n        return node;\n      }\n    }\n  };\n\n  var hasOnlyOneBlockChild = function (dom, elm) {\n    var childNodes = elm.childNodes;\n    return childNodes.length === 1 && !isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n  };\n\n  var unwrapSingleBlockChild = function (dom, elm) {\n    if (hasOnlyOneBlockChild(dom, elm)) {\n      dom.remove(elm.firstChild, true);\n    }\n  };\n\n  var moveChildren = function (dom, fromElm, toElm) {\n    var node;\n    var targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n    unwrapSingleBlockChild(dom, fromElm);\n\n    if (!isEmpty(dom, fromElm, true)) {\n      while (node = fromElm.firstChild) {\n        targetElm.appendChild(node);\n      }\n    }\n  };\n\n  var mergeLiElements = function (dom, fromElm, toElm) {\n    var listNode;\n    var ul = fromElm.parentNode;\n\n    if (!isChildOfBody(dom, fromElm) || !isChildOfBody(dom, toElm)) {\n      return;\n    }\n\n    if (isListNode(toElm.lastChild)) {\n      listNode = toElm.lastChild;\n    }\n\n    if (ul === toElm.lastChild) {\n      if (isBr(ul.previousSibling)) {\n        dom.remove(ul.previousSibling);\n      }\n    }\n\n    var node = toElm.lastChild;\n\n    if (node && isBr(node) && fromElm.hasChildNodes()) {\n      dom.remove(node);\n    }\n\n    if (isEmpty(dom, toElm, true)) {\n      dom.$(toElm).empty();\n    }\n\n    moveChildren(dom, fromElm, toElm);\n\n    if (listNode) {\n      toElm.appendChild(listNode);\n    }\n\n    var contains$1 = contains(SugarElement.fromDom(toElm), SugarElement.fromDom(fromElm));\n    var nestedLists = contains$1 ? dom.getParents(fromElm, isListNode, toElm) : [];\n    dom.remove(fromElm);\n    each$1(nestedLists, function (list) {\n      if (isEmpty(dom, list) && list !== dom.getRoot()) {\n        dom.remove(list);\n      }\n    });\n  };\n\n  var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n    editor.dom.$(toLi).empty();\n    mergeLiElements(editor.dom, fromLi, toLi);\n    editor.selection.setCursorLocation(toLi, 0);\n  };\n\n  var mergeForward = function (editor, rng, fromLi, toLi) {\n    var dom = editor.dom;\n\n    if (dom.isEmpty(toLi)) {\n      mergeIntoEmptyLi(editor, fromLi, toLi);\n    } else {\n      var bookmark = createBookmark(rng);\n      mergeLiElements(dom, fromLi, toLi);\n      editor.selection.setRng(resolveBookmark(bookmark));\n    }\n  };\n\n  var mergeBackward = function (editor, rng, fromLi, toLi) {\n    var bookmark = createBookmark(rng);\n    mergeLiElements(editor.dom, fromLi, toLi);\n    var resolvedBookmark = resolveBookmark(bookmark);\n    editor.selection.setRng(resolvedBookmark);\n  };\n\n  var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n    var dom = editor.dom,\n        selection = editor.selection;\n    var selectionStartElm = selection.getStart();\n    var root = getClosestListRootElm(editor, selectionStartElm);\n    var li = dom.getParent(selection.getStart(), 'LI', root);\n\n    if (li) {\n      var ul = li.parentNode;\n\n      if (ul === editor.getBody() && isEmpty(dom, ul)) {\n        return true;\n      }\n\n      var rng_1 = normalizeRange(selection.getRng());\n      var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng_1, isForward, root), 'LI', root);\n\n      if (otherLi_1 && otherLi_1 !== li) {\n        editor.undoManager.transact(function () {\n          if (isForward) {\n            mergeForward(editor, rng_1, otherLi_1, li);\n          } else {\n            if (isFirstChild(li)) {\n              outdentListSelection(editor);\n            } else {\n              mergeBackward(editor, rng_1, li, otherLi_1);\n            }\n          }\n        });\n        return true;\n      } else if (!otherLi_1) {\n        if (!isForward && rng_1.startOffset === 0 && rng_1.endOffset === 0) {\n          editor.undoManager.transact(function () {\n            flattenListSelection(editor);\n          });\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  var removeBlock = function (dom, block, root) {\n    var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n    dom.remove(block);\n\n    if (parentBlock && dom.isEmpty(parentBlock)) {\n      dom.remove(parentBlock);\n    }\n  };\n\n  var backspaceDeleteIntoListCaret = function (editor, isForward) {\n    var dom = editor.dom;\n    var selectionStartElm = editor.selection.getStart();\n    var root = getClosestListRootElm(editor, selectionStartElm);\n    var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n\n    if (block && dom.isEmpty(block)) {\n      var rng = normalizeRange(editor.selection.getRng());\n      var otherLi_2 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n\n      if (otherLi_2) {\n        editor.undoManager.transact(function () {\n          removeBlock(dom, block, root);\n          mergeWithAdjacentLists(dom, otherLi_2.parentNode);\n          editor.selection.select(otherLi_2, true);\n          editor.selection.collapse(isForward);\n        });\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  var backspaceDeleteCaret = function (editor, isForward) {\n    return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n  };\n\n  var backspaceDeleteRange = function (editor) {\n    var selectionStartElm = editor.selection.getStart();\n    var root = getClosestListRootElm(editor, selectionStartElm);\n    var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n\n    if (startListParent || getSelectedListItems(editor).length > 0) {\n      editor.undoManager.transact(function () {\n        editor.execCommand('Delete');\n        normalizeLists(editor.dom, editor.getBody());\n      });\n      return true;\n    }\n\n    return false;\n  };\n\n  var backspaceDelete = function (editor, isForward) {\n    return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n  };\n\n  var setup$1 = function (editor) {\n    editor.on('keydown', function (e) {\n      if (e.keyCode === global$4.BACKSPACE) {\n        if (backspaceDelete(editor, false)) {\n          e.preventDefault();\n        }\n      } else if (e.keyCode === global$4.DELETE) {\n        if (backspaceDelete(editor, true)) {\n          e.preventDefault();\n        }\n      }\n    });\n  };\n\n  var get = function (editor) {\n    return {\n      backspaceDelete: function (isForward) {\n        backspaceDelete(editor, isForward);\n      }\n    };\n  };\n\n  var updateList = function (editor, update) {\n    var parentList = getParentList(editor);\n    editor.undoManager.transact(function () {\n      if (isObject(update.styles)) {\n        editor.dom.setStyles(parentList, update.styles);\n      }\n\n      if (isObject(update.attrs)) {\n        each(update.attrs, function (v, k) {\n          return editor.dom.setAttrib(parentList, k, v);\n        });\n      }\n    });\n  };\n\n  var parseAlphabeticBase26 = function (str) {\n    var chars = reverse(trim(str).split(''));\n    var values = map(chars, function (char, i) {\n      var charValue = char.toUpperCase().charCodeAt(0) - 'A'.charCodeAt(0) + 1;\n      return Math.pow(26, i) * charValue;\n    });\n    return foldl(values, function (sum, v) {\n      return sum + v;\n    }, 0);\n  };\n\n  var composeAlphabeticBase26 = function (value) {\n    value--;\n\n    if (value < 0) {\n      return '';\n    } else {\n      var remainder = value % 26;\n      var quotient = Math.floor(value / 26);\n      var rest = composeAlphabeticBase26(quotient);\n      var char = String.fromCharCode('A'.charCodeAt(0) + remainder);\n      return rest + char;\n    }\n  };\n\n  var isUppercase = function (str) {\n    return /^[A-Z]+$/.test(str);\n  };\n\n  var isLowercase = function (str) {\n    return /^[a-z]+$/.test(str);\n  };\n\n  var isNumeric = function (str) {\n    return /^[0-9]+$/.test(str);\n  };\n\n  var deduceListType = function (start) {\n    if (isNumeric(start)) {\n      return 2;\n    } else if (isUppercase(start)) {\n      return 0;\n    } else if (isLowercase(start)) {\n      return 1;\n    } else if (isEmpty$1(start)) {\n      return 3;\n    } else {\n      return 4;\n    }\n  };\n\n  var parseStartValue = function (start) {\n    switch (deduceListType(start)) {\n      case 2:\n        return Optional.some({\n          listStyleType: Optional.none(),\n          start: start\n        });\n\n      case 0:\n        return Optional.some({\n          listStyleType: Optional.some('upper-alpha'),\n          start: parseAlphabeticBase26(start).toString()\n        });\n\n      case 1:\n        return Optional.some({\n          listStyleType: Optional.some('lower-alpha'),\n          start: parseAlphabeticBase26(start).toString()\n        });\n\n      case 3:\n        return Optional.some({\n          listStyleType: Optional.none(),\n          start: ''\n        });\n\n      case 4:\n        return Optional.none();\n    }\n  };\n\n  var parseDetail = function (detail) {\n    var start = parseInt(detail.start, 10);\n\n    if (is(detail.listStyleType, 'upper-alpha')) {\n      return composeAlphabeticBase26(start);\n    } else if (is(detail.listStyleType, 'lower-alpha')) {\n      return composeAlphabeticBase26(start).toLowerCase();\n    } else {\n      return detail.start;\n    }\n  };\n\n  var open = function (editor) {\n    var currentList = getParentList(editor);\n\n    if (!isOlNode(currentList)) {\n      return;\n    }\n\n    editor.windowManager.open({\n      title: 'List Properties',\n      body: {\n        type: 'panel',\n        items: [{\n          type: 'input',\n          name: 'start',\n          label: 'Start list at number',\n          inputMode: 'numeric'\n        }]\n      },\n      initialData: {\n        start: parseDetail({\n          start: editor.dom.getAttrib(currentList, 'start', '1'),\n          listStyleType: Optional.some(editor.dom.getStyle(currentList, 'list-style-type'))\n        })\n      },\n      buttons: [{\n        type: 'cancel',\n        name: 'cancel',\n        text: 'Cancel'\n      }, {\n        type: 'submit',\n        name: 'save',\n        text: 'Save',\n        primary: true\n      }],\n      onSubmit: function (api) {\n        var data = api.getData();\n        parseStartValue(data.start).each(function (detail) {\n          editor.execCommand('mceListUpdate', false, {\n            attrs: {\n              start: detail.start === '1' ? '' : detail.start\n            },\n            styles: {\n              'list-style-type': detail.listStyleType.getOr('')\n            }\n          });\n        });\n        api.close();\n      }\n    });\n  };\n\n  var queryListCommandState = function (editor, listName) {\n    return function () {\n      var parentList = getParentList(editor);\n      return parentList && parentList.nodeName === listName;\n    };\n  };\n\n  var registerDialog = function (editor) {\n    editor.addCommand('mceListProps', function () {\n      open(editor);\n    });\n  };\n\n  var register$2 = function (editor) {\n    editor.on('BeforeExecCommand', function (e) {\n      var cmd = e.command.toLowerCase();\n\n      if (cmd === 'indent') {\n        indentListSelection(editor);\n      } else if (cmd === 'outdent') {\n        outdentListSelection(editor);\n      }\n    });\n    editor.addCommand('InsertUnorderedList', function (ui, detail) {\n      toggleList(editor, 'UL', detail);\n    });\n    editor.addCommand('InsertOrderedList', function (ui, detail) {\n      toggleList(editor, 'OL', detail);\n    });\n    editor.addCommand('InsertDefinitionList', function (ui, detail) {\n      toggleList(editor, 'DL', detail);\n    });\n    editor.addCommand('RemoveList', function () {\n      flattenListSelection(editor);\n    });\n    registerDialog(editor);\n    editor.addCommand('mceListUpdate', function (ui, detail) {\n      if (isObject(detail)) {\n        updateList(editor, detail);\n      }\n    });\n    editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n    editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n    editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n  };\n\n  var setupTabKey = function (editor) {\n    editor.on('keydown', function (e) {\n      if (e.keyCode !== global$4.TAB || global$4.metaKeyPressed(e)) {\n        return;\n      }\n\n      editor.undoManager.transact(function () {\n        if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n          e.preventDefault();\n        }\n      });\n    });\n  };\n\n  var setup = function (editor) {\n    if (shouldIndentOnTab(editor)) {\n      setupTabKey(editor);\n    }\n\n    setup$1(editor);\n  };\n\n  var register$1 = function (editor) {\n    var exec = function (command) {\n      return function () {\n        return editor.execCommand(command);\n      };\n    };\n\n    if (!editor.hasPlugin('advlist')) {\n      editor.ui.registry.addToggleButton('numlist', {\n        icon: 'ordered-list',\n        active: false,\n        tooltip: 'Numbered list',\n        onAction: exec('InsertOrderedList'),\n        onSetup: function (api) {\n          return listState(editor, 'OL', api.setActive);\n        }\n      });\n      editor.ui.registry.addToggleButton('bullist', {\n        icon: 'unordered-list',\n        active: false,\n        tooltip: 'Bullet list',\n        onAction: exec('InsertUnorderedList'),\n        onSetup: function (api) {\n          return listState(editor, 'UL', api.setActive);\n        }\n      });\n    }\n  };\n\n  var register = function (editor) {\n    var listProperties = {\n      text: 'List properties...',\n      icon: 'ordered-list',\n      onAction: function () {\n        return editor.execCommand('mceListProps');\n      },\n      onSetup: function (api) {\n        return listState(editor, 'OL', function (active) {\n          return api.setDisabled(!active);\n        });\n      }\n    };\n    editor.ui.registry.addMenuItem('listprops', listProperties);\n    editor.ui.registry.addContextMenu('lists', {\n      update: function (node) {\n        var parentList = getParentList(editor, node);\n        return isOlNode(parentList) ? ['listprops'] : [];\n      }\n    });\n  };\n\n  function Plugin() {\n    global$7.add('lists', function (editor) {\n      if (editor.hasPlugin('rtc', true) === false) {\n        setup(editor);\n        register$2(editor);\n      } else {\n        registerDialog(editor);\n      }\n\n      register$1(editor);\n      register(editor);\n      return get(editor);\n    });\n  }\n\n  Plugin();\n})();","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/node_modules/tinymce/plugins/lists/plugin.js"],"names":["global$7","tinymce","util","Tools","resolve","typeOf","x","t","Array","prototype","isPrototypeOf","constructor","name","String","isType$1","type","value","isSimpleType","isString","isObject","isArray","isBoolean","isFunction","isNumber","noop","constant","identity","tripleEquals","a","b","not","f","never","always","none","NONE","call","thunk","id","me","fold","n","_s","isSome","isNone","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","s","from","Optional","nativeSlice","slice","nativePush","push","xs","len","length","r","i","each$1","filter$1","pred","groupBy","wasType","group","foldl","acc","findUntil","until","find$1","flatten","apply","reverse","get$1","head","last","findMap","arr","__assign","Object","assign","arguments","p","hasOwnProperty","__spreadArray","to","pack","l","ar","concat","cached","called","args","_i","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiOS","test","isiPhone","isMobile","isAndroid","isTouch","isTablet","isPhone","iOSwebview","isSafari","isDesktop","isWebView","firstMatch","regexes","find","agent","major","minor","Number","replace","nu$2","detect$3","versionRegexes","cleanedAgent","toLowerCase","unknown$2","Version","nu","detect","unknown","detectBrowser$1","browsers","userAgentData","brands","uaBrand","lcBrand","brand","_a","info","current","version","parseInt","detect$2","candidates","candidate","search","detectBrowser","detectOs","oses","contains$1","str","substr","indexOf","blank","trim","isNotEmpty","isEmpty$1","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chrome","ie","opera","firefox","safari","unknown$1","nu$1","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","Browser","windows","ios","android","linux","osx","solaris","freebsd","chromeos","isOS","isWindows","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","detect$1","userAgentDataOpt","deviceType","PlatformDetection","query","window","matchMedia","matches","platform","navigator","compareDocumentPosition","match","documentPositionContainedBy","Node","DOCUMENT_POSITION_CONTAINED_BY","ELEMENT","fromHtml","html","scope","doc","document","div","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromDom","fromTag","tag","node","fromText","text","createTextNode","dom","fromPoint","docElm","y","elementFromPoint","SugarElement","is$2","element","selector","nodeType","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","eq","e1","e2","regularContains","d1","d2","contains","ieContains","is$1","global$6","global$5","global$4","keys","obj","props","k","objAcc","internalFilter","onTrue","onFalse","Function","nodeName","isType","isElement","isTag","e","rawSet","key","setAttribute","setAll","attrs","v","clone$1","attributes","attr","parent","parentNode","children","child","index","cs","firstChild","lastChild","before$1","marker","parent$1","insertBefore","append$1","appendChild","before","elements","append","remove","removeChild","clone","original","isDeep","cloneNode","deep","shallowAs","mutate","children$1","global$3","global$2","matchNodeName","matchNodeNames","regex","isTextNode","isListNode","isOlUlNode","isOlNode","isListItemNode","isDlItemNode","isTableCellNode","isBr","isFirstChild","isTextBlock","editor","schema","getTextBlockElements","isBlock","blockElements","isBogusBr","nextSibling","previousSibling","isEmpty","elm","keepBookmarks","empty","select","isChildOfBody","isChildOf","getRoot","shouldIndentOnTab","getParam","getForcedRootBlock","block","getForcedRootBlockAttrs","createTextBlock","contentNode","getBlockElements","fragment","createFragment","blockName","textBlock","hasContentNode","create","tagName","toUpperCase","setAttribs","getAttribute","DOM$2","DOM","splitList","list","li","removeAndKeepBookmarks","targetNode","bookmarks","newBlock","tmpRng","createRng","setStartAfter","setEndAfter","extractContents","insertAfter","isDescriptionDetail","isDescriptionTerm","outdentDlItem","item","dl","indentDlItem","dlIndentation","indentation","dlItems","getNormalizedPoint","container","offset","getNode","data","normalizeRange","rng","outRng","cloneRange","rangeStart","startContainer","startOffset","setStart","rangeEnd","endContainer","endOffset","setEnd","global$1","getParentList","selectionStart","selection","getStart","getParent","getClosestListRootElm","isParentListSelected","parentList","selectedBlocks","findSubLists","querySelectorAll","getSelectedSubLists","getSelectedBlocks","findParentListItemsNodes","elms","listItemsElms","parentLi","unique","getSelectedListItems","getSelectedDlItems","parentTableCell","getParents","getBody","findLastParentListNode","parentLists","getSelectedLists","firstList","subsequentLists","getSelectedListRoots","selectedLists","getUniqueListRoots","lists","listRoots","is","lhs","rhs","comparator","left","lift2","oa","ob","fromElements","createDocumentFragment","fireListEvent","action","fire","isSupported","style","getPropertyValue","internalSet","property","setProperty","set","joinSegment","joinSegments","segments","appendSegments","head$1","tail","createSegment","listType","segment","createSegments","entry","size","populateSegments","listAttributes","itemAttributes","content","normalizeSegment","createItem","appendItem","writeShallow","cast","newCast","depth","writeDeep","composeList","entries","isList","el","hasFirstChildList","hasLastChildList","isIndented","isSelected","cloneItemContent","createEntry","dirty","indentEntry","cloneListProperties","source","cleanListProperties","_value","closestSiblingEntry","start","normalizeEntries","matchingEntry","Cell","initial","get","parseItem","itemSelection","selectionState","currentItemEntry","end","childListEntries","parseList","parser","newDepth","parseLists","initialDepth","sourceList","outdentedComposer","normalizedEntries","indentedComposer","contentDocument","composeEntries","groupIsIndented","indentSelectedEntries","getItemSelection","selectedListItems","listIndentation","entrySets","entrySet","composedLists","composedList","selectionIndentation","isHandled","bookmark","getBookmark","moveToBookmark","setRng","getRng","nodeChanged","indentListSelection","outdentListSelection","flattenListSelection","global","DOM$1","createBookmark","setupEndPoint","offsetNode","Math","min","collapsed","resolveBookmark","restoreEndPoint","nodeIndex","idx","listToggleActionFromListName","listName","isCustomList","className","listState","activate","nodeChangeHandler","inList","parents","on","off","updateListStyle","detail","setStyle","updateListAttrs","updateListWithDetails","removeStyles","styles","getEndPointNode","root","getSelectedTextBlocks","textBlocks","startNode","endNode","siblings","isBookmarkNode","hasCompatibleStyle","sib","sibStyle","getStyle","detailStyle","applyList","listItemName","getContentEditable","selectedTextBlocks","listBlock","sibling","rename","mergeWithAdjacentLists","isValidLists","list1","list2","hasSameListStyle","targetStyle","hasSameClasses","elm1","elm2","shouldMerge","updateList$1","newList","toggleMultipleLists","parentIsList","hasListStyleDetail","allLists","toggleSingleList","toggleList","_detail","selectedSubLists","normalizeList","normalizeLists","grep","findNextCaretContainer","isForward","nonEmptyBlocks","getNonEmptyElements","walker","next","hasOnlyOneBlockChild","unwrapSingleBlockChild","moveChildren","fromElm","toElm","targetElm","mergeLiElements","listNode","ul","$","nestedLists","mergeIntoEmptyLi","fromLi","toLi","setCursorLocation","mergeForward","mergeBackward","resolvedBookmark","backspaceDeleteFromListToListCaret","selectionStartElm","rng_1","otherLi_1","undoManager","transact","removeBlock","parentBlock","backspaceDeleteIntoListCaret","otherLi_2","collapse","backspaceDeleteCaret","backspaceDeleteRange","startListParent","execCommand","backspaceDelete","isCollapsed","setup$1","keyCode","BACKSPACE","preventDefault","DELETE","updateList","update","setStyles","setAttrib","parseAlphabeticBase26","chars","split","values","char","charValue","charCodeAt","pow","sum","composeAlphabeticBase26","remainder","quotient","floor","rest","fromCharCode","isUppercase","isLowercase","isNumeric","deduceListType","parseStartValue","listStyleType","parseDetail","open","currentList","windowManager","title","body","items","label","inputMode","initialData","getAttrib","buttons","primary","onSubmit","api","getData","close","queryListCommandState","registerDialog","addCommand","register$2","cmd","command","ui","addQueryStateHandler","setupTabKey","TAB","metaKeyPressed","shiftKey","setup","register$1","exec","hasPlugin","registry","addToggleButton","icon","active","tooltip","onAction","onSetup","setActive","register","listProperties","setDisabled","addMenuItem","addContextMenu","Plugin","add"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.2 (2021-11-17)\n */\n(function () {\n    'use strict';\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType$1('string');\n    var isObject = isType$1('object');\n    var isArray = isType$1('array');\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    var tripleEquals = function (a, b) {\n      return a === b;\n    };\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter$1 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each$1(xs, function (x, i) {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$1 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var get$1 = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$1(xs, 0);\n    };\n    var last = function (xs) {\n      return get$1(xs, xs.length - 1);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n      if (pack || arguments.length === 2)\n        for (var i = 0, l = from.length, ar; i < l; i++) {\n          if (ar || !(i in from)) {\n            if (!ar)\n              ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n          }\n        }\n      return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$2(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$2(0, 0);\n    };\n    var nu$2 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$2,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$1(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$1(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var isNotEmpty = function (s) {\n      return s.length > 0;\n    };\n    var isEmpty$1 = function (s) {\n      return !isNotEmpty(s);\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var ELEMENT = 1;\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var is$2 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains = function (e1, e2) {\n      return detect().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n    var is$1 = is$2;\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var keys = Object.keys;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType(ELEMENT);\n    var isTag = function (tag) {\n      return function (e) {\n        return isElement(e) && name(e) === tag;\n      };\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone$1 = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom.childNodes.length - 1);\n    };\n\n    var before$1 = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var append$1 = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n\n    var before = function (marker, elements) {\n      each$1(elements, function (x) {\n        before$1(marker, x);\n      });\n    };\n    var append = function (parent, elements) {\n      each$1(elements, function (x) {\n        append$1(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var clone = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = SugarElement.fromTag(tag);\n      var attributes = clone$1(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before$1(original, nu);\n      var children$1 = children(original);\n      append(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var matchNodeName = function (name) {\n      return function (node) {\n        return node && node.nodeName.toLowerCase() === name;\n      };\n    };\n    var matchNodeNames = function (regex) {\n      return function (node) {\n        return node && regex.test(node.nodeName);\n      };\n    };\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = matchNodeNames(/^(OL|UL|DL)$/);\n    var isOlUlNode = matchNodeNames(/^(OL|UL)$/);\n    var isOlNode = matchNodeName('ol');\n    var isListItemNode = matchNodeNames(/^(LI|DT|DD)$/);\n    var isDlItemNode = matchNodeNames(/^(DT|DD)$/);\n    var isTableCellNode = matchNodeNames(/^(TH|TD)$/);\n    var isBr = matchNodeName('br');\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      return dom.isBlock(node.nextSibling) && !isBr(node.previousSibling);\n    };\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var blockName = getForcedRootBlock(editor);\n      var node, textBlock, hasContentNode;\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === blockName.toUpperCase()) {\n          dom.setAttribs(textBlock, getForcedRootBlockAttrs(editor));\n        }\n        if (!isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!blockName) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var DOM$2 = global$3.DOM;\n    var splitList = function (editor, list, li) {\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$2.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM$2.remove(targetNode);\n      };\n      var bookmarks = DOM$2.select('span[data-mce-type=\"bookmark\"]', list);\n      var newBlock = createTextBlock(editor, li);\n      var tmpRng = DOM$2.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(list);\n      var fragment = tmpRng.extractContents();\n      for (var node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM$2.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM$2.insertAfter(fragment, list);\n      }\n      DOM$2.insertAfter(newBlock, list);\n      if (isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM$2.remove(li);\n      if (isEmpty(editor.dom, list)) {\n        DOM$2.remove(list);\n      }\n    };\n\n    var isDescriptionDetail = isTag('dd');\n    var isDescriptionTerm = isTag('dt');\n    var outdentDlItem = function (editor, item) {\n      if (isDescriptionDetail(item)) {\n        mutate(item, 'dt');\n      } else if (isDescriptionTerm(item)) {\n        parent(item).each(function (dl) {\n          return splitList(editor, dl.dom, item.dom);\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (isDescriptionTerm(item)) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each$1(dlItems, indentDlItem);\n      } else {\n        each$1(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$6.getNode(container, offset);\n      if (isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var getParentList = function (editor, node) {\n      var selectionStart = node || editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return filter$1(parentList.querySelectorAll('ol,ul,dl'), isListNode);\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return filter$1(selectedBlocks, function (elm) {\n          return isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$2.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$1.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return filter$1(findParentListItemsNodes(editor, selectedBlocks), isListItemNode);\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter$1(getSelectedListItems(editor), isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      return parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter$1(editor.selection.getSelectedBlocks(), isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$1.unique(listRoots);\n    };\n\n    var is = function (lhs, rhs, comparator) {\n      if (comparator === void 0) {\n        comparator = tripleEquals;\n      }\n      return lhs.exists(function (left) {\n        return comparator(left, rhs);\n      });\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each$1(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var fireListEvent = function (editor, action, element) {\n      return editor.fire('ListMutation', {\n        action: action,\n        element: element\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n\n    var joinSegment = function (parent, child) {\n      append$1(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      lift2(last(head$1), head(tail), joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: SugarElement.fromTag(listType, scope),\n        item: SugarElement.fromTag('li', scope)\n      };\n      append$1(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = SugarElement.fromTag('li', scope);\n      setAll(item, attr);\n      append(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append$1(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).exists(isList);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).exists(isList);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          dirty: false,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone$1(li),\n          listAttributes: clone$1(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n      entry.dirty = true;\n    };\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = __assign({}, source.listAttributes);\n    };\n    var cleanListProperties = function (entry) {\n      entry.listAttributes = filter(entry.listAttributes, function (_value, key) {\n        return key !== 'start';\n      });\n    };\n    var closestSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      var matches = function (entry) {\n        return entry.depth === depth && !entry.dirty;\n      };\n      var until = function (entry) {\n        return entry.depth < depth;\n      };\n      return findUntil(reverse(entries.slice(0, start)), matches, until).orThunk(function () {\n        return findUntil(entries.slice(start + 1), matches, until);\n      });\n    };\n    var normalizeEntries = function (entries) {\n      each$1(entries, function (entry, i) {\n        closestSiblingEntry(entries, i).fold(function () {\n          if (entry.dirty) {\n            cleanListProperties(entry);\n          }\n        }, function (matchingEntry) {\n          return cloneListProperties(entry, matchingEntry);\n        });\n      });\n      return entries;\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      var normalizedEntries = normalizeEntries(entries);\n      return map(normalizedEntries, function (entry) {\n        var content = fromElements(entry.content);\n        return SugarElement.fromDom(createTextBlock(editor, content.dom));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      var normalizedEntries = normalizeEntries(entries);\n      return composeList(editor.contentDocument, normalizedEntries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).exists(isIndented);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each$1(filter$1(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(getSelectedListItems(editor), SugarElement.fromDom);\n      return lift2(find$1(selectedListItems, not(hasFirstChildList)), find$1(reverse(selectedListItems), not(hasFirstChildList)), function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each$1(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        var composedLists = composeEntries(editor, entrySet.entries);\n        each$1(composedLists, function (composedList) {\n          fireListEvent(editor, indentation === 'Indent' ? 'IndentList' : 'OutdentList', composedList.dom);\n        });\n        before(entrySet.sourceList, composedLists);\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(getSelectedListRoots(editor), SugarElement.fromDom);\n      var dlItems = map(getSelectedDlItems(editor), SugarElement.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var DOM$1 = global$3.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var container = rng[start ? 'startContainer' : 'endContainer'];\n        var offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          var offsetNode = DOM$1.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM$1.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      var restoreEndPoint = function (start) {\n        var node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        var container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        var offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM$1.remove(node);\n          if (!container.hasChildNodes() && DOM$1.isBlock(container)) {\n            container.appendChild(DOM$1.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM$1.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return normalizeRange(rng);\n    };\n\n    var listToggleActionFromListName = function (listName) {\n      switch (listName) {\n      case 'UL':\n        return 'ToggleUlList';\n      case 'OL':\n        return 'ToggleOlList';\n      case 'DL':\n        return 'ToggleDLList';\n      }\n    };\n\n    var isCustomList = function (list) {\n      return /\\btox\\-/.test(list.className);\n    };\n    var listState = function (editor, listName, activate) {\n      var nodeChangeHandler = function (e) {\n        var inList = findUntil(e.parents, isListNode, isTableCellNode).filter(function (list) {\n          return list.nodeName === listName && !isCustomList(list);\n        }).isSome();\n        activate(inList);\n      };\n      var parents = editor.dom.getParents(editor.selection.getNode());\n      nodeChangeHandler({ parents: parents });\n      editor.on('NodeChange', nodeChangeHandler);\n      return function () {\n        return editor.off('NodeChange', nodeChangeHandler);\n      };\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$2.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$2.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$2.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [];\n      var dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$2.each(siblings, function (node) {\n        if (isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || isBr(node)) {\n          if (isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global.isBookmarkNode(node)) {\n          if (isListNode(nextSibling) || isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      var rng = editor.selection.getRng();\n      var listItemName = 'LI';\n      var root = getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      var bookmark = createBookmark(rng);\n      var selectedTextBlocks = getSelectedTextBlocks(editor, rng, root);\n      global$2.each(selectedTextBlocks, function (block) {\n        var listBlock;\n        var sibling = block.previousSibling;\n        var parent = block.parentNode;\n        if (!isListItemNode(parent)) {\n          if (sibling && isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n            listBlock = sibling;\n            block = dom.rename(block, listItemName);\n            sibling.appendChild(block);\n          } else {\n            listBlock = dom.create(listName);\n            block.parentNode.insertBefore(listBlock, block);\n            listBlock.appendChild(block);\n            block = dom.rename(block, listItemName);\n          }\n          removeStyles(dom, block, [\n            'margin',\n            'margin-right',\n            'margin-bottom',\n            'margin-left',\n            'margin-top',\n            'padding',\n            'padding-right',\n            'padding-bottom',\n            'padding-left',\n            'padding-top'\n          ]);\n          updateListWithDetails(dom, listBlock, detail);\n          mergeWithAdjacentLists(editor.dom, listBlock);\n        }\n      });\n      editor.selection.setRng(resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList$1 = function (editor, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = editor.dom.rename(list, listName);\n        updateListWithDetails(editor.dom, newList, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), newList);\n      } else {\n        updateListWithDetails(editor.dom, list, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), list);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      var parentIsList = isListNode(parentList);\n      if (parentIsList && parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        applyList(editor, listName, detail);\n        var bookmark = createBookmark(editor.selection.getRng());\n        var allLists = parentIsList ? __spreadArray([parentList], lists, true) : lists;\n        global$2.each(allLists, function (elm) {\n          updateList$1(editor, elm, listName, detail);\n        });\n        editor.selection.setRng(resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail) && !isCustomList(parentList)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = createBookmark(editor.selection.getRng());\n          updateListWithDetails(editor.dom, parentList, detail);\n          var newList = editor.dom.rename(parentList, listName);\n          mergeWithAdjacentLists(editor.dom, newList);\n          editor.selection.setRng(resolveBookmark(bookmark));\n          applyList(editor, listName, detail);\n          fireListEvent(editor, listToggleActionFromListName(listName), newList);\n        }\n      } else {\n        applyList(editor, listName, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), parentList);\n      }\n    };\n    var toggleList = function (editor, listName, _detail) {\n      var parentList = getParentList(editor);\n      var selectedSubLists = getSelectedSubLists(editor);\n      var detail = isObject(_detail) ? _detail : {};\n      if (selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n\n    var DOM = global$3.DOM;\n    var normalizeList = function (dom, list) {\n      var parentNode = list.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === list) {\n        var sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(list);\n          if (isEmpty(dom, parentNode)) {\n            DOM.remove(parentNode);\n          }\n        } else {\n          DOM.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (isListNode(parentNode)) {\n        var sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(list);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      var lists = global$2.grep(dom.select('ol,ul', element));\n      global$2.each(lists, function (list) {\n        normalizeList(dom, list);\n      });\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      if (isTextNode(node) && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      var nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$6.getNode(node, offset);\n      }\n      var walker = new global$5(node, root);\n      if (isForward) {\n        if (isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (isTextNode(node) && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node;\n      var targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var listNode;\n      var ul = fromElm.parentNode;\n      if (!isChildOfBody(dom, fromElm) || !isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      var node = toElm.lastChild;\n      if (node && isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains$1 = contains(SugarElement.fromDom(toElm), SugarElement.fromDom(fromElm));\n      var nestedLists = contains$1 ? dom.getParents(fromElm, isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each$1(nestedLists, function (list) {\n        if (isEmpty(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi, 0);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      if (li) {\n        var ul = li.parentNode;\n        if (ul === editor.getBody() && isEmpty(dom, ul)) {\n          return true;\n        }\n        var rng_1 = normalizeRange(selection.getRng());\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng_1, isForward, root), 'LI', root);\n        if (otherLi_1 && otherLi_1 !== li) {\n          editor.undoManager.transact(function () {\n            if (isForward) {\n              mergeForward(editor, rng_1, otherLi_1, li);\n            } else {\n              if (isFirstChild(li)) {\n                outdentListSelection(editor);\n              } else {\n                mergeBackward(editor, rng_1, li, otherLi_1);\n              }\n            }\n          });\n          return true;\n        } else if (!otherLi_1) {\n          if (!isForward && rng_1.startOffset === 0 && rng_1.endOffset === 0) {\n            editor.undoManager.transact(function () {\n              flattenListSelection(editor);\n            });\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = normalizeRange(editor.selection.getRng());\n        var otherLi_2 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_2) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            mergeWithAdjacentLists(dom, otherLi_2.parentNode);\n            editor.selection.select(otherLi_2, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup$1 = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$4.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$4.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n\n    var get = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          backspaceDelete(editor, isForward);\n        }\n      };\n    };\n\n    var updateList = function (editor, update) {\n      var parentList = getParentList(editor);\n      editor.undoManager.transact(function () {\n        if (isObject(update.styles)) {\n          editor.dom.setStyles(parentList, update.styles);\n        }\n        if (isObject(update.attrs)) {\n          each(update.attrs, function (v, k) {\n            return editor.dom.setAttrib(parentList, k, v);\n          });\n        }\n      });\n    };\n\n    var parseAlphabeticBase26 = function (str) {\n      var chars = reverse(trim(str).split(''));\n      var values = map(chars, function (char, i) {\n        var charValue = char.toUpperCase().charCodeAt(0) - 'A'.charCodeAt(0) + 1;\n        return Math.pow(26, i) * charValue;\n      });\n      return foldl(values, function (sum, v) {\n        return sum + v;\n      }, 0);\n    };\n    var composeAlphabeticBase26 = function (value) {\n      value--;\n      if (value < 0) {\n        return '';\n      } else {\n        var remainder = value % 26;\n        var quotient = Math.floor(value / 26);\n        var rest = composeAlphabeticBase26(quotient);\n        var char = String.fromCharCode('A'.charCodeAt(0) + remainder);\n        return rest + char;\n      }\n    };\n    var isUppercase = function (str) {\n      return /^[A-Z]+$/.test(str);\n    };\n    var isLowercase = function (str) {\n      return /^[a-z]+$/.test(str);\n    };\n    var isNumeric = function (str) {\n      return /^[0-9]+$/.test(str);\n    };\n    var deduceListType = function (start) {\n      if (isNumeric(start)) {\n        return 2;\n      } else if (isUppercase(start)) {\n        return 0;\n      } else if (isLowercase(start)) {\n        return 1;\n      } else if (isEmpty$1(start)) {\n        return 3;\n      } else {\n        return 4;\n      }\n    };\n    var parseStartValue = function (start) {\n      switch (deduceListType(start)) {\n      case 2:\n        return Optional.some({\n          listStyleType: Optional.none(),\n          start: start\n        });\n      case 0:\n        return Optional.some({\n          listStyleType: Optional.some('upper-alpha'),\n          start: parseAlphabeticBase26(start).toString()\n        });\n      case 1:\n        return Optional.some({\n          listStyleType: Optional.some('lower-alpha'),\n          start: parseAlphabeticBase26(start).toString()\n        });\n      case 3:\n        return Optional.some({\n          listStyleType: Optional.none(),\n          start: ''\n        });\n      case 4:\n        return Optional.none();\n      }\n    };\n    var parseDetail = function (detail) {\n      var start = parseInt(detail.start, 10);\n      if (is(detail.listStyleType, 'upper-alpha')) {\n        return composeAlphabeticBase26(start);\n      } else if (is(detail.listStyleType, 'lower-alpha')) {\n        return composeAlphabeticBase26(start).toLowerCase();\n      } else {\n        return detail.start;\n      }\n    };\n\n    var open = function (editor) {\n      var currentList = getParentList(editor);\n      if (!isOlNode(currentList)) {\n        return;\n      }\n      editor.windowManager.open({\n        title: 'List Properties',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'input',\n              name: 'start',\n              label: 'Start list at number',\n              inputMode: 'numeric'\n            }]\n        },\n        initialData: {\n          start: parseDetail({\n            start: editor.dom.getAttrib(currentList, 'start', '1'),\n            listStyleType: Optional.some(editor.dom.getStyle(currentList, 'list-style-type'))\n          })\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        onSubmit: function (api) {\n          var data = api.getData();\n          parseStartValue(data.start).each(function (detail) {\n            editor.execCommand('mceListUpdate', false, {\n              attrs: { start: detail.start === '1' ? '' : detail.start },\n              styles: { 'list-style-type': detail.listStyleType.getOr('') }\n            });\n          });\n          api.close();\n        }\n      });\n    };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = getParentList(editor);\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var registerDialog = function (editor) {\n      editor.addCommand('mceListProps', function () {\n        open(editor);\n      });\n    };\n    var register$2 = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      registerDialog(editor);\n      editor.addCommand('mceListUpdate', function (ui, detail) {\n        if (isObject(detail)) {\n          updateList(editor, detail);\n        }\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$4.TAB || global$4.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup = function (editor) {\n      if (shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      setup$1(editor);\n    };\n\n    var register$1 = function (editor) {\n      var exec = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      if (!editor.hasPlugin('advlist')) {\n        editor.ui.registry.addToggleButton('numlist', {\n          icon: 'ordered-list',\n          active: false,\n          tooltip: 'Numbered list',\n          onAction: exec('InsertOrderedList'),\n          onSetup: function (api) {\n            return listState(editor, 'OL', api.setActive);\n          }\n        });\n        editor.ui.registry.addToggleButton('bullist', {\n          icon: 'unordered-list',\n          active: false,\n          tooltip: 'Bullet list',\n          onAction: exec('InsertUnorderedList'),\n          onSetup: function (api) {\n            return listState(editor, 'UL', api.setActive);\n          }\n        });\n      }\n    };\n\n    var register = function (editor) {\n      var listProperties = {\n        text: 'List properties...',\n        icon: 'ordered-list',\n        onAction: function () {\n          return editor.execCommand('mceListProps');\n        },\n        onSetup: function (api) {\n          return listState(editor, 'OL', function (active) {\n            return api.setDisabled(!active);\n          });\n        }\n      };\n      editor.ui.registry.addMenuItem('listprops', listProperties);\n      editor.ui.registry.addContextMenu('lists', {\n        update: function (node) {\n          var parentList = getParentList(editor, node);\n          return isOlNode(parentList) ? ['listprops'] : [];\n        }\n      });\n    };\n\n    function Plugin () {\n      global$7.add('lists', function (editor) {\n        if (editor.hasPlugin('rtc', true) === false) {\n          setup(editor);\n          register$2(editor);\n        } else {\n          registerDialog(editor);\n        }\n        register$1(editor);\n        register(editor);\n        return get(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"]},"metadata":{},"sourceType":"script"}