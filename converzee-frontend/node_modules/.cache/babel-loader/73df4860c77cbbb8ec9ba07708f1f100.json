{"ast":null,"code":"/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.2 (2021-11-17)\n */\n(function () {\n  'use strict';\n\n  var global$4 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var typeOf = function (x) {\n    var t = typeof x;\n\n    if (x === null) {\n      return 'null';\n    } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n      return 'array';\n    } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n      return 'string';\n    } else {\n      return t;\n    }\n  };\n\n  var isType = function (type) {\n    return function (value) {\n      return typeOf(value) === type;\n    };\n  };\n\n  var isSimpleType = function (type) {\n    return function (value) {\n      return typeof value === type;\n    };\n  };\n\n  var isString = isType('string');\n  var isFunction = isSimpleType('function');\n\n  var noop = function () {};\n\n  var constant = function (value) {\n    return function () {\n      return value;\n    };\n  };\n\n  var identity = function (x) {\n    return x;\n  };\n\n  function curry(fn) {\n    var initialArgs = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      initialArgs[_i - 1] = arguments[_i];\n    }\n\n    return function () {\n      var restArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        restArgs[_i] = arguments[_i];\n      }\n\n      var all = initialArgs.concat(restArgs);\n      return fn.apply(null, all);\n    };\n  }\n\n  var never = constant(false);\n  var always = constant(true);\n  var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n  var global$2 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n  var getCreationDateClasses = function (editor) {\n    return editor.getParam('template_cdate_classes', 'cdate');\n  };\n\n  var getModificationDateClasses = function (editor) {\n    return editor.getParam('template_mdate_classes', 'mdate');\n  };\n\n  var getSelectedContentClasses = function (editor) {\n    return editor.getParam('template_selected_content_classes', 'selcontent');\n  };\n\n  var getPreviewReplaceValues = function (editor) {\n    return editor.getParam('template_preview_replace_values');\n  };\n\n  var getContentStyle = function (editor) {\n    return editor.getParam('content_style', '', 'string');\n  };\n\n  var shouldUseContentCssCors = function (editor) {\n    return editor.getParam('content_css_cors', false, 'boolean');\n  };\n\n  var getTemplateReplaceValues = function (editor) {\n    return editor.getParam('template_replace_values');\n  };\n\n  var getTemplates = function (editor) {\n    return editor.getParam('templates');\n  };\n\n  var getCdateFormat = function (editor) {\n    return editor.getParam('template_cdate_format', editor.translate('%Y-%m-%d'));\n  };\n\n  var getMdateFormat = function (editor) {\n    return editor.getParam('template_mdate_format', editor.translate('%Y-%m-%d'));\n  };\n\n  var getBodyClassFromHash = function (editor) {\n    var bodyClass = editor.getParam('body_class', '', 'hash');\n    return bodyClass[editor.id] || '';\n  };\n\n  var getBodyClass = function (editor) {\n    var bodyClass = editor.getParam('body_class', '', 'string');\n\n    if (bodyClass.indexOf('=') === -1) {\n      return bodyClass;\n    } else {\n      return getBodyClassFromHash(editor);\n    }\n  };\n\n  var addZeros = function (value, len) {\n    value = '' + value;\n\n    if (value.length < len) {\n      for (var i = 0; i < len - value.length; i++) {\n        value = '0' + value;\n      }\n    }\n\n    return value;\n  };\n\n  var getDateTime = function (editor, fmt, date) {\n    if (date === void 0) {\n      date = new Date();\n    }\n\n    var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n    var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n    var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n    var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n    fmt = fmt.replace('%D', '%m/%d/%Y');\n    fmt = fmt.replace('%r', '%I:%M:%S %p');\n    fmt = fmt.replace('%Y', '' + date.getFullYear());\n    fmt = fmt.replace('%y', '' + date.getYear());\n    fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n    fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n    fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n    fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n    fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n    fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n    fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n    fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n    fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n    fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n    fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n    fmt = fmt.replace('%%', '%');\n    return fmt;\n  };\n\n  var createTemplateList = function (editor, callback) {\n    return function () {\n      var templateList = getTemplates(editor);\n\n      if (isFunction(templateList)) {\n        templateList(callback);\n      } else if (isString(templateList)) {\n        global$2.send({\n          url: templateList,\n          success: function (text) {\n            callback(JSON.parse(text));\n          }\n        });\n      } else {\n        callback(templateList);\n      }\n    };\n  };\n\n  var replaceTemplateValues = function (html, templateValues) {\n    global$3.each(templateValues, function (v, k) {\n      if (isFunction(v)) {\n        v = v(k);\n      }\n\n      html = html.replace(new RegExp('\\\\{\\\\$' + k + '\\\\}', 'g'), v);\n    });\n    return html;\n  };\n\n  var replaceVals = function (editor, scope) {\n    var dom = editor.dom,\n        vl = getTemplateReplaceValues(editor);\n    global$3.each(dom.select('*', scope), function (e) {\n      global$3.each(vl, function (v, k) {\n        if (dom.hasClass(e, k)) {\n          if (isFunction(v)) {\n            v(e);\n          }\n        }\n      });\n    });\n  };\n\n  var hasClass = function (n, c) {\n    return new RegExp('\\\\b' + c + '\\\\b', 'g').test(n.className);\n  };\n\n  var insertTemplate = function (editor, _ui, html) {\n    var dom = editor.dom;\n    var sel = editor.selection.getContent();\n    html = replaceTemplateValues(html, getTemplateReplaceValues(editor));\n    var el = dom.create('div', null, html);\n    var n = dom.select('.mceTmpl', el);\n\n    if (n && n.length > 0) {\n      el = dom.create('div', null);\n      el.appendChild(n[0].cloneNode(true));\n    }\n\n    global$3.each(dom.select('*', el), function (n) {\n      if (hasClass(n, getCreationDateClasses(editor).replace(/\\s+/g, '|'))) {\n        n.innerHTML = getDateTime(editor, getCdateFormat(editor));\n      }\n\n      if (hasClass(n, getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n        n.innerHTML = getDateTime(editor, getMdateFormat(editor));\n      }\n\n      if (hasClass(n, getSelectedContentClasses(editor).replace(/\\s+/g, '|'))) {\n        n.innerHTML = sel;\n      }\n    });\n    replaceVals(editor, el);\n    editor.execCommand('mceInsertContent', false, el.innerHTML);\n    editor.addVisual();\n  };\n\n  var none = function () {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var call = function (thunk) {\n      return thunk();\n    };\n\n    var id = identity;\n    var me = {\n      fold: function (n, _s) {\n        return n();\n      },\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function (msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: function () {\n        return none();\n      },\n      toArray: function () {\n        return [];\n      },\n      toString: constant('none()')\n    };\n    return me;\n  }();\n\n  var some = function (a) {\n    var constant_a = constant(a);\n\n    var self = function () {\n      return me;\n    };\n\n    var bind = function (f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function (n, s) {\n        return s(a);\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function (f) {\n        return some(f(a));\n      },\n      each: function (f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function (f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function () {\n        return [a];\n      },\n      toString: function () {\n        return 'some(' + a + ')';\n      }\n    };\n    return me;\n  };\n\n  var from = function (value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Optional = {\n    some: some,\n    none: none,\n    from: from\n  };\n\n  var map = function (xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i);\n    }\n\n    return r;\n  };\n\n  var findUntil = function (xs, pred, until) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        return Optional.some(x);\n      } else if (until(x, i)) {\n        break;\n      }\n    }\n\n    return Optional.none();\n  };\n\n  var find = function (xs, pred) {\n    return findUntil(xs, pred, never);\n  };\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n  var global = tinymce.util.Tools.resolve('tinymce.util.Promise');\n  var hasOwnProperty = Object.hasOwnProperty;\n\n  var get = function (obj, key) {\n    return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n  };\n\n  var has = function (obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  var entitiesAttr = {\n    '\"': '&quot;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;',\n    '\\'': '&#039;'\n  };\n\n  var htmlEscape = function (html) {\n    return html.replace(/[\"'<>&]/g, function (match) {\n      return get(entitiesAttr, match).getOr(match);\n    });\n  };\n\n  var getPreviewContent = function (editor, html) {\n    if (html.indexOf('<html>') === -1) {\n      var contentCssEntries_1 = '';\n      var contentStyle = getContentStyle(editor);\n      var cors_1 = shouldUseContentCssCors(editor) ? ' crossorigin=\"anonymous\"' : '';\n      global$3.each(editor.contentCSS, function (url) {\n        contentCssEntries_1 += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + editor.documentBaseURI.toAbsolute(url) + '\"' + cors_1 + '>';\n      });\n\n      if (contentStyle) {\n        contentCssEntries_1 += '<style type=\"text/css\">' + contentStyle + '</style>';\n      }\n\n      var bodyClass = getBodyClass(editor);\n      var encode = editor.dom.encode;\n      var isMetaKeyPressed = global$1.mac ? 'e.metaKey' : 'e.ctrlKey && !e.altKey';\n      var preventClicksOnLinksScript = '<script>' + 'document.addEventListener && document.addEventListener(\"click\", function(e) {' + 'for (var elm = e.target; elm; elm = elm.parentNode) {' + 'if (elm.nodeName === \"A\" && !(' + isMetaKeyPressed + ')) {' + 'e.preventDefault();' + '}' + '}' + '}, false);' + '</script> ';\n      var directionality = editor.getBody().dir;\n      var dirAttr = directionality ? ' dir=\"' + encode(directionality) + '\"' : '';\n      html = '<!DOCTYPE html>' + '<html>' + '<head>' + '<base href=\"' + encode(editor.documentBaseURI.getURI()) + '\">' + contentCssEntries_1 + preventClicksOnLinksScript + '</head>' + '<body class=\"' + encode(bodyClass) + '\"' + dirAttr + '>' + html + '</body>' + '</html>';\n    }\n\n    return replaceTemplateValues(html, getPreviewReplaceValues(editor));\n  };\n\n  var open = function (editor, templateList) {\n    var createTemplates = function () {\n      if (!templateList || templateList.length === 0) {\n        var message = editor.translate('No templates defined.');\n        editor.notificationManager.open({\n          text: message,\n          type: 'info'\n        });\n        return Optional.none();\n      }\n\n      return Optional.from(global$3.map(templateList, function (template, index) {\n        var isUrlTemplate = function (t) {\n          return t.url !== undefined;\n        };\n\n        return {\n          selected: index === 0,\n          text: template.title,\n          value: {\n            url: isUrlTemplate(template) ? Optional.from(template.url) : Optional.none(),\n            content: !isUrlTemplate(template) ? Optional.from(template.content) : Optional.none(),\n            description: template.description\n          }\n        };\n      }));\n    };\n\n    var createSelectBoxItems = function (templates) {\n      return map(templates, function (t) {\n        return {\n          text: t.text,\n          value: t.text\n        };\n      });\n    };\n\n    var findTemplate = function (templates, templateTitle) {\n      return find(templates, function (t) {\n        return t.text === templateTitle;\n      });\n    };\n\n    var loadFailedAlert = function (api) {\n      editor.windowManager.alert('Could not load the specified template.', function () {\n        return api.focus('template');\n      });\n    };\n\n    var getTemplateContent = function (t) {\n      return new global(function (resolve, reject) {\n        t.value.url.fold(function () {\n          return resolve(t.value.content.getOr(''));\n        }, function (url) {\n          return global$2.send({\n            url: url,\n            success: function (html) {\n              resolve(html);\n            },\n            error: function (e) {\n              reject(e);\n            }\n          });\n        });\n      });\n    };\n\n    var onChange = function (templates, updateDialog) {\n      return function (api, change) {\n        if (change.name === 'template') {\n          var newTemplateTitle = api.getData().template;\n          findTemplate(templates, newTemplateTitle).each(function (t) {\n            api.block('Loading...');\n            getTemplateContent(t).then(function (previewHtml) {\n              updateDialog(api, t, previewHtml);\n            }).catch(function () {\n              updateDialog(api, t, '');\n              api.disable('save');\n              loadFailedAlert(api);\n            });\n          });\n        }\n      };\n    };\n\n    var onSubmit = function (templates) {\n      return function (api) {\n        var data = api.getData();\n        findTemplate(templates, data.template).each(function (t) {\n          getTemplateContent(t).then(function (previewHtml) {\n            editor.execCommand('mceInsertTemplate', false, previewHtml);\n            api.close();\n          }).catch(function () {\n            api.disable('save');\n            loadFailedAlert(api);\n          });\n        });\n      };\n    };\n\n    var openDialog = function (templates) {\n      var selectBoxItems = createSelectBoxItems(templates);\n\n      var buildDialogSpec = function (bodyItems, initialData) {\n        return {\n          title: 'Insert Template',\n          size: 'large',\n          body: {\n            type: 'panel',\n            items: bodyItems\n          },\n          initialData: initialData,\n          buttons: [{\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          }, {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }],\n          onSubmit: onSubmit(templates),\n          onChange: onChange(templates, updateDialog)\n        };\n      };\n\n      var updateDialog = function (dialogApi, template, previewHtml) {\n        var content = getPreviewContent(editor, previewHtml);\n        var bodyItems = [{\n          type: 'selectbox',\n          name: 'template',\n          label: 'Templates',\n          items: selectBoxItems\n        }, {\n          type: 'htmlpanel',\n          html: '<p aria-live=\"polite\">' + htmlEscape(template.value.description) + '</p>'\n        }, {\n          label: 'Preview',\n          type: 'iframe',\n          name: 'preview',\n          sandboxed: false\n        }];\n        var initialData = {\n          template: template.text,\n          preview: content\n        };\n        dialogApi.unblock();\n        dialogApi.redial(buildDialogSpec(bodyItems, initialData));\n        dialogApi.focus('template');\n      };\n\n      var dialogApi = editor.windowManager.open(buildDialogSpec([], {\n        template: '',\n        preview: ''\n      }));\n      dialogApi.block('Loading...');\n      getTemplateContent(templates[0]).then(function (previewHtml) {\n        updateDialog(dialogApi, templates[0], previewHtml);\n      }).catch(function () {\n        updateDialog(dialogApi, templates[0], '');\n        dialogApi.disable('save');\n        loadFailedAlert(dialogApi);\n      });\n    };\n\n    var optTemplates = createTemplates();\n    optTemplates.each(openDialog);\n  };\n\n  var showDialog = function (editor) {\n    return function (templates) {\n      open(editor, templates);\n    };\n  };\n\n  var register$1 = function (editor) {\n    editor.addCommand('mceInsertTemplate', curry(insertTemplate, editor));\n    editor.addCommand('mceTemplate', createTemplateList(editor, showDialog(editor)));\n  };\n\n  var setup = function (editor) {\n    editor.on('PreProcess', function (o) {\n      var dom = editor.dom,\n          dateFormat = getMdateFormat(editor);\n      global$3.each(dom.select('div', o.node), function (e) {\n        if (dom.hasClass(e, 'mceTmpl')) {\n          global$3.each(dom.select('*', e), function (e) {\n            if (dom.hasClass(e, getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n              e.innerHTML = getDateTime(editor, dateFormat);\n            }\n          });\n          replaceVals(editor, e);\n        }\n      });\n    });\n  };\n\n  var register = function (editor) {\n    var onAction = function () {\n      return editor.execCommand('mceTemplate');\n    };\n\n    editor.ui.registry.addButton('template', {\n      icon: 'template',\n      tooltip: 'Insert template',\n      onAction: onAction\n    });\n    editor.ui.registry.addMenuItem('template', {\n      icon: 'template',\n      text: 'Insert template...',\n      onAction: onAction\n    });\n  };\n\n  function Plugin() {\n    global$4.add('template', function (editor) {\n      register(editor);\n      register$1(editor);\n      setup(editor);\n    });\n  }\n\n  Plugin();\n})();","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/node_modules/tinymce/plugins/template/plugin.js"],"names":["global$4","tinymce","util","Tools","resolve","typeOf","x","t","Array","prototype","isPrototypeOf","constructor","name","String","isType","type","value","isSimpleType","isString","isFunction","noop","constant","identity","curry","fn","initialArgs","_i","arguments","length","restArgs","all","concat","apply","never","always","global$3","global$2","getCreationDateClasses","editor","getParam","getModificationDateClasses","getSelectedContentClasses","getPreviewReplaceValues","getContentStyle","shouldUseContentCssCors","getTemplateReplaceValues","getTemplates","getCdateFormat","translate","getMdateFormat","getBodyClassFromHash","bodyClass","id","getBodyClass","indexOf","addZeros","len","i","getDateTime","fmt","date","Date","daysShort","split","daysLong","monthsShort","monthsLong","replace","getFullYear","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","createTemplateList","callback","templateList","send","url","success","text","JSON","parse","replaceTemplateValues","html","templateValues","each","v","k","RegExp","replaceVals","scope","dom","vl","select","e","hasClass","n","c","test","className","insertTemplate","_ui","sel","selection","getContent","el","create","appendChild","cloneNode","innerHTML","execCommand","addVisual","none","NONE","call","thunk","me","fold","_s","isSome","isNone","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","bind","exists","forall","filter","toArray","toString","some","a","constant_a","self","f","s","from","Optional","xs","r","findUntil","pred","until","find","global$1","global","hasOwnProperty","Object","get","obj","key","has","entitiesAttr","htmlEscape","match","getPreviewContent","contentCssEntries_1","contentStyle","cors_1","contentCSS","documentBaseURI","toAbsolute","encode","isMetaKeyPressed","mac","preventClicksOnLinksScript","directionality","getBody","dir","dirAttr","getURI","open","createTemplates","message","notificationManager","template","index","isUrlTemplate","selected","title","content","description","createSelectBoxItems","templates","findTemplate","templateTitle","loadFailedAlert","api","windowManager","alert","focus","getTemplateContent","reject","error","onChange","updateDialog","change","newTemplateTitle","getData","block","then","previewHtml","catch","disable","onSubmit","data","close","openDialog","selectBoxItems","buildDialogSpec","bodyItems","initialData","size","body","items","buttons","primary","dialogApi","label","sandboxed","preview","unblock","redial","optTemplates","showDialog","register$1","addCommand","setup","on","o","dateFormat","node","register","onAction","ui","registry","addButton","icon","tooltip","addMenuItem","Plugin","add"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.2 (2021-11-17)\n */\n(function () {\n    'use strict';\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType('string');\n    var isFunction = isSimpleType('function');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var getCreationDateClasses = function (editor) {\n      return editor.getParam('template_cdate_classes', 'cdate');\n    };\n    var getModificationDateClasses = function (editor) {\n      return editor.getParam('template_mdate_classes', 'mdate');\n    };\n    var getSelectedContentClasses = function (editor) {\n      return editor.getParam('template_selected_content_classes', 'selcontent');\n    };\n    var getPreviewReplaceValues = function (editor) {\n      return editor.getParam('template_preview_replace_values');\n    };\n    var getContentStyle = function (editor) {\n      return editor.getParam('content_style', '', 'string');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getTemplateReplaceValues = function (editor) {\n      return editor.getParam('template_replace_values');\n    };\n    var getTemplates = function (editor) {\n      return editor.getParam('templates');\n    };\n    var getCdateFormat = function (editor) {\n      return editor.getParam('template_cdate_format', editor.translate('%Y-%m-%d'));\n    };\n    var getMdateFormat = function (editor) {\n      return editor.getParam('template_mdate_format', editor.translate('%Y-%m-%d'));\n    };\n    var getBodyClassFromHash = function (editor) {\n      var bodyClass = editor.getParam('body_class', '', 'hash');\n      return bodyClass[editor.id] || '';\n    };\n    var getBodyClass = function (editor) {\n      var bodyClass = editor.getParam('body_class', '', 'string');\n      if (bodyClass.indexOf('=') === -1) {\n        return bodyClass;\n      } else {\n        return getBodyClassFromHash(editor);\n      }\n    };\n\n    var addZeros = function (value, len) {\n      value = '' + value;\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n      return value;\n    };\n    var getDateTime = function (editor, fmt, date) {\n      if (date === void 0) {\n        date = new Date();\n      }\n      var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n      var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n      var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n      var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n\n    var createTemplateList = function (editor, callback) {\n      return function () {\n        var templateList = getTemplates(editor);\n        if (isFunction(templateList)) {\n          templateList(callback);\n        } else if (isString(templateList)) {\n          global$2.send({\n            url: templateList,\n            success: function (text) {\n              callback(JSON.parse(text));\n            }\n          });\n        } else {\n          callback(templateList);\n        }\n      };\n    };\n    var replaceTemplateValues = function (html, templateValues) {\n      global$3.each(templateValues, function (v, k) {\n        if (isFunction(v)) {\n          v = v(k);\n        }\n        html = html.replace(new RegExp('\\\\{\\\\$' + k + '\\\\}', 'g'), v);\n      });\n      return html;\n    };\n    var replaceVals = function (editor, scope) {\n      var dom = editor.dom, vl = getTemplateReplaceValues(editor);\n      global$3.each(dom.select('*', scope), function (e) {\n        global$3.each(vl, function (v, k) {\n          if (dom.hasClass(e, k)) {\n            if (isFunction(v)) {\n              v(e);\n            }\n          }\n        });\n      });\n    };\n    var hasClass = function (n, c) {\n      return new RegExp('\\\\b' + c + '\\\\b', 'g').test(n.className);\n    };\n    var insertTemplate = function (editor, _ui, html) {\n      var dom = editor.dom;\n      var sel = editor.selection.getContent();\n      html = replaceTemplateValues(html, getTemplateReplaceValues(editor));\n      var el = dom.create('div', null, html);\n      var n = dom.select('.mceTmpl', el);\n      if (n && n.length > 0) {\n        el = dom.create('div', null);\n        el.appendChild(n[0].cloneNode(true));\n      }\n      global$3.each(dom.select('*', el), function (n) {\n        if (hasClass(n, getCreationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = getDateTime(editor, getCdateFormat(editor));\n        }\n        if (hasClass(n, getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = getDateTime(editor, getMdateFormat(editor));\n        }\n        if (hasClass(n, getSelectedContentClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = sel;\n        }\n      });\n      replaceVals(editor, el);\n      editor.execCommand('mceInsertContent', false, el.innerHTML);\n      editor.addVisual();\n    };\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var entitiesAttr = {\n      '\"': '&quot;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '\\'': '&#039;'\n    };\n    var htmlEscape = function (html) {\n      return html.replace(/[\"'<>&]/g, function (match) {\n        return get(entitiesAttr, match).getOr(match);\n      });\n    };\n\n    var getPreviewContent = function (editor, html) {\n      if (html.indexOf('<html>') === -1) {\n        var contentCssEntries_1 = '';\n        var contentStyle = getContentStyle(editor);\n        var cors_1 = shouldUseContentCssCors(editor) ? ' crossorigin=\"anonymous\"' : '';\n        global$3.each(editor.contentCSS, function (url) {\n          contentCssEntries_1 += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + editor.documentBaseURI.toAbsolute(url) + '\"' + cors_1 + '>';\n        });\n        if (contentStyle) {\n          contentCssEntries_1 += '<style type=\"text/css\">' + contentStyle + '</style>';\n        }\n        var bodyClass = getBodyClass(editor);\n        var encode = editor.dom.encode;\n        var isMetaKeyPressed = global$1.mac ? 'e.metaKey' : 'e.ctrlKey && !e.altKey';\n        var preventClicksOnLinksScript = '<script>' + 'document.addEventListener && document.addEventListener(\"click\", function(e) {' + 'for (var elm = e.target; elm; elm = elm.parentNode) {' + 'if (elm.nodeName === \"A\" && !(' + isMetaKeyPressed + ')) {' + 'e.preventDefault();' + '}' + '}' + '}, false);' + '</script> ';\n        var directionality = editor.getBody().dir;\n        var dirAttr = directionality ? ' dir=\"' + encode(directionality) + '\"' : '';\n        html = '<!DOCTYPE html>' + '<html>' + '<head>' + '<base href=\"' + encode(editor.documentBaseURI.getURI()) + '\">' + contentCssEntries_1 + preventClicksOnLinksScript + '</head>' + '<body class=\"' + encode(bodyClass) + '\"' + dirAttr + '>' + html + '</body>' + '</html>';\n      }\n      return replaceTemplateValues(html, getPreviewReplaceValues(editor));\n    };\n    var open = function (editor, templateList) {\n      var createTemplates = function () {\n        if (!templateList || templateList.length === 0) {\n          var message = editor.translate('No templates defined.');\n          editor.notificationManager.open({\n            text: message,\n            type: 'info'\n          });\n          return Optional.none();\n        }\n        return Optional.from(global$3.map(templateList, function (template, index) {\n          var isUrlTemplate = function (t) {\n            return t.url !== undefined;\n          };\n          return {\n            selected: index === 0,\n            text: template.title,\n            value: {\n              url: isUrlTemplate(template) ? Optional.from(template.url) : Optional.none(),\n              content: !isUrlTemplate(template) ? Optional.from(template.content) : Optional.none(),\n              description: template.description\n            }\n          };\n        }));\n      };\n      var createSelectBoxItems = function (templates) {\n        return map(templates, function (t) {\n          return {\n            text: t.text,\n            value: t.text\n          };\n        });\n      };\n      var findTemplate = function (templates, templateTitle) {\n        return find(templates, function (t) {\n          return t.text === templateTitle;\n        });\n      };\n      var loadFailedAlert = function (api) {\n        editor.windowManager.alert('Could not load the specified template.', function () {\n          return api.focus('template');\n        });\n      };\n      var getTemplateContent = function (t) {\n        return new global(function (resolve, reject) {\n          t.value.url.fold(function () {\n            return resolve(t.value.content.getOr(''));\n          }, function (url) {\n            return global$2.send({\n              url: url,\n              success: function (html) {\n                resolve(html);\n              },\n              error: function (e) {\n                reject(e);\n              }\n            });\n          });\n        });\n      };\n      var onChange = function (templates, updateDialog) {\n        return function (api, change) {\n          if (change.name === 'template') {\n            var newTemplateTitle = api.getData().template;\n            findTemplate(templates, newTemplateTitle).each(function (t) {\n              api.block('Loading...');\n              getTemplateContent(t).then(function (previewHtml) {\n                updateDialog(api, t, previewHtml);\n              }).catch(function () {\n                updateDialog(api, t, '');\n                api.disable('save');\n                loadFailedAlert(api);\n              });\n            });\n          }\n        };\n      };\n      var onSubmit = function (templates) {\n        return function (api) {\n          var data = api.getData();\n          findTemplate(templates, data.template).each(function (t) {\n            getTemplateContent(t).then(function (previewHtml) {\n              editor.execCommand('mceInsertTemplate', false, previewHtml);\n              api.close();\n            }).catch(function () {\n              api.disable('save');\n              loadFailedAlert(api);\n            });\n          });\n        };\n      };\n      var openDialog = function (templates) {\n        var selectBoxItems = createSelectBoxItems(templates);\n        var buildDialogSpec = function (bodyItems, initialData) {\n          return {\n            title: 'Insert Template',\n            size: 'large',\n            body: {\n              type: 'panel',\n              items: bodyItems\n            },\n            initialData: initialData,\n            buttons: [\n              {\n                type: 'cancel',\n                name: 'cancel',\n                text: 'Cancel'\n              },\n              {\n                type: 'submit',\n                name: 'save',\n                text: 'Save',\n                primary: true\n              }\n            ],\n            onSubmit: onSubmit(templates),\n            onChange: onChange(templates, updateDialog)\n          };\n        };\n        var updateDialog = function (dialogApi, template, previewHtml) {\n          var content = getPreviewContent(editor, previewHtml);\n          var bodyItems = [\n            {\n              type: 'selectbox',\n              name: 'template',\n              label: 'Templates',\n              items: selectBoxItems\n            },\n            {\n              type: 'htmlpanel',\n              html: '<p aria-live=\"polite\">' + htmlEscape(template.value.description) + '</p>'\n            },\n            {\n              label: 'Preview',\n              type: 'iframe',\n              name: 'preview',\n              sandboxed: false\n            }\n          ];\n          var initialData = {\n            template: template.text,\n            preview: content\n          };\n          dialogApi.unblock();\n          dialogApi.redial(buildDialogSpec(bodyItems, initialData));\n          dialogApi.focus('template');\n        };\n        var dialogApi = editor.windowManager.open(buildDialogSpec([], {\n          template: '',\n          preview: ''\n        }));\n        dialogApi.block('Loading...');\n        getTemplateContent(templates[0]).then(function (previewHtml) {\n          updateDialog(dialogApi, templates[0], previewHtml);\n        }).catch(function () {\n          updateDialog(dialogApi, templates[0], '');\n          dialogApi.disable('save');\n          loadFailedAlert(dialogApi);\n        });\n      };\n      var optTemplates = createTemplates();\n      optTemplates.each(openDialog);\n    };\n\n    var showDialog = function (editor) {\n      return function (templates) {\n        open(editor, templates);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addCommand('mceInsertTemplate', curry(insertTemplate, editor));\n      editor.addCommand('mceTemplate', createTemplateList(editor, showDialog(editor)));\n    };\n\n    var setup = function (editor) {\n      editor.on('PreProcess', function (o) {\n        var dom = editor.dom, dateFormat = getMdateFormat(editor);\n        global$3.each(dom.select('div', o.node), function (e) {\n          if (dom.hasClass(e, 'mceTmpl')) {\n            global$3.each(dom.select('*', e), function (e) {\n              if (dom.hasClass(e, getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n                e.innerHTML = getDateTime(editor, dateFormat);\n              }\n            });\n            replaceVals(editor, e);\n          }\n        });\n      });\n    };\n\n    var register = function (editor) {\n      var onAction = function () {\n        return editor.execCommand('mceTemplate');\n      };\n      editor.ui.registry.addButton('template', {\n        icon: 'template',\n        tooltip: 'Insert template',\n        onAction: onAction\n      });\n      editor.ui.registry.addMenuItem('template', {\n        icon: 'template',\n        text: 'Insert template...',\n        onAction: onAction\n      });\n    };\n\n    function Plugin () {\n      global$4.add('template', function (editor) {\n        register(editor);\n        register$1(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"]},"metadata":{},"sourceType":"script"}