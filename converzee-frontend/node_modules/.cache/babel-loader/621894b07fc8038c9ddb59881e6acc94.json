{"ast":null,"code":"/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.2 (2021-11-17)\n */\n(function () {\n  'use strict';\n\n  var Cell = function (initial) {\n    var value = initial;\n\n    var get = function () {\n      return value;\n    };\n\n    var set = function (v) {\n      value = v;\n    };\n\n    return {\n      get: get,\n      set: set\n    };\n  };\n\n  var global$3 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var get$5 = function (fullscreenState) {\n    return {\n      isFullscreen: function () {\n        return fullscreenState.get() !== null;\n      }\n    };\n  };\n\n  var typeOf = function (x) {\n    var t = typeof x;\n\n    if (x === null) {\n      return 'null';\n    } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n      return 'array';\n    } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n      return 'string';\n    } else {\n      return t;\n    }\n  };\n\n  var isType$1 = function (type) {\n    return function (value) {\n      return typeOf(value) === type;\n    };\n  };\n\n  var isSimpleType = function (type) {\n    return function (value) {\n      return typeof value === type;\n    };\n  };\n\n  var isString = isType$1('string');\n  var isArray = isType$1('array');\n  var isBoolean = isSimpleType('boolean');\n\n  var isNullable = function (a) {\n    return a === null || a === undefined;\n  };\n\n  var isNonNullable = function (a) {\n    return !isNullable(a);\n  };\n\n  var isFunction = isSimpleType('function');\n  var isNumber = isSimpleType('number');\n\n  var noop = function () {};\n\n  var compose = function (fa, fb) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return fa(fb.apply(null, args));\n    };\n  };\n\n  var compose1 = function (fbc, fab) {\n    return function (a) {\n      return fbc(fab(a));\n    };\n  };\n\n  var constant = function (value) {\n    return function () {\n      return value;\n    };\n  };\n\n  var identity = function (x) {\n    return x;\n  };\n\n  function curry(fn) {\n    var initialArgs = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      initialArgs[_i - 1] = arguments[_i];\n    }\n\n    return function () {\n      var restArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        restArgs[_i] = arguments[_i];\n      }\n\n      var all = initialArgs.concat(restArgs);\n      return fn.apply(null, all);\n    };\n  }\n\n  var never = constant(false);\n  var always = constant(true);\n\n  var none = function () {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var call = function (thunk) {\n      return thunk();\n    };\n\n    var id = identity;\n    var me = {\n      fold: function (n, _s) {\n        return n();\n      },\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function (msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: function () {\n        return none();\n      },\n      toArray: function () {\n        return [];\n      },\n      toString: constant('none()')\n    };\n    return me;\n  }();\n\n  var some = function (a) {\n    var constant_a = constant(a);\n\n    var self = function () {\n      return me;\n    };\n\n    var bind = function (f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function (n, s) {\n        return s(a);\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function (f) {\n        return some(f(a));\n      },\n      each: function (f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function (f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function () {\n        return [a];\n      },\n      toString: function () {\n        return 'some(' + a + ')';\n      }\n    };\n    return me;\n  };\n\n  var from = function (value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Optional = {\n    some: some,\n    none: none,\n    from: from\n  };\n\n  var __assign = function () {\n    __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n\n      return t;\n    };\n\n    return __assign.apply(this, arguments);\n  };\n\n  var singleton = function (doRevoke) {\n    var subject = Cell(Optional.none());\n\n    var revoke = function () {\n      return subject.get().each(doRevoke);\n    };\n\n    var clear = function () {\n      revoke();\n      subject.set(Optional.none());\n    };\n\n    var isSet = function () {\n      return subject.get().isSome();\n    };\n\n    var get = function () {\n      return subject.get();\n    };\n\n    var set = function (s) {\n      revoke();\n      subject.set(Optional.some(s));\n    };\n\n    return {\n      clear: clear,\n      isSet: isSet,\n      get: get,\n      set: set\n    };\n  };\n\n  var unbindable = function () {\n    return singleton(function (s) {\n      return s.unbind();\n    });\n  };\n\n  var value = function () {\n    var subject = singleton(noop);\n\n    var on = function (f) {\n      return subject.get().each(f);\n    };\n\n    return __assign(__assign({}, subject), {\n      on: on\n    });\n  };\n\n  var nativePush = Array.prototype.push;\n\n  var map = function (xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i);\n    }\n\n    return r;\n  };\n\n  var each$1 = function (xs, f) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      f(x, i);\n    }\n  };\n\n  var filter$1 = function (xs, pred) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        r.push(x);\n      }\n    }\n\n    return r;\n  };\n\n  var findUntil = function (xs, pred, until) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        return Optional.some(x);\n      } else if (until(x, i)) {\n        break;\n      }\n    }\n\n    return Optional.none();\n  };\n\n  var find$1 = function (xs, pred) {\n    return findUntil(xs, pred, never);\n  };\n\n  var flatten = function (xs) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      if (!isArray(xs[i])) {\n        throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n      }\n\n      nativePush.apply(r, xs[i]);\n    }\n\n    return r;\n  };\n\n  var bind$3 = function (xs, f) {\n    return flatten(map(xs, f));\n  };\n\n  var get$4 = function (xs, i) {\n    return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n  };\n\n  var head = function (xs) {\n    return get$4(xs, 0);\n  };\n\n  var findMap = function (arr, f) {\n    for (var i = 0; i < arr.length; i++) {\n      var r = f(arr[i], i);\n\n      if (r.isSome()) {\n        return r;\n      }\n    }\n\n    return Optional.none();\n  };\n\n  var keys = Object.keys;\n\n  var each = function (obj, f) {\n    var props = keys(obj);\n\n    for (var k = 0, len = props.length; k < len; k++) {\n      var i = props[k];\n      var x = obj[i];\n      f(x, i);\n    }\n  };\n\n  var contains = function (str, substr) {\n    return str.indexOf(substr) !== -1;\n  };\n\n  var isSupported$1 = function (dom) {\n    return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n  };\n\n  var fromHtml = function (html, scope) {\n    var doc = scope || document;\n    var div = doc.createElement('div');\n    div.innerHTML = html;\n\n    if (!div.hasChildNodes() || div.childNodes.length > 1) {\n      console.error('HTML does not have a single root node', html);\n      throw new Error('HTML must have a single root node');\n    }\n\n    return fromDom(div.childNodes[0]);\n  };\n\n  var fromTag = function (tag, scope) {\n    var doc = scope || document;\n    var node = doc.createElement(tag);\n    return fromDom(node);\n  };\n\n  var fromText = function (text, scope) {\n    var doc = scope || document;\n    var node = doc.createTextNode(text);\n    return fromDom(node);\n  };\n\n  var fromDom = function (node) {\n    if (node === null || node === undefined) {\n      throw new Error('Node cannot be null or undefined');\n    }\n\n    return {\n      dom: node\n    };\n  };\n\n  var fromPoint = function (docElm, x, y) {\n    return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n  };\n\n  var SugarElement = {\n    fromHtml: fromHtml,\n    fromTag: fromTag,\n    fromText: fromText,\n    fromDom: fromDom,\n    fromPoint: fromPoint\n  };\n  typeof window !== 'undefined' ? window : Function('return this;')();\n  var DOCUMENT = 9;\n  var DOCUMENT_FRAGMENT = 11;\n  var ELEMENT = 1;\n  var TEXT = 3;\n\n  var type = function (element) {\n    return element.dom.nodeType;\n  };\n\n  var isType = function (t) {\n    return function (element) {\n      return type(element) === t;\n    };\n  };\n\n  var isElement = isType(ELEMENT);\n  var isText = isType(TEXT);\n  var isDocument = isType(DOCUMENT);\n  var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n\n  var cached = function (f) {\n    var called = false;\n    var r;\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      if (!called) {\n        called = true;\n        r = f.apply(null, args);\n      }\n\n      return r;\n    };\n  };\n\n  var DeviceType = function (os, browser, userAgent, mediaMatch) {\n    var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n    var isiPhone = os.isiOS() && !isiPad;\n    var isMobile = os.isiOS() || os.isAndroid();\n    var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n    var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n    var isPhone = isiPhone || isMobile && !isTablet;\n    var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n    var isDesktop = !isPhone && !isTablet && !iOSwebview;\n    return {\n      isiPad: constant(isiPad),\n      isiPhone: constant(isiPhone),\n      isTablet: constant(isTablet),\n      isPhone: constant(isPhone),\n      isTouch: constant(isTouch),\n      isAndroid: os.isAndroid,\n      isiOS: os.isiOS,\n      isWebView: constant(iOSwebview),\n      isDesktop: constant(isDesktop)\n    };\n  };\n\n  var firstMatch = function (regexes, s) {\n    for (var i = 0; i < regexes.length; i++) {\n      var x = regexes[i];\n\n      if (x.test(s)) {\n        return x;\n      }\n    }\n\n    return undefined;\n  };\n\n  var find = function (regexes, agent) {\n    var r = firstMatch(regexes, agent);\n\n    if (!r) {\n      return {\n        major: 0,\n        minor: 0\n      };\n    }\n\n    var group = function (i) {\n      return Number(agent.replace(r, '$' + i));\n    };\n\n    return nu$2(group(1), group(2));\n  };\n\n  var detect$3 = function (versionRegexes, agent) {\n    var cleanedAgent = String(agent).toLowerCase();\n\n    if (versionRegexes.length === 0) {\n      return unknown$2();\n    }\n\n    return find(versionRegexes, cleanedAgent);\n  };\n\n  var unknown$2 = function () {\n    return nu$2(0, 0);\n  };\n\n  var nu$2 = function (major, minor) {\n    return {\n      major: major,\n      minor: minor\n    };\n  };\n\n  var Version = {\n    nu: nu$2,\n    detect: detect$3,\n    unknown: unknown$2\n  };\n\n  var detectBrowser$1 = function (browsers, userAgentData) {\n    return findMap(userAgentData.brands, function (uaBrand) {\n      var lcBrand = uaBrand.brand.toLowerCase();\n      return find$1(browsers, function (browser) {\n        var _a;\n\n        return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n      }).map(function (info) {\n        return {\n          current: info.name,\n          version: Version.nu(parseInt(uaBrand.version, 10), 0)\n        };\n      });\n    });\n  };\n\n  var detect$2 = function (candidates, userAgent) {\n    var agent = String(userAgent).toLowerCase();\n    return find$1(candidates, function (candidate) {\n      return candidate.search(agent);\n    });\n  };\n\n  var detectBrowser = function (browsers, userAgent) {\n    return detect$2(browsers, userAgent).map(function (browser) {\n      var version = Version.detect(browser.versionRegexes, userAgent);\n      return {\n        current: browser.name,\n        version: version\n      };\n    });\n  };\n\n  var detectOs = function (oses, userAgent) {\n    return detect$2(oses, userAgent).map(function (os) {\n      var version = Version.detect(os.versionRegexes, userAgent);\n      return {\n        current: os.name,\n        version: version\n      };\n    });\n  };\n\n  var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n\n  var checkContains = function (target) {\n    return function (uastring) {\n      return contains(uastring, target);\n    };\n  };\n\n  var browsers = [{\n    name: 'Edge',\n    versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n    search: function (uastring) {\n      return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n    }\n  }, {\n    name: 'Chrome',\n    brand: 'Chromium',\n    versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/, normalVersionRegex],\n    search: function (uastring) {\n      return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n    }\n  }, {\n    name: 'IE',\n    versionRegexes: [/.*?msie\\ ?([0-9]+)\\.([0-9]+).*/, /.*?rv:([0-9]+)\\.([0-9]+).*/],\n    search: function (uastring) {\n      return contains(uastring, 'msie') || contains(uastring, 'trident');\n    }\n  }, {\n    name: 'Opera',\n    versionRegexes: [normalVersionRegex, /.*?opera\\/([0-9]+)\\.([0-9]+).*/],\n    search: checkContains('opera')\n  }, {\n    name: 'Firefox',\n    versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n    search: checkContains('firefox')\n  }, {\n    name: 'Safari',\n    versionRegexes: [normalVersionRegex, /.*?cpu os ([0-9]+)_([0-9]+).*/],\n    search: function (uastring) {\n      return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n    }\n  }];\n  var oses = [{\n    name: 'Windows',\n    search: checkContains('win'),\n    versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n  }, {\n    name: 'iOS',\n    search: function (uastring) {\n      return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n    },\n    versionRegexes: [/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/, /.*cpu os ([0-9]+)_([0-9]+).*/, /.*cpu iphone os ([0-9]+)_([0-9]+).*/]\n  }, {\n    name: 'Android',\n    search: checkContains('android'),\n    versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n  }, {\n    name: 'OSX',\n    search: checkContains('mac os x'),\n    versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n  }, {\n    name: 'Linux',\n    search: checkContains('linux'),\n    versionRegexes: []\n  }, {\n    name: 'Solaris',\n    search: checkContains('sunos'),\n    versionRegexes: []\n  }, {\n    name: 'FreeBSD',\n    search: checkContains('freebsd'),\n    versionRegexes: []\n  }, {\n    name: 'ChromeOS',\n    search: checkContains('cros'),\n    versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n  }];\n  var PlatformInfo = {\n    browsers: constant(browsers),\n    oses: constant(oses)\n  };\n  var edge = 'Edge';\n  var chrome = 'Chrome';\n  var ie = 'IE';\n  var opera = 'Opera';\n  var firefox = 'Firefox';\n  var safari = 'Safari';\n\n  var unknown$1 = function () {\n    return nu$1({\n      current: undefined,\n      version: Version.unknown()\n    });\n  };\n\n  var nu$1 = function (info) {\n    var current = info.current;\n    var version = info.version;\n\n    var isBrowser = function (name) {\n      return function () {\n        return current === name;\n      };\n    };\n\n    return {\n      current: current,\n      version: version,\n      isEdge: isBrowser(edge),\n      isChrome: isBrowser(chrome),\n      isIE: isBrowser(ie),\n      isOpera: isBrowser(opera),\n      isFirefox: isBrowser(firefox),\n      isSafari: isBrowser(safari)\n    };\n  };\n\n  var Browser = {\n    unknown: unknown$1,\n    nu: nu$1,\n    edge: constant(edge),\n    chrome: constant(chrome),\n    ie: constant(ie),\n    opera: constant(opera),\n    firefox: constant(firefox),\n    safari: constant(safari)\n  };\n  var windows = 'Windows';\n  var ios = 'iOS';\n  var android = 'Android';\n  var linux = 'Linux';\n  var osx = 'OSX';\n  var solaris = 'Solaris';\n  var freebsd = 'FreeBSD';\n  var chromeos = 'ChromeOS';\n\n  var unknown = function () {\n    return nu({\n      current: undefined,\n      version: Version.unknown()\n    });\n  };\n\n  var nu = function (info) {\n    var current = info.current;\n    var version = info.version;\n\n    var isOS = function (name) {\n      return function () {\n        return current === name;\n      };\n    };\n\n    return {\n      current: current,\n      version: version,\n      isWindows: isOS(windows),\n      isiOS: isOS(ios),\n      isAndroid: isOS(android),\n      isOSX: isOS(osx),\n      isLinux: isOS(linux),\n      isSolaris: isOS(solaris),\n      isFreeBSD: isOS(freebsd),\n      isChromeOS: isOS(chromeos)\n    };\n  };\n\n  var OperatingSystem = {\n    unknown: unknown,\n    nu: nu,\n    windows: constant(windows),\n    ios: constant(ios),\n    android: constant(android),\n    linux: constant(linux),\n    osx: constant(osx),\n    solaris: constant(solaris),\n    freebsd: constant(freebsd),\n    chromeos: constant(chromeos)\n  };\n\n  var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n    var browsers = PlatformInfo.browsers();\n    var oses = PlatformInfo.oses();\n    var browser = userAgentDataOpt.bind(function (userAgentData) {\n      return detectBrowser$1(browsers, userAgentData);\n    }).orThunk(function () {\n      return detectBrowser(browsers, userAgent);\n    }).fold(Browser.unknown, Browser.nu);\n    var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n    var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n    return {\n      browser: browser,\n      os: os,\n      deviceType: deviceType\n    };\n  };\n\n  var PlatformDetection = {\n    detect: detect$1\n  };\n\n  var mediaMatch = function (query) {\n    return window.matchMedia(query).matches;\n  };\n\n  var platform = cached(function () {\n    return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n  });\n\n  var detect = function () {\n    return platform();\n  };\n\n  var is = function (element, selector) {\n    var dom = element.dom;\n\n    if (dom.nodeType !== ELEMENT) {\n      return false;\n    } else {\n      var elem = dom;\n\n      if (elem.matches !== undefined) {\n        return elem.matches(selector);\n      } else if (elem.msMatchesSelector !== undefined) {\n        return elem.msMatchesSelector(selector);\n      } else if (elem.webkitMatchesSelector !== undefined) {\n        return elem.webkitMatchesSelector(selector);\n      } else if (elem.mozMatchesSelector !== undefined) {\n        return elem.mozMatchesSelector(selector);\n      } else {\n        throw new Error('Browser lacks native selectors');\n      }\n    }\n  };\n\n  var bypassSelector = function (dom) {\n    return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n  };\n\n  var all$1 = function (selector, scope) {\n    var base = scope === undefined ? document : scope.dom;\n    return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n  };\n\n  var eq = function (e1, e2) {\n    return e1.dom === e2.dom;\n  };\n\n  var owner = function (element) {\n    return SugarElement.fromDom(element.dom.ownerDocument);\n  };\n\n  var documentOrOwner = function (dos) {\n    return isDocument(dos) ? dos : owner(dos);\n  };\n\n  var parent = function (element) {\n    return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n  };\n\n  var parents = function (element, isRoot) {\n    var stop = isFunction(isRoot) ? isRoot : never;\n    var dom = element.dom;\n    var ret = [];\n\n    while (dom.parentNode !== null && dom.parentNode !== undefined) {\n      var rawParent = dom.parentNode;\n      var p = SugarElement.fromDom(rawParent);\n      ret.push(p);\n\n      if (stop(p) === true) {\n        break;\n      } else {\n        dom = rawParent;\n      }\n    }\n\n    return ret;\n  };\n\n  var siblings$2 = function (element) {\n    var filterSelf = function (elements) {\n      return filter$1(elements, function (x) {\n        return !eq(element, x);\n      });\n    };\n\n    return parent(element).map(children).map(filterSelf).getOr([]);\n  };\n\n  var children = function (element) {\n    return map(element.dom.childNodes, SugarElement.fromDom);\n  };\n\n  var isShadowRoot = function (dos) {\n    return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n  };\n\n  var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n  var isSupported = constant(supported);\n  var getRootNode = supported ? function (e) {\n    return SugarElement.fromDom(e.dom.getRootNode());\n  } : documentOrOwner;\n\n  var getShadowRoot = function (e) {\n    var r = getRootNode(e);\n    return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n  };\n\n  var getShadowHost = function (e) {\n    return SugarElement.fromDom(e.dom.host);\n  };\n\n  var getOriginalEventTarget = function (event) {\n    if (isSupported() && isNonNullable(event.target)) {\n      var el = SugarElement.fromDom(event.target);\n\n      if (isElement(el) && isOpenShadowHost(el)) {\n        if (event.composed && event.composedPath) {\n          var composedPath = event.composedPath();\n\n          if (composedPath) {\n            return head(composedPath);\n          }\n        }\n      }\n    }\n\n    return Optional.from(event.target);\n  };\n\n  var isOpenShadowHost = function (element) {\n    return isNonNullable(element.dom.shadowRoot);\n  };\n\n  var inBody = function (element) {\n    var dom = isText(element) ? element.dom.parentNode : element.dom;\n\n    if (dom === undefined || dom === null || dom.ownerDocument === null) {\n      return false;\n    }\n\n    var doc = dom.ownerDocument;\n    return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n      return doc.body.contains(dom);\n    }, compose1(inBody, getShadowHost));\n  };\n\n  var getBody = function (doc) {\n    var b = doc.dom.body;\n\n    if (b === null || b === undefined) {\n      throw new Error('Body is not available yet');\n    }\n\n    return SugarElement.fromDom(b);\n  };\n\n  var rawSet = function (dom, key, value) {\n    if (isString(value) || isBoolean(value) || isNumber(value)) {\n      dom.setAttribute(key, value + '');\n    } else {\n      console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n      throw new Error('Attribute value was not simple');\n    }\n  };\n\n  var set = function (element, key, value) {\n    rawSet(element.dom, key, value);\n  };\n\n  var get$3 = function (element, key) {\n    var v = element.dom.getAttribute(key);\n    return v === null ? undefined : v;\n  };\n\n  var remove = function (element, key) {\n    element.dom.removeAttribute(key);\n  };\n\n  var internalSet = function (dom, property, value) {\n    if (!isString(value)) {\n      console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n      throw new Error('CSS value must be a string: ' + value);\n    }\n\n    if (isSupported$1(dom)) {\n      dom.style.setProperty(property, value);\n    }\n  };\n\n  var setAll = function (element, css) {\n    var dom = element.dom;\n    each(css, function (v, k) {\n      internalSet(dom, k, v);\n    });\n  };\n\n  var get$2 = function (element, property) {\n    var dom = element.dom;\n    var styles = window.getComputedStyle(dom);\n    var r = styles.getPropertyValue(property);\n    return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n  };\n\n  var getUnsafeProperty = function (dom, property) {\n    return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n  };\n\n  var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n    return {\n      target: target,\n      x: x,\n      y: y,\n      stop: stop,\n      prevent: prevent,\n      kill: kill,\n      raw: raw\n    };\n  };\n\n  var fromRawEvent = function (rawEvent) {\n    var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n\n    var stop = function () {\n      return rawEvent.stopPropagation();\n    };\n\n    var prevent = function () {\n      return rawEvent.preventDefault();\n    };\n\n    var kill = compose(prevent, stop);\n    return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n  };\n\n  var handle = function (filter, handler) {\n    return function (rawEvent) {\n      if (filter(rawEvent)) {\n        handler(fromRawEvent(rawEvent));\n      }\n    };\n  };\n\n  var binder = function (element, event, filter, handler, useCapture) {\n    var wrapped = handle(filter, handler);\n    element.dom.addEventListener(event, wrapped, useCapture);\n    return {\n      unbind: curry(unbind, element, event, wrapped, useCapture)\n    };\n  };\n\n  var bind$2 = function (element, event, filter, handler) {\n    return binder(element, event, filter, handler, false);\n  };\n\n  var unbind = function (element, event, handler, useCapture) {\n    element.dom.removeEventListener(event, handler, useCapture);\n  };\n\n  var filter = always;\n\n  var bind$1 = function (element, event, handler) {\n    return bind$2(element, event, filter, handler);\n  };\n\n  var r = function (left, top) {\n    var translate = function (x, y) {\n      return r(left + x, top + y);\n    };\n\n    return {\n      left: left,\n      top: top,\n      translate: translate\n    };\n  };\n\n  var SugarPosition = r;\n\n  var get$1 = function (_DOC) {\n    var doc = _DOC !== undefined ? _DOC.dom : document;\n    var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n    var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n    return SugarPosition(x, y);\n  };\n\n  var get = function (_win) {\n    var win = _win === undefined ? window : _win;\n\n    if (detect().browser.isFirefox()) {\n      return Optional.none();\n    } else {\n      return Optional.from(win['visualViewport']);\n    }\n  };\n\n  var bounds = function (x, y, width, height) {\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height,\n      right: x + width,\n      bottom: y + height\n    };\n  };\n\n  var getBounds = function (_win) {\n    var win = _win === undefined ? window : _win;\n    var doc = win.document;\n    var scroll = get$1(SugarElement.fromDom(doc));\n    return get(win).fold(function () {\n      var html = win.document.documentElement;\n      var width = html.clientWidth;\n      var height = html.clientHeight;\n      return bounds(scroll.left, scroll.top, width, height);\n    }, function (visualViewport) {\n      return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n    });\n  };\n\n  var bind = function (name, callback, _win) {\n    return get(_win).map(function (visualViewport) {\n      var handler = function (e) {\n        return callback(fromRawEvent(e));\n      };\n\n      visualViewport.addEventListener(name, handler);\n      return {\n        unbind: function () {\n          return visualViewport.removeEventListener(name, handler);\n        }\n      };\n    }).getOrThunk(function () {\n      return {\n        unbind: noop\n      };\n    });\n  };\n\n  var global$2 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n  var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n  var global = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n  var fireFullscreenStateChanged = function (editor, state) {\n    editor.fire('FullscreenStateChanged', {\n      state: state\n    });\n  };\n\n  var getFullscreenNative = function (editor) {\n    return editor.getParam('fullscreen_native', false, 'boolean');\n  };\n\n  var getFullscreenRoot = function (editor) {\n    var elem = SugarElement.fromDom(editor.getElement());\n    return getShadowRoot(elem).map(getShadowHost).getOrThunk(function () {\n      return getBody(owner(elem));\n    });\n  };\n\n  var getFullscreenElement = function (root) {\n    if (root.fullscreenElement !== undefined) {\n      return root.fullscreenElement;\n    } else if (root.msFullscreenElement !== undefined) {\n      return root.msFullscreenElement;\n    } else if (root.webkitFullscreenElement !== undefined) {\n      return root.webkitFullscreenElement;\n    } else {\n      return null;\n    }\n  };\n\n  var getFullscreenchangeEventName = function () {\n    if (document.fullscreenElement !== undefined) {\n      return 'fullscreenchange';\n    } else if (document.msFullscreenElement !== undefined) {\n      return 'MSFullscreenChange';\n    } else if (document.webkitFullscreenElement !== undefined) {\n      return 'webkitfullscreenchange';\n    } else {\n      return 'fullscreenchange';\n    }\n  };\n\n  var requestFullscreen = function (sugarElem) {\n    var elem = sugarElem.dom;\n\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      elem.msRequestFullscreen();\n    } else if (elem.webkitRequestFullScreen) {\n      elem.webkitRequestFullScreen();\n    }\n  };\n\n  var exitFullscreen = function (sugarDoc) {\n    var doc = sugarDoc.dom;\n\n    if (doc.exitFullscreen) {\n      doc.exitFullscreen();\n    } else if (doc.msExitFullscreen) {\n      doc.msExitFullscreen();\n    } else if (doc.webkitCancelFullScreen) {\n      doc.webkitCancelFullScreen();\n    }\n  };\n\n  var isFullscreenElement = function (elem) {\n    return elem.dom === getFullscreenElement(owner(elem).dom);\n  };\n\n  var ancestors$1 = function (scope, predicate, isRoot) {\n    return filter$1(parents(scope, isRoot), predicate);\n  };\n\n  var siblings$1 = function (scope, predicate) {\n    return filter$1(siblings$2(scope), predicate);\n  };\n\n  var all = function (selector) {\n    return all$1(selector);\n  };\n\n  var ancestors = function (scope, selector, isRoot) {\n    return ancestors$1(scope, function (e) {\n      return is(e, selector);\n    }, isRoot);\n  };\n\n  var siblings = function (scope, selector) {\n    return siblings$1(scope, function (e) {\n      return is(e, selector);\n    });\n  };\n\n  var attr = 'data-ephox-mobile-fullscreen-style';\n  var siblingStyles = 'display:none!important;';\n  var ancestorPosition = 'position:absolute!important;';\n  var ancestorStyles = 'top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;';\n  var bgFallback = 'background-color:rgb(255,255,255)!important;';\n  var isAndroid = global$1.os.isAndroid();\n\n  var matchColor = function (editorBody) {\n    var color = get$2(editorBody, 'background-color');\n    return color !== undefined && color !== '' ? 'background-color:' + color + '!important' : bgFallback;\n  };\n\n  var clobberStyles = function (dom, container, editorBody) {\n    var gatherSiblings = function (element) {\n      return siblings(element, '*:not(.tox-silver-sink)');\n    };\n\n    var clobber = function (clobberStyle) {\n      return function (element) {\n        var styles = get$3(element, 'style');\n        var backup = styles === undefined ? 'no-styles' : styles.trim();\n\n        if (backup === clobberStyle) {\n          return;\n        } else {\n          set(element, attr, backup);\n          setAll(element, dom.parseStyle(clobberStyle));\n        }\n      };\n    };\n\n    var ancestors$1 = ancestors(container, '*');\n    var siblings$1 = bind$3(ancestors$1, gatherSiblings);\n    var bgColor = matchColor(editorBody);\n    each$1(siblings$1, clobber(siblingStyles));\n    each$1(ancestors$1, clobber(ancestorPosition + ancestorStyles + bgColor));\n    var containerStyles = isAndroid === true ? '' : ancestorPosition;\n    clobber(containerStyles + ancestorStyles + bgColor)(container);\n  };\n\n  var restoreStyles = function (dom) {\n    var clobberedEls = all('[' + attr + ']');\n    each$1(clobberedEls, function (element) {\n      var restore = get$3(element, attr);\n\n      if (restore !== 'no-styles') {\n        setAll(element, dom.parseStyle(restore));\n      } else {\n        remove(element, 'style');\n      }\n\n      remove(element, attr);\n    });\n  };\n\n  var DOM = global$2.DOM;\n\n  var getScrollPos = function () {\n    return getBounds(window);\n  };\n\n  var setScrollPos = function (pos) {\n    return window.scrollTo(pos.x, pos.y);\n  };\n\n  var viewportUpdate = get().fold(function () {\n    return {\n      bind: noop,\n      unbind: noop\n    };\n  }, function (visualViewport) {\n    var editorContainer = value();\n    var resizeBinder = unbindable();\n    var scrollBinder = unbindable();\n\n    var refreshScroll = function () {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    };\n\n    var refreshVisualViewport = function () {\n      window.requestAnimationFrame(function () {\n        editorContainer.on(function (container) {\n          return setAll(container, {\n            top: visualViewport.offsetTop + 'px',\n            left: visualViewport.offsetLeft + 'px',\n            height: visualViewport.height + 'px',\n            width: visualViewport.width + 'px'\n          });\n        });\n      });\n    };\n\n    var update = global.throttle(function () {\n      refreshScroll();\n      refreshVisualViewport();\n    }, 50);\n\n    var bind$1 = function (element) {\n      editorContainer.set(element);\n      update();\n      resizeBinder.set(bind('resize', update));\n      scrollBinder.set(bind('scroll', update));\n    };\n\n    var unbind = function () {\n      editorContainer.on(function () {\n        resizeBinder.clear();\n        scrollBinder.clear();\n      });\n      editorContainer.clear();\n    };\n\n    return {\n      bind: bind$1,\n      unbind: unbind\n    };\n  });\n\n  var toggleFullscreen = function (editor, fullscreenState) {\n    var body = document.body;\n    var documentElement = document.documentElement;\n    var editorContainer = editor.getContainer();\n    var editorContainerS = SugarElement.fromDom(editorContainer);\n    var fullscreenRoot = getFullscreenRoot(editor);\n    var fullscreenInfo = fullscreenState.get();\n    var editorBody = SugarElement.fromDom(editor.getBody());\n    var isTouch = global$1.deviceType.isTouch();\n    var editorContainerStyle = editorContainer.style;\n    var iframe = editor.iframeElement;\n    var iframeStyle = iframe.style;\n\n    var handleClasses = function (handler) {\n      handler(body, 'tox-fullscreen');\n      handler(documentElement, 'tox-fullscreen');\n      handler(editorContainer, 'tox-fullscreen');\n      getShadowRoot(editorContainerS).map(function (root) {\n        return getShadowHost(root).dom;\n      }).each(function (host) {\n        handler(host, 'tox-fullscreen');\n        handler(host, 'tox-shadowhost');\n      });\n    };\n\n    var cleanup = function () {\n      if (isTouch) {\n        restoreStyles(editor.dom);\n      }\n\n      handleClasses(DOM.removeClass);\n      viewportUpdate.unbind();\n      Optional.from(fullscreenState.get()).each(function (info) {\n        return info.fullscreenChangeHandler.unbind();\n      });\n    };\n\n    if (!fullscreenInfo) {\n      var fullscreenChangeHandler = bind$1(owner(fullscreenRoot), getFullscreenchangeEventName(), function (_evt) {\n        if (getFullscreenNative(editor)) {\n          if (!isFullscreenElement(fullscreenRoot) && fullscreenState.get() !== null) {\n            toggleFullscreen(editor, fullscreenState);\n          }\n        }\n      });\n      var newFullScreenInfo = {\n        scrollPos: getScrollPos(),\n        containerWidth: editorContainerStyle.width,\n        containerHeight: editorContainerStyle.height,\n        containerTop: editorContainerStyle.top,\n        containerLeft: editorContainerStyle.left,\n        iframeWidth: iframeStyle.width,\n        iframeHeight: iframeStyle.height,\n        fullscreenChangeHandler: fullscreenChangeHandler\n      };\n\n      if (isTouch) {\n        clobberStyles(editor.dom, editorContainerS, editorBody);\n      }\n\n      iframeStyle.width = iframeStyle.height = '100%';\n      editorContainerStyle.width = editorContainerStyle.height = '';\n      handleClasses(DOM.addClass);\n      viewportUpdate.bind(editorContainerS);\n      editor.on('remove', cleanup);\n      fullscreenState.set(newFullScreenInfo);\n\n      if (getFullscreenNative(editor)) {\n        requestFullscreen(fullscreenRoot);\n      }\n\n      fireFullscreenStateChanged(editor, true);\n    } else {\n      fullscreenInfo.fullscreenChangeHandler.unbind();\n\n      if (getFullscreenNative(editor) && isFullscreenElement(fullscreenRoot)) {\n        exitFullscreen(owner(fullscreenRoot));\n      }\n\n      iframeStyle.width = fullscreenInfo.iframeWidth;\n      iframeStyle.height = fullscreenInfo.iframeHeight;\n      editorContainerStyle.width = fullscreenInfo.containerWidth;\n      editorContainerStyle.height = fullscreenInfo.containerHeight;\n      editorContainerStyle.top = fullscreenInfo.containerTop;\n      editorContainerStyle.left = fullscreenInfo.containerLeft;\n      setScrollPos(fullscreenInfo.scrollPos);\n      fullscreenState.set(null);\n      fireFullscreenStateChanged(editor, false);\n      cleanup();\n      editor.off('remove', cleanup);\n    }\n  };\n\n  var register$1 = function (editor, fullscreenState) {\n    editor.addCommand('mceFullScreen', function () {\n      toggleFullscreen(editor, fullscreenState);\n    });\n  };\n\n  var makeSetupHandler = function (editor, fullscreenState) {\n    return function (api) {\n      api.setActive(fullscreenState.get() !== null);\n\n      var editorEventCallback = function (e) {\n        return api.setActive(e.state);\n      };\n\n      editor.on('FullscreenStateChanged', editorEventCallback);\n      return function () {\n        return editor.off('FullscreenStateChanged', editorEventCallback);\n      };\n    };\n  };\n\n  var register = function (editor, fullscreenState) {\n    var onAction = function () {\n      return editor.execCommand('mceFullScreen');\n    };\n\n    editor.ui.registry.addToggleMenuItem('fullscreen', {\n      text: 'Fullscreen',\n      icon: 'fullscreen',\n      shortcut: 'Meta+Shift+F',\n      onAction: onAction,\n      onSetup: makeSetupHandler(editor, fullscreenState)\n    });\n    editor.ui.registry.addToggleButton('fullscreen', {\n      tooltip: 'Fullscreen',\n      icon: 'fullscreen',\n      onAction: onAction,\n      onSetup: makeSetupHandler(editor, fullscreenState)\n    });\n  };\n\n  function Plugin() {\n    global$3.add('fullscreen', function (editor) {\n      var fullscreenState = Cell(null);\n\n      if (editor.inline) {\n        return get$5(fullscreenState);\n      }\n\n      register$1(editor, fullscreenState);\n      register(editor, fullscreenState);\n      editor.addShortcut('Meta+Shift+F', '', 'mceFullScreen');\n      return get$5(fullscreenState);\n    });\n  }\n\n  Plugin();\n})();","map":{"version":3,"sources":["/opt/bitnami/apache/htdocs/converzee-frontend/node_modules/tinymce/plugins/fullscreen/plugin.js"],"names":["Cell","initial","value","get","set","v","global$3","tinymce","util","Tools","resolve","get$5","fullscreenState","isFullscreen","typeOf","x","t","Array","prototype","isPrototypeOf","constructor","name","String","isType$1","type","isSimpleType","isString","isArray","isBoolean","isNullable","a","undefined","isNonNullable","isFunction","isNumber","noop","compose","fa","fb","args","_i","arguments","length","apply","compose1","fbc","fab","constant","identity","curry","fn","initialArgs","restArgs","all","concat","never","always","none","NONE","call","thunk","id","me","fold","n","_s","isSome","isNone","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","toArray","toString","some","constant_a","self","f","s","from","Optional","__assign","Object","assign","i","p","hasOwnProperty","singleton","doRevoke","subject","revoke","clear","isSet","unbindable","unbind","on","nativePush","push","xs","len","r","each$1","filter$1","pred","findUntil","until","find$1","flatten","bind$3","get$4","head","findMap","arr","keys","obj","props","k","contains","str","substr","indexOf","isSupported$1","dom","style","getPropertyValue","fromHtml","html","scope","doc","document","div","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromDom","fromTag","tag","node","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","SugarElement","window","Function","DOCUMENT","DOCUMENT_FRAGMENT","ELEMENT","TEXT","element","nodeType","isType","isElement","isText","isDocument","isDocumentFragment","cached","called","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiOS","test","isiPhone","isMobile","isAndroid","isTouch","isTablet","isPhone","iOSwebview","isSafari","isDesktop","isWebView","firstMatch","regexes","find","agent","major","minor","group","Number","replace","nu$2","detect$3","versionRegexes","cleanedAgent","toLowerCase","unknown$2","Version","nu","detect","unknown","detectBrowser$1","browsers","userAgentData","brands","uaBrand","lcBrand","brand","_a","info","current","version","parseInt","detect$2","candidates","candidate","search","detectBrowser","detectOs","oses","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chrome","ie","opera","firefox","safari","unknown$1","nu$1","isBrowser","isEdge","isChrome","isIE","isOpera","isFirefox","Browser","windows","ios","android","linux","osx","solaris","freebsd","chromeos","isOS","isWindows","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","detect$1","userAgentDataOpt","deviceType","PlatformDetection","query","matchMedia","matches","platform","navigator","is","selector","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","all$1","base","querySelectorAll","eq","e1","e2","owner","ownerDocument","documentOrOwner","dos","parent","parentNode","parents","isRoot","stop","ret","rawParent","siblings$2","filterSelf","elements","children","isShadowRoot","host","supported","Element","attachShadow","Node","getRootNode","isSupported","e","getShadowRoot","getShadowHost","getOriginalEventTarget","event","el","isOpenShadowHost","composed","composedPath","shadowRoot","inBody","body","getBody","b","rawSet","key","setAttribute","get$3","getAttribute","remove","removeAttribute","internalSet","property","setProperty","setAll","css","get$2","styles","getComputedStyle","getUnsafeProperty","mkEvent","prevent","kill","raw","fromRawEvent","rawEvent","stopPropagation","preventDefault","clientX","clientY","handle","handler","binder","useCapture","wrapped","addEventListener","bind$2","removeEventListener","bind$1","left","top","translate","SugarPosition","get$1","_DOC","scrollLeft","documentElement","scrollTop","_win","win","bounds","width","height","right","bottom","getBounds","scroll","clientWidth","clientHeight","visualViewport","Math","max","pageLeft","pageTop","callback","global$2","global$1","global","fireFullscreenStateChanged","editor","state","fire","getFullscreenNative","getParam","getFullscreenRoot","getElement","getFullscreenElement","root","fullscreenElement","msFullscreenElement","webkitFullscreenElement","getFullscreenchangeEventName","requestFullscreen","sugarElem","msRequestFullscreen","webkitRequestFullScreen","exitFullscreen","sugarDoc","msExitFullscreen","webkitCancelFullScreen","isFullscreenElement","ancestors$1","predicate","siblings$1","ancestors","siblings","attr","siblingStyles","ancestorPosition","ancestorStyles","bgFallback","matchColor","editorBody","color","clobberStyles","container","gatherSiblings","clobber","clobberStyle","backup","trim","parseStyle","bgColor","containerStyles","restoreStyles","clobberedEls","restore","DOM","getScrollPos","setScrollPos","pos","scrollTo","viewportUpdate","editorContainer","resizeBinder","scrollBinder","refreshScroll","refreshVisualViewport","requestAnimationFrame","offsetTop","offsetLeft","update","throttle","toggleFullscreen","getContainer","editorContainerS","fullscreenRoot","fullscreenInfo","editorContainerStyle","iframe","iframeElement","iframeStyle","handleClasses","cleanup","removeClass","fullscreenChangeHandler","_evt","newFullScreenInfo","scrollPos","containerWidth","containerHeight","containerTop","containerLeft","iframeWidth","iframeHeight","addClass","off","register$1","addCommand","makeSetupHandler","api","setActive","editorEventCallback","register","onAction","execCommand","ui","registry","addToggleMenuItem","icon","shortcut","onSetup","addToggleButton","tooltip","Plugin","add","inline","addShortcut"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.10.2 (2021-11-17)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get$5 = function (fullscreenState) {\n      return {\n        isFullscreen: function () {\n          return fullscreenState.get() !== null;\n        }\n      };\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType$1 = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType$1('string');\n    var isArray = isType$1('array');\n    var isBoolean = isSimpleType('boolean');\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = identity;\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: function () {\n          return none();\n        },\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var singleton = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var get = function () {\n        return subject.get();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        get: get,\n        set: set\n      };\n    };\n    var unbindable = function () {\n      return singleton(function (s) {\n        return s.unbind();\n      });\n    };\n    var value = function () {\n      var subject = singleton(noop);\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return __assign(__assign({}, subject), { on: on });\n    };\n\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each$1 = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter$1 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find$1 = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind$3 = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var get$4 = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$4(xs, 0);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType(ELEMENT);\n    var isText = isType(TEXT);\n    var isDocument = isType(DOCUMENT);\n    var isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$2(group(1), group(2));\n    };\n    var detect$3 = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find(versionRegexes, cleanedAgent);\n    };\n    var unknown$2 = function () {\n      return nu$2(0, 0);\n    };\n    var nu$2 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$2,\n      detect: detect$3,\n      unknown: unknown$2\n    };\n\n    var detectBrowser$1 = function (browsers, userAgentData) {\n      return findMap(userAgentData.brands, function (uaBrand) {\n        var lcBrand = uaBrand.brand.toLowerCase();\n        return find$1(browsers, function (browser) {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(function (info) {\n          return {\n            current: info.name,\n            version: Version.nu(parseInt(uaBrand.version, 10), 0)\n          };\n        });\n      });\n    };\n\n    var detect$2 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find$1(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$2(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$2(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown = function () {\n      return nu({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown,\n      nu: nu,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$1 = function (userAgent, userAgentDataOpt, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = userAgentDataOpt.bind(function (userAgentData) {\n        return detectBrowser$1(browsers, userAgentData);\n      }).orThunk(function () {\n        return detectBrowser(browsers, userAgent);\n      }).fold(Browser.unknown, Browser.nu);\n      var os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$1 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch);\n    });\n    var detect = function () {\n      return platform();\n    };\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all$1 = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings$2 = function (element) {\n      var filterSelf = function (elements) {\n        return filter$1(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var get$3 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter = always;\n    var bind$1 = function (element, event, handler) {\n      return bind$2(element, event, filter, handler);\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var get$1 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n\n    var get = function (_win) {\n      var win = _win === undefined ? window : _win;\n      if (detect().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win['visualViewport']);\n      }\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$1(SugarElement.fromDom(doc));\n      return get(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n    var bind = function (name, callback, _win) {\n      return get(_win).map(function (visualViewport) {\n        var handler = function (e) {\n          return callback(fromRawEvent(e));\n        };\n        visualViewport.addEventListener(name, handler);\n        return {\n          unbind: function () {\n            return visualViewport.removeEventListener(name, handler);\n          }\n        };\n      }).getOrThunk(function () {\n        return { unbind: noop };\n      });\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var fireFullscreenStateChanged = function (editor, state) {\n      editor.fire('FullscreenStateChanged', { state: state });\n    };\n\n    var getFullscreenNative = function (editor) {\n      return editor.getParam('fullscreen_native', false, 'boolean');\n    };\n\n    var getFullscreenRoot = function (editor) {\n      var elem = SugarElement.fromDom(editor.getElement());\n      return getShadowRoot(elem).map(getShadowHost).getOrThunk(function () {\n        return getBody(owner(elem));\n      });\n    };\n    var getFullscreenElement = function (root) {\n      if (root.fullscreenElement !== undefined) {\n        return root.fullscreenElement;\n      } else if (root.msFullscreenElement !== undefined) {\n        return root.msFullscreenElement;\n      } else if (root.webkitFullscreenElement !== undefined) {\n        return root.webkitFullscreenElement;\n      } else {\n        return null;\n      }\n    };\n    var getFullscreenchangeEventName = function () {\n      if (document.fullscreenElement !== undefined) {\n        return 'fullscreenchange';\n      } else if (document.msFullscreenElement !== undefined) {\n        return 'MSFullscreenChange';\n      } else if (document.webkitFullscreenElement !== undefined) {\n        return 'webkitfullscreenchange';\n      } else {\n        return 'fullscreenchange';\n      }\n    };\n    var requestFullscreen = function (sugarElem) {\n      var elem = sugarElem.dom;\n      if (elem.requestFullscreen) {\n        elem.requestFullscreen();\n      } else if (elem.msRequestFullscreen) {\n        elem.msRequestFullscreen();\n      } else if (elem.webkitRequestFullScreen) {\n        elem.webkitRequestFullScreen();\n      }\n    };\n    var exitFullscreen = function (sugarDoc) {\n      var doc = sugarDoc.dom;\n      if (doc.exitFullscreen) {\n        doc.exitFullscreen();\n      } else if (doc.msExitFullscreen) {\n        doc.msExitFullscreen();\n      } else if (doc.webkitCancelFullScreen) {\n        doc.webkitCancelFullScreen();\n      }\n    };\n    var isFullscreenElement = function (elem) {\n      return elem.dom === getFullscreenElement(owner(elem).dom);\n    };\n\n    var ancestors$1 = function (scope, predicate, isRoot) {\n      return filter$1(parents(scope, isRoot), predicate);\n    };\n    var siblings$1 = function (scope, predicate) {\n      return filter$1(siblings$2(scope), predicate);\n    };\n\n    var all = function (selector) {\n      return all$1(selector);\n    };\n    var ancestors = function (scope, selector, isRoot) {\n      return ancestors$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var siblings = function (scope, selector) {\n      return siblings$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n\n    var attr = 'data-ephox-mobile-fullscreen-style';\n    var siblingStyles = 'display:none!important;';\n    var ancestorPosition = 'position:absolute!important;';\n    var ancestorStyles = 'top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;';\n    var bgFallback = 'background-color:rgb(255,255,255)!important;';\n    var isAndroid = global$1.os.isAndroid();\n    var matchColor = function (editorBody) {\n      var color = get$2(editorBody, 'background-color');\n      return color !== undefined && color !== '' ? 'background-color:' + color + '!important' : bgFallback;\n    };\n    var clobberStyles = function (dom, container, editorBody) {\n      var gatherSiblings = function (element) {\n        return siblings(element, '*:not(.tox-silver-sink)');\n      };\n      var clobber = function (clobberStyle) {\n        return function (element) {\n          var styles = get$3(element, 'style');\n          var backup = styles === undefined ? 'no-styles' : styles.trim();\n          if (backup === clobberStyle) {\n            return;\n          } else {\n            set(element, attr, backup);\n            setAll(element, dom.parseStyle(clobberStyle));\n          }\n        };\n      };\n      var ancestors$1 = ancestors(container, '*');\n      var siblings$1 = bind$3(ancestors$1, gatherSiblings);\n      var bgColor = matchColor(editorBody);\n      each$1(siblings$1, clobber(siblingStyles));\n      each$1(ancestors$1, clobber(ancestorPosition + ancestorStyles + bgColor));\n      var containerStyles = isAndroid === true ? '' : ancestorPosition;\n      clobber(containerStyles + ancestorStyles + bgColor)(container);\n    };\n    var restoreStyles = function (dom) {\n      var clobberedEls = all('[' + attr + ']');\n      each$1(clobberedEls, function (element) {\n        var restore = get$3(element, attr);\n        if (restore !== 'no-styles') {\n          setAll(element, dom.parseStyle(restore));\n        } else {\n          remove(element, 'style');\n        }\n        remove(element, attr);\n      });\n    };\n\n    var DOM = global$2.DOM;\n    var getScrollPos = function () {\n      return getBounds(window);\n    };\n    var setScrollPos = function (pos) {\n      return window.scrollTo(pos.x, pos.y);\n    };\n    var viewportUpdate = get().fold(function () {\n      return {\n        bind: noop,\n        unbind: noop\n      };\n    }, function (visualViewport) {\n      var editorContainer = value();\n      var resizeBinder = unbindable();\n      var scrollBinder = unbindable();\n      var refreshScroll = function () {\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n      };\n      var refreshVisualViewport = function () {\n        window.requestAnimationFrame(function () {\n          editorContainer.on(function (container) {\n            return setAll(container, {\n              top: visualViewport.offsetTop + 'px',\n              left: visualViewport.offsetLeft + 'px',\n              height: visualViewport.height + 'px',\n              width: visualViewport.width + 'px'\n            });\n          });\n        });\n      };\n      var update = global.throttle(function () {\n        refreshScroll();\n        refreshVisualViewport();\n      }, 50);\n      var bind$1 = function (element) {\n        editorContainer.set(element);\n        update();\n        resizeBinder.set(bind('resize', update));\n        scrollBinder.set(bind('scroll', update));\n      };\n      var unbind = function () {\n        editorContainer.on(function () {\n          resizeBinder.clear();\n          scrollBinder.clear();\n        });\n        editorContainer.clear();\n      };\n      return {\n        bind: bind$1,\n        unbind: unbind\n      };\n    });\n    var toggleFullscreen = function (editor, fullscreenState) {\n      var body = document.body;\n      var documentElement = document.documentElement;\n      var editorContainer = editor.getContainer();\n      var editorContainerS = SugarElement.fromDom(editorContainer);\n      var fullscreenRoot = getFullscreenRoot(editor);\n      var fullscreenInfo = fullscreenState.get();\n      var editorBody = SugarElement.fromDom(editor.getBody());\n      var isTouch = global$1.deviceType.isTouch();\n      var editorContainerStyle = editorContainer.style;\n      var iframe = editor.iframeElement;\n      var iframeStyle = iframe.style;\n      var handleClasses = function (handler) {\n        handler(body, 'tox-fullscreen');\n        handler(documentElement, 'tox-fullscreen');\n        handler(editorContainer, 'tox-fullscreen');\n        getShadowRoot(editorContainerS).map(function (root) {\n          return getShadowHost(root).dom;\n        }).each(function (host) {\n          handler(host, 'tox-fullscreen');\n          handler(host, 'tox-shadowhost');\n        });\n      };\n      var cleanup = function () {\n        if (isTouch) {\n          restoreStyles(editor.dom);\n        }\n        handleClasses(DOM.removeClass);\n        viewportUpdate.unbind();\n        Optional.from(fullscreenState.get()).each(function (info) {\n          return info.fullscreenChangeHandler.unbind();\n        });\n      };\n      if (!fullscreenInfo) {\n        var fullscreenChangeHandler = bind$1(owner(fullscreenRoot), getFullscreenchangeEventName(), function (_evt) {\n          if (getFullscreenNative(editor)) {\n            if (!isFullscreenElement(fullscreenRoot) && fullscreenState.get() !== null) {\n              toggleFullscreen(editor, fullscreenState);\n            }\n          }\n        });\n        var newFullScreenInfo = {\n          scrollPos: getScrollPos(),\n          containerWidth: editorContainerStyle.width,\n          containerHeight: editorContainerStyle.height,\n          containerTop: editorContainerStyle.top,\n          containerLeft: editorContainerStyle.left,\n          iframeWidth: iframeStyle.width,\n          iframeHeight: iframeStyle.height,\n          fullscreenChangeHandler: fullscreenChangeHandler\n        };\n        if (isTouch) {\n          clobberStyles(editor.dom, editorContainerS, editorBody);\n        }\n        iframeStyle.width = iframeStyle.height = '100%';\n        editorContainerStyle.width = editorContainerStyle.height = '';\n        handleClasses(DOM.addClass);\n        viewportUpdate.bind(editorContainerS);\n        editor.on('remove', cleanup);\n        fullscreenState.set(newFullScreenInfo);\n        if (getFullscreenNative(editor)) {\n          requestFullscreen(fullscreenRoot);\n        }\n        fireFullscreenStateChanged(editor, true);\n      } else {\n        fullscreenInfo.fullscreenChangeHandler.unbind();\n        if (getFullscreenNative(editor) && isFullscreenElement(fullscreenRoot)) {\n          exitFullscreen(owner(fullscreenRoot));\n        }\n        iframeStyle.width = fullscreenInfo.iframeWidth;\n        iframeStyle.height = fullscreenInfo.iframeHeight;\n        editorContainerStyle.width = fullscreenInfo.containerWidth;\n        editorContainerStyle.height = fullscreenInfo.containerHeight;\n        editorContainerStyle.top = fullscreenInfo.containerTop;\n        editorContainerStyle.left = fullscreenInfo.containerLeft;\n        setScrollPos(fullscreenInfo.scrollPos);\n        fullscreenState.set(null);\n        fireFullscreenStateChanged(editor, false);\n        cleanup();\n        editor.off('remove', cleanup);\n      }\n    };\n\n    var register$1 = function (editor, fullscreenState) {\n      editor.addCommand('mceFullScreen', function () {\n        toggleFullscreen(editor, fullscreenState);\n      });\n    };\n\n    var makeSetupHandler = function (editor, fullscreenState) {\n      return function (api) {\n        api.setActive(fullscreenState.get() !== null);\n        var editorEventCallback = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('FullscreenStateChanged', editorEventCallback);\n        return function () {\n          return editor.off('FullscreenStateChanged', editorEventCallback);\n        };\n      };\n    };\n    var register = function (editor, fullscreenState) {\n      var onAction = function () {\n        return editor.execCommand('mceFullScreen');\n      };\n      editor.ui.registry.addToggleMenuItem('fullscreen', {\n        text: 'Fullscreen',\n        icon: 'fullscreen',\n        shortcut: 'Meta+Shift+F',\n        onAction: onAction,\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n      editor.ui.registry.addToggleButton('fullscreen', {\n        tooltip: 'Fullscreen',\n        icon: 'fullscreen',\n        onAction: onAction,\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n    };\n\n    function Plugin () {\n      global$3.add('fullscreen', function (editor) {\n        var fullscreenState = Cell(null);\n        if (editor.inline) {\n          return get$5(fullscreenState);\n        }\n        register$1(editor, fullscreenState);\n        register(editor, fullscreenState);\n        editor.addShortcut('Meta+Shift+F', '', 'mceFullScreen');\n        return get$5(fullscreenState);\n      });\n    }\n\n    Plugin();\n\n}());\n"]},"metadata":{},"sourceType":"script"}